---
layout: yard_main
title: "Class: Google::Cloud::AutoML::V1beta1::BatchPredictOutputConfig - Cloud"
css: 
  - /docs/css/style.css
  - /docs/css/common.css
  - /css/yard-main.css
js: 
  - /docs/js/app.js
  - /js/yard-main.js
---
<script type="text/javascript" charset="utf-8">
  pathId = "Google::Cloud::AutoML::V1beta1::BatchPredictOutputConfig";
  relpath = '../../../../';
</script>


<div class="nav_wrap">
  <iframe id="nav" src="../../../../class_list.html?1"></iframe>
  <div id="resizer"></div>
</div>

<div id="main" tabindex="-1">
  <div id="header">
    <div id="menu">
  
    <a href="../../../../_index.html">Index (B)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../AutoML.html" title="Google::Cloud::AutoML (module)">AutoML</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../V1beta1.html" title="Google::Cloud::AutoML::V1beta1 (module)">V1beta1</a></span></span>
     &raquo; 
    <span class="title">BatchPredictOutputConfig</span>
  
</div>

    <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
    <div class="clear"></div>
  </div>

  <div id="content"><h1>Class: Google::Cloud::AutoML::V1beta1::BatchPredictOutputConfig
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Google::Cloud::AutoML::V1beta1::BatchPredictOutputConfig</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/google/cloud/automl/v1beta1/doc/google/cloud/automl/v1beta1/io.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Output configuration for BatchPredict Action.</p>

<p>As destination the</p>

<p><span class='object_link'><a href="#gcs_destination-instance_method" title="Google::Cloud::AutoML::V1beta1::BatchPredictOutputConfig#gcs_destination (method)">gcs_destination</a></span>
must be set unless specified otherwise for a domain. If gcs_destination is
set then in the given directory a new directory will be created. Its name
will be
&quot;prediction-<model-display-name>-<timestamp-of-prediction-call>&quot;,
where timestamp is in YYYY-MM-DDThh:mm:ss.sssZ ISO-8601 format. The contents
of it depends on the ML problem the predictions are made for.</p>

<ul>
<li>For Video Classification:
In the created directory a video_classification.csv file, and a .JSON
file per each video classification requested in the input (i.e. each
line in given CSV(s)), will be created.</li>
</ul>

<p>The format of video_classification.csv is:</p>

<p>GCS_FILE_PATH,TIME_SEGMENT_START,TIME_SEGMENT_END,JSON_FILE_NAME,STATUS
        where:
        GCS_FILE_PATH,TIME_SEGMENT_START,TIME_SEGMENT_END = matches 1 to 1
            the prediction input lines (i.e. video_classification.csv has
            precisely the same number of lines as the prediction input had.)
        JSON_FILE_NAME = Name of .JSON file in the output directory, which
            contains prediction responses for the video time segment.
        STATUS = &quot;OK&quot; if prediction completed successfully, or an error code
            with message otherwise. If STATUS is not &quot;OK&quot; then the .JSON file
            for that line may not exist or be empty.</p>

<pre class="code ruby"><code class="ruby">    Each .JSON file, assuming STATUS is &quot;OK&quot;, will contain a list of
    AnnotationPayload protos in JSON format, which are the predictions
    for the video time segment the file is assigned to in the
    video_classification.csv. All AnnotationPayload protos will have
    video_classification field set, and will be sorted by
    video_classification.type field (note that the returned types are
    governed by `classifaction_types` parameter in
    {PredictService::BatchPredictRequest#params}).
</code></pre>

<ul>
<li>For Video Object Tracking:
In the created directory a video_object_tracking.csv file will be
created, and multiple files video_object_trackinng_1.json,
video_object_trackinng_2.json,..., video_object_trackinng_N.json,
where N is the number of requests in the input (i.e. the number of
lines in given CSV(s)).</li>
</ul>

<p>The format of video_object_tracking.csv is:</p>

<p>GCS_FILE_PATH,TIME_SEGMENT_START,TIME_SEGMENT_END,JSON_FILE_NAME,STATUS
        where:
        GCS_FILE_PATH,TIME_SEGMENT_START,TIME_SEGMENT_END = matches 1 to 1
            the prediction input lines (i.e. video_object_tracking.csv has
            precisely the same number of lines as the prediction input had.)
        JSON_FILE_NAME = Name of .JSON file in the output directory, which
            contains prediction responses for the video time segment.
        STATUS = &quot;OK&quot; if prediction completed successfully, or an error
            code with message otherwise. If STATUS is not &quot;OK&quot; then the .JSON
            file for that line may not exist or be empty.</p>

<pre class="code ruby"><code class="ruby">    Each .JSON file, assuming STATUS is &quot;OK&quot;, will contain a list of
    AnnotationPayload protos in JSON format, which are the predictions
    for each frame of the video time segment the file is assigned to in
    video_object_tracking.csv. All AnnotationPayload protos will have
    video_object_tracking field set.
</code></pre>

<ul>
<li>For Text Extraction:
In the created directory files <code>text_extraction_1.jsonl</code>,
<code>text_extraction_2.jsonl</code>,...,<code>text_extraction_N.jsonl</code>
will be created, where N may be 1, and depends on the
total number of inputs and annotations found.
The contents of these .JSONL file(s) depend on whether the input
used inline text, or documents.
If input was inline, then each .JSONL file will contain, per line,
a JSON representation of a proto that wraps given in request text
snippet&#39;s &quot;id&quot; : &quot;<id_value>&quot; followed by a list of zero or more
AnnotationPayload protos (called annotations), which have
text_extraction detail populated. A single text snippet will be
listed only once with all its annotations, and its annotations will
never be split across files.
If input used documents, then each .JSONL file will contain, per
line, a JSON representation of a proto that wraps given in request
document proto, followed by its OCR-ed representation in the form
of a text snippet, finally followed by a list of zero or more
AnnotationPayload protos (called annotations), which have
text_extraction detail populated and refer, via their indices, to
the OCR-ed text snippet. A single document (and its text snippet)
will be listed only once with all its annotations, and its
annotations will never be split across files.
If prediction for any text snippet failed (partially or completely),
then additional <code>errors_1.jsonl</code>, <code>errors_2.jsonl</code>,...,
<code>errors_N.jsonl</code> files will be created (N depends on total number of
failed predictions). These files will have a JSON representation of a
proto that wraps either the &quot;id&quot; : &quot;<id_value>&quot; (in case of inline)
or the document proto (in case of document) but here followed by
exactly one</li>
</ul>

<p><a href="https:%0A//github.com/googleapis/googleapis/blob/master/google/rpc/status.proto"><code>google.rpc.Status</code></a>
        containing only <code>code</code> and <code>message</code>.</p>

<ul>
<li>For Tables:
Output depends on whether</li>
</ul>

<p><span class='object_link'><a href="#gcs_destination-instance_method" title="Google::Cloud::AutoML::V1beta1::BatchPredictOutputConfig#gcs_destination (method)">gcs_destination</a></span>
        or</p>

<p><span class='object_link'><a href="#bigquery_destination-instance_method" title="Google::Cloud::AutoML::V1beta1::BatchPredictOutputConfig#bigquery_destination (method)">bigquery_destination</a></span>
        is set (either is allowed).
        GCS case:
          In the created directory files <code>tables_1.csv</code>, <code>tables_2.csv</code>,...,
          <code>tables_N.csv</code> will be created, where N may be 1, and depends on
          the total number of the successfully predicted rows.
          For all CLASSIFICATION</p>

<p>prediction_type-s:
            Each .csv file will contain a header, listing all columns&#39;</p>

<p><span class='object_link'><a href="ColumnSpec.html#display_name-instance_method" title="Google::Cloud::AutoML::V1beta1::ColumnSpec#display_name (method)">display_name-s</a></span>
            given on input followed by M target column names in the format of</p>

<p>&quot;&lt;<span class='object_link'><a href="TablesModelMetadata.html#target_column_spec-instance_method" title="Google::Cloud::AutoML::V1beta1::TablesModelMetadata#target_column_spec (method)">target_column_specs</a></span></p>

<p><span class='object_link'><a href="ColumnSpec.html#display_name-instance_method" title="Google::Cloud::AutoML::V1beta1::ColumnSpec#display_name (method)">display_name</a></span>&gt;_<target
            value>_score&quot; where M is the number of distinct target values,
            i.e. number of distinct values in the target column of the table
            used to train the model. Subsequent lines will contain the
            respective values of successfully predicted rows, with the last,
            i.e. the target, columns having the corresponding prediction
            <span class='object_link'><a href="TablesAnnotation.html#score-instance_method" title="Google::Cloud::AutoML::V1beta1::TablesAnnotation#score (method)">scores</a></span>.
          For REGRESSION and FORECASTING</p>

<p>prediction_type-s:
            Each .csv file will contain a header, listing all columns&#39;
            display_name-s given
            on input followed by the predicted target column with name in the
            format of</p>

<p>&quot;predicted_&lt;<span class='object_link'><a href="TablesModelMetadata.html#target_column_spec-instance_method" title="Google::Cloud::AutoML::V1beta1::TablesModelMetadata#target_column_spec (method)">target_column_specs</a></span></p>

<p><span class='object_link'><a href="ColumnSpec.html#display_name-instance_method" title="Google::Cloud::AutoML::V1beta1::ColumnSpec#display_name (method)">display_name</a></span>&gt;&quot;
            Subsequent lines will contain the respective values of
            successfully predicted rows, with the last, i.e. the target,
            column having the predicted target value.
            If prediction for any rows failed, then an additional
            <code>errors_1.csv</code>, <code>errors_2.csv</code>,..., <code>errors_N.csv</code> will be
            created (N depends on total number of failed rows). These files
            will have analogous format as <code>tables_*.csv</code>, but always with a
            single target column having</p>

<p><a href="https:%0A//github.com/googleapis/googleapis/blob/master/google/rpc/status.proto"><code>google.rpc.Status</code></a>
            represented as a JSON string, and containing only <code>code</code> and
            <code>message</code>.
        BigQuery case:</p>

<p><span class='object_link'><a href="OutputConfig.html#bigquery_destination-instance_method" title="Google::Cloud::AutoML::V1beta1::OutputConfig#bigquery_destination (method)">bigquery_destination</a></span>
          pointing to a BigQuery project must be set. In the given project a
          new dataset will be created with name
          <code>prediction_&lt;model-display-name&gt;_&lt;timestamp-of-prediction-call&gt;</code>
          where <model-display-name> will be made
          BigQuery-dataset-name compatible (e.g. most special characters will
          become underscores), and timestamp will be in
          YYYY_MM_DDThh_mm_ss_sssZ &quot;based on ISO-8601&quot; format. In the dataset
          two tables will be created, <code>predictions</code>, and <code>errors</code>.
          The <code>predictions</code> table&#39;s column names will be the input columns&#39;</p>

<p><span class='object_link'><a href="ColumnSpec.html#display_name-instance_method" title="Google::Cloud::AutoML::V1beta1::ColumnSpec#display_name (method)">display_name-s</a></span>
          followed by the target column with name in the format of</p>

<p>&quot;predicted_&lt;<span class='object_link'><a href="TablesModelMetadata.html#target_column_spec-instance_method" title="Google::Cloud::AutoML::V1beta1::TablesModelMetadata#target_column_spec (method)">target_column_specs</a></span></p>

<p><span class='object_link'><a href="ColumnSpec.html#display_name-instance_method" title="Google::Cloud::AutoML::V1beta1::ColumnSpec#display_name (method)">display_name</a></span>&gt;&quot;
          The input feature columns will contain the respective values of
          successfully predicted rows, with the target column having an
          ARRAY of</p>

<p><span class='object_link'><a href="AnnotationPayload.html" title="Google::Cloud::AutoML::V1beta1::AnnotationPayload (class)">AnnotationPayloads</a></span>,
          represented as STRUCT-s, containing
          <span class='object_link'><a href="TablesAnnotation.html" title="Google::Cloud::AutoML::V1beta1::TablesAnnotation (class)">TablesAnnotation</a></span>.
          The <code>errors</code> table contains rows for which the prediction has
          failed, it has analogous input columns while the target column name
          is in the format of</p>

<p>&quot;errors_&lt;<span class='object_link'><a href="TablesModelMetadata.html#target_column_spec-instance_method" title="Google::Cloud::AutoML::V1beta1::TablesModelMetadata#target_column_spec (method)">target_column_specs</a></span></p>

<p><span class='object_link'><a href="ColumnSpec.html#display_name-instance_method" title="Google::Cloud::AutoML::V1beta1::ColumnSpec#display_name (method)">display_name</a></span>&gt;&quot;,
          and as a value has</p>

<p><a href="https:%0A//github.com/googleapis/googleapis/blob/master/google/rpc/status.proto"><code>google.rpc.Status</code></a>
          represented as a STRUCT, and containing only <code>code</code> and <code>message</code>.</p>


  </div>
</div>
<div class="tags">
  

</div>



  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#bigquery_destination-instance_method" title="#bigquery_destination (instance method)">#<strong>bigquery_destination</strong>  &#x21d2; Google::Cloud::AutoML::V1beta1::BigQueryDestination </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The BigQuery location where the output is to be written to.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#gcs_destination-instance_method" title="#gcs_destination (instance method)">#<strong>gcs_destination</strong>  &#x21d2; Google::Cloud::AutoML::V1beta1::GcsDestination </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The Google Cloud Storage location of the directory where the output is to be written to.</p>
</div></span>
  
</li>

    
  </ul>





  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="bigquery_destination=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="bigquery_destination-instance_method">
  
    #<strong>bigquery_destination</strong>  &#x21d2; <tt><span class='object_link'><a href="BigQueryDestination.html" title="Google::Cloud::AutoML::V1beta1::BigQueryDestination (class)">Google::Cloud::AutoML::V1beta1::BigQueryDestination</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns The BigQuery location where the output is to be written to.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="BigQueryDestination.html" title="Google::Cloud::AutoML::V1beta1::BigQueryDestination (class)">Google::Cloud::AutoML::V1beta1::BigQueryDestination</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The BigQuery location where the output is to be written to.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


831</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/automl/v1beta1/doc/google/cloud/automl/v1beta1/io.rb', line 831</span>

<span class='kw'>class</span> <span class='const'><span class='object_link'><a href="" title="Google::Cloud::AutoML::V1beta1::BatchPredictOutputConfig (class)">BatchPredictOutputConfig</a></span></span><span class='semicolon'>;</span> <span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="gcs_destination=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="gcs_destination-instance_method">
  
    #<strong>gcs_destination</strong>  &#x21d2; <tt><span class='object_link'><a href="GcsDestination.html" title="Google::Cloud::AutoML::V1beta1::GcsDestination (class)">Google::Cloud::AutoML::V1beta1::GcsDestination</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns The Google Cloud Storage location of the directory where the output is to
be written to.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="GcsDestination.html" title="Google::Cloud::AutoML::V1beta1::GcsDestination (class)">Google::Cloud::AutoML::V1beta1::GcsDestination</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The Google Cloud Storage location of the directory where the output is to
be written to.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


831</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/automl/v1beta1/doc/google/cloud/automl/v1beta1/io.rb', line 831</span>

<span class='kw'>class</span> <span class='const'><span class='object_link'><a href="" title="Google::Cloud::AutoML::V1beta1::BatchPredictOutputConfig (class)">BatchPredictOutputConfig</a></span></span><span class='semicolon'>;</span> <span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


</div>

  <div id="footer">
  <ul class="footer-links">
    <li>
      <a href="https://github.com/GoogleCloudPlatform/google-cloud-ruby" title="Google Cloud on Github">
        <img src="/google-cloud-ruby/img/icon-link-github.svg" alt="GitHub icon"> GitHub
      </a>
    </li>
    <li>
      <a href="https://github.com/GoogleCloudPlatform/google-cloud-ruby/issues" title="Google Cloud issues on Github">
        <img src="/google-cloud-ruby/img/icon-link-github.svg" alt="GitHub icon"> Issues
      </a>
    </li>
    <li>
      <a href="http://stackoverflow.com/questions/tagged/google-cloud-ruby" title="Google Cloud on StackOverflow">
      <img src="/google-cloud-ruby/img/icon-link-stackoverflow.svg" alt="StackOverflow icon"> StackOverflow
    </a>
    </li>
    <li>
      <a href="http://rubygems.org/gems/google-cloud" title="Google Cloud on RubyGems">
        <img src="/google-cloud-ruby/img/icon-link-package-manager.svg" alt="RubyGems icon"> RubyGems
      </a>
    </li>
  </ul>

  <p>
    Documentation generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>.
  </p>
</div>

</div>
