---
layout: yard_main
title: "Class: Google::Cloud::Storage::File - Google"
css: 
  - /docs/css/style.css
  - /docs/css/common.css
  - /css/yard-main.css
js: 
  - /docs/js/app.js
  - /js/yard-main.js
---
<script type="text/javascript" charset="utf-8">
  pathId = "Google::Cloud::Storage::File";
  relpath = '../../../';
</script>


<div class="nav_wrap">
  <iframe id="nav" src="../../../class_list.html?1"></iframe>
  <div id="resizer"></div>
</div>

<div id="main" tabindex="-1">
  <div id="header">
    <div id="menu">
  
    <a href="../../../_index.html">Index (F)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span>
     &raquo; 
    <span class="title">File</span>
  
</div>

    <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
    <div class="clear"></div>
  </div>

  <div id="content"><h1>Class: Google::Cloud::Storage::File
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Google::Cloud::Storage::File</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/google/cloud/storage/file.rb<span class="defines">,<br />
  lib/google/cloud/storage/file/acl.rb,<br /> lib/google/cloud/storage/file/list.rb,<br /> lib/google/cloud/storage/file/verifier.rb,<br /> lib/google/cloud/storage/file/signer_v2.rb,<br /> lib/google/cloud/storage/file/signer_v4.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <h1>File</h1>

<p>Represents a File
(<a href="https://cloud.google.com/storage/docs/json_api/v1/objects">Object</a>)
that belongs to a <span class='object_link'><a href="Bucket.html" title="Google::Cloud::Storage::Bucket (class)">Bucket</a></span>. Files (Objects) are the individual pieces of
data that you store in Google Cloud Storage. A file can be up to 5 TB in
size. Files have two components: data and metadata. The data component
is the data from an external file or other data source that you want to
store in Google Cloud Storage. The metadata component is a collection of
name-value pairs that describe various qualities of the data.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_download'>download</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/downloaded/file.ext</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Download a public file with an unauthenticated client:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_anonymous'><span class='object_link'><a href="../Storage.html#anonymous-class_method" title="Google::Cloud::Storage.anonymous (method)">anonymous</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>public-bucket</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>skip_lookup:</span> <span class='kw'>true</span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/public-file.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>skip_lookup:</span> <span class='kw'>true</span>

<span class='id identifier rubyid_downloaded'>downloaded</span> <span class='op'>=</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_download'>download</span>
<span class='id identifier rubyid_downloaded'>downloaded</span><span class='period'>.</span><span class='id identifier rubyid_rewind'>rewind</span>
<span class='id identifier rubyid_downloaded'>downloaded</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span> <span class='comment'>#=&gt; &quot;Hello world!&quot;</span></code></pre>
    
  </div>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/concepts-techniques" target="_parent" title="Concepts and Techniques">Concepts and Techniques</a></li>
    
  </ul>

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="File/Updater.html" title="Google::Cloud::Storage::File::Updater (class)">Updater</a></span></p>
</div>
<h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="File/Acl.html" title="Google::Cloud::Storage::File::Acl (class)">Acl</a></span>, <span class='object_link'><a href="File/List.html" title="Google::Cloud::Storage::File::List (class)">List</a></span>, <span class='object_link'><a href="File/Updater.html" title="Google::Cloud::Storage::File::Updater (class)">Updater</a></span>
    
  
</p>




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_project-instance_method" title="#user_project (instance method)">#<strong>user_project</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>If this attribute is set to <code>true</code>, transit costs for operations on the file will be billed to the current project for this client.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#acl-instance_method" title="#acl (instance method)">#<strong>acl</strong>  &#x21d2; File::Acl </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The <span class='object_link'><a href="File/Acl.html" title="Google::Cloud::Storage::File::Acl (class)">Acl</a></span> instance used to control access to the file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#api_url-instance_method" title="#api_url (instance method)">#<strong>api_url</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A URL that can be used to access the file using the REST API.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#bucket-instance_method" title="#bucket (instance method)">#<strong>bucket</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The name of the <span class='object_link'><a href="Bucket.html" title="Google::Cloud::Storage::Bucket (class)">Bucket</a></span> containing this file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cache_control-instance_method" title="#cache_control (instance method)">#<strong>cache_control</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The <a href="https://tools.ietf.org/html/rfc7234#section-5.2">Cache-Control</a> directive for the file data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cache_control=-instance_method" title="#cache_control= (instance method)">#<strong>cache_control=</strong>(cache_control)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updates the <a href="https://tools.ietf.org/html/rfc7234#section-5.2">Cache-Control</a> directive for the file data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#content_disposition-instance_method" title="#content_disposition (instance method)">#<strong>content_disposition</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The <a href="https://tools.ietf.org/html/rfc6266">Content-Disposition</a> of the file data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#content_disposition=-instance_method" title="#content_disposition= (instance method)">#<strong>content_disposition=</strong>(content_disposition)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updates the <a href="https://tools.ietf.org/html/rfc6266">Content-Disposition</a> of the file data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#content_encoding-instance_method" title="#content_encoding (instance method)">#<strong>content_encoding</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The <a href="https://tools.ietf.org/html/rfc7231#section-3.1.2.2">Content-Encoding </a> of the file data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#content_encoding=-instance_method" title="#content_encoding= (instance method)">#<strong>content_encoding=</strong>(content_encoding)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updates the <a href="https://tools.ietf.org/html/rfc7231#section-3.1.2.2">Content-Encoding </a> of the file data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#content_language-instance_method" title="#content_language (instance method)">#<strong>content_language</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The <a href="http://tools.ietf.org/html/bcp47">Content-Language</a> of the file data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#content_language=-instance_method" title="#content_language= (instance method)">#<strong>content_language=</strong>(content_language)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updates the <a href="http://tools.ietf.org/html/bcp47">Content-Language</a> of the file data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#content_type-instance_method" title="#content_type (instance method)">#<strong>content_type</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The <a href="https://tools.ietf.org/html/rfc2616#section-14.17">Content-Type</a> of the file data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#content_type=-instance_method" title="#content_type= (instance method)">#<strong>content_type=</strong>(content_type)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updates the <a href="https://tools.ietf.org/html/rfc2616#section-14.17">Content-Type</a> of the file data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#copy-instance_method" title="#copy (instance method)">#<strong>copy</strong>(dest_bucket_or_path, dest_path = nil, acl: nil, generation: nil, encryption_key: nil) {|file| ... } &#x21d2; Google::Cloud::Storage::File </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Copy the file to a new location.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#crc32c-instance_method" title="#crc32c (instance method)">#<strong>crc32c</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The CRC32c checksum of the data, as described in <a href="http://tools.ietf.org/html/rfc4960#appendix-B">RFC 4960, Appendix B</a>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#created_at-instance_method" title="#created_at (instance method)">#<strong>created_at</strong>  &#x21d2; DateTime </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creation time of the file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete-instance_method" title="#delete (instance method)">#<strong>delete</strong>(generation: nil)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Permanently deletes the file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#download-instance_method" title="#download (instance method)">#<strong>download</strong>(path = nil, verify: :md5, encryption_key: nil, range: nil, skip_decompress: nil)  &#x21d2; ::File, StringIO </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Download the file&#39;s contents to a local file or an File-like object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#encryption_key_sha256-instance_method" title="#encryption_key_sha256 (instance method)">#<strong>encryption_key_sha256</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>An <a href="https://tools.ietf.org/html/rfc4648#section-4">RFC 4648</a> Base64-encoded string of the SHA256 hash of the <a href="https://cloud.google.com/storage/docs/encryption#customer-supplied">customer-supplied encryption key</a>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#etag-instance_method" title="#etag (instance method)">#<strong>etag</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>HTTP 1.1 Entity tag for the file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#event_based_hold%3F-instance_method" title="#event_based_hold? (instance method)">#<strong>event_based_hold?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Whether there is an event-based hold on the file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#exists%3F-instance_method" title="#exists? (instance method)">#<strong>exists?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Determines whether the file exists in the Storage service.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#generation-instance_method" title="#generation (instance method)">#<strong>generation</strong>  &#x21d2; Fixnum </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The content generation of this file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#generations-instance_method" title="#generations (instance method)">#<strong>generations</strong>  &#x21d2; Array&lt;Google::Cloud::Storage::File&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Retrieves a list of versioned files for the current object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#id-instance_method" title="#id (instance method)">#<strong>id</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The ID of the file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#kind-instance_method" title="#kind (instance method)">#<strong>kind</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The kind of item this is.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#kms_key-instance_method" title="#kms_key (instance method)">#<strong>kms_key</strong>  &#x21d2; String<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The Cloud KMS encryption key that was used to protect the file, or   <code>nil</code> if none has been configured.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#md5-instance_method" title="#md5 (instance method)">#<strong>md5</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>MD5 hash of the data; encoded using base64.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#media_url-instance_method" title="#media_url (instance method)">#<strong>media_url</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A URL that can be used to download the file using the REST API.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#metadata-instance_method" title="#metadata (instance method)">#<strong>metadata</strong>  &#x21d2; Hash(String =&gt; String) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A hash of custom, user-provided web-safe keys and arbitrary string values that will returned with requests for the file as &quot;x-goog-meta-&quot; response headers.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#metadata=-instance_method" title="#metadata= (instance method)">#<strong>metadata=</strong>(metadata)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updates the hash of custom, user-provided web-safe keys and arbitrary string values that will returned with requests for the file as &quot;x-goog-meta-&quot; response headers.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#metageneration-instance_method" title="#metageneration (instance method)">#<strong>metageneration</strong>  &#x21d2; Fixnum </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The version of the metadata for this file at this generation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#name-instance_method" title="#name (instance method)">#<strong>name</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The name of this file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#public_url-instance_method" title="#public_url (instance method)">#<strong>public_url</strong>(protocol: :https)  &#x21d2; String </a>
    

    
      (also: #url)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Public URL to access the file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#release_event_based_hold!-instance_method" title="#release_event_based_hold! (instance method)">#<strong>release_event_based_hold!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Sets the event-based hold property of the file to <code>false</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#release_temporary_hold!-instance_method" title="#release_temporary_hold! (instance method)">#<strong>release_temporary_hold!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Sets the temporary hold property of the file to <code>false</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reload!-instance_method" title="#reload! (instance method)">#<strong>reload!</strong>(generation: nil)  &#x21d2; Object </a>
    

    
      (also: #refresh!)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Reloads the file with current data from the Storage service.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#retention_expires_at-instance_method" title="#retention_expires_at (instance method)">#<strong>retention_expires_at</strong>  &#x21d2; DateTime<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The retention expiration time of the file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rewrite-instance_method" title="#rewrite (instance method)">#<strong>rewrite</strong>(dest_bucket_or_path, dest_path = nil, acl: nil, generation: nil, encryption_key: nil, new_encryption_key: nil, new_kms_key: nil) {|file| ... } &#x21d2; Google::Cloud::Storage::File </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><a href="https://cloud.google.com/storage/docs/json_api/v1/objects/rewrite">Rewrites</a> the file to a new location.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rotate-instance_method" title="#rotate (instance method)">#<strong>rotate</strong>(encryption_key: nil, new_encryption_key: nil, new_kms_key: nil)  &#x21d2; Google::Cloud::Storage::File </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><a href="https://cloud.google.com/storage/docs/json_api/v1/objects/rewrite">Rewrites</a> the file to the same <span class='object_link'><a href="#bucket-instance_method" title="Google::Cloud::Storage::File#bucket (method)">#bucket</a></span> and <span class='object_link'><a href="#name-instance_method" title="Google::Cloud::Storage::File#name (method)">#name</a></span> with a new <a href="https://cloud.google.com/storage/docs/encryption#customer-supplied">customer-supplied encryption key</a>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_event_based_hold!-instance_method" title="#set_event_based_hold! (instance method)">#<strong>set_event_based_hold!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Sets the event-based hold property of the file to <code>true</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_temporary_hold!-instance_method" title="#set_temporary_hold! (instance method)">#<strong>set_temporary_hold!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Sets the temporary hold property of the file to <code>true</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#signed_url-instance_method" title="#signed_url (instance method)">#<strong>signed_url</strong>(method: nil, expires: nil, content_type: nil, content_md5: nil, headers: nil, issuer: nil, client_email: nil, signing_key: nil, private_key: nil, query: nil, version: nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#size-instance_method" title="#size (instance method)">#<strong>size</strong>  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Content-Length of the data in bytes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#storage_class-instance_method" title="#storage_class (instance method)">#<strong>storage_class</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The file&#39;s storage class.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#storage_class=-instance_method" title="#storage_class= (instance method)">#<strong>storage_class=</strong>(storage_class)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Rewrites the file with a new storage class, which determines the SLA and the cost of storage.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#temporary_hold%3F-instance_method" title="#temporary_hold? (instance method)">#<strong>temporary_hold?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Whether there is a temporary hold on the file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update-instance_method" title="#update (instance method)">#<strong>update</strong> {|file| ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Updates the file with changes made in the given block in a single PATCH request.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#updated_at-instance_method" title="#updated_at (instance method)">#<strong>updated_at</strong>  &#x21d2; DateTime </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The creation or modification time of the file.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="user_project=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="user_project-instance_method">
  
    #<strong>user_project</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>If this attribute is set to <code>true</code>, transit costs for operations on
the file will be billed to the current project for this client. (See
<span class='object_link'><a href="Project.html#project-instance_method" title="Google::Cloud::Storage::Project#project (method)">Project#project</a></span> for the ID of the current project.) If this
attribute is set to a project ID, and that project is authorized for
the currently authenticated service account, transit costs will be
billed to that project. This attribute is required with requester
pays-enabled buckets. The default is <code>nil</code>.</p>

<p>In general, this attribute should be set when first retrieving the
owning bucket by providing the <code>user_project</code> option to
<span class='object_link'><a href="Project.html#bucket-instance_method" title="Google::Cloud::Storage::Project#bucket (method)">Project#bucket</a></span> or <span class='object_link'><a href="Project.html#buckets-instance_method" title="Google::Cloud::Storage::Project#buckets (method)">Project#buckets</a></span>.</p>

<p>See also <span class='object_link'><a href="Bucket.html#requester_pays=-instance_method" title="Google::Cloud::Storage::Bucket#requester_pays= (method)">Bucket#requester_pays=</a></span> and <span class='object_link'><a href="Bucket.html#requester_pays-instance_method" title="Google::Cloud::Storage::Bucket#requester_pays (method)">Bucket#requester_pays</a></span>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Setting a non-default project:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>other-project-bucket</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>user_project:</span> <span class='kw'>true</span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/file.ext</span><span class='tstring_end'>&quot;</span></span> <span class='comment'># Billed to current project
</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_user_project'>user_project</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-other-project</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_download'>download</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>file.ext</span><span class='tstring_end'>&quot;</span></span> <span class='comment'># Billed to &quot;my-other-project&quot;</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


97
98
99</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 97</span>

<span class='kw'>def</span> <span class='id identifier rubyid_user_project'>user_project</span>
  <span class='ivar'>@user_project</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="acl-instance_method">
  
    #<strong>acl</strong>  &#x21d2; <tt><span class='object_link'><a href="File/Acl.html" title="Google::Cloud::Storage::File::Acl (class)">File::Acl</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The <span class='object_link'><a href="File/Acl.html" title="Google::Cloud::Storage::File::Acl (class)">Acl</a></span> instance used to control access to the file.</p>

<p>A file has owners, writers, and readers. Permissions can be granted to
an individual user&#39;s email address, a group&#39;s email address,  as well
as many predefined lists.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Grant access to a user by prepending <code>&quot;user-&quot;</code> to an email:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>avatars/heidi/400x400.png</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>heidi@example.net</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_acl'>acl</span><span class='period'>.</span><span class='id identifier rubyid_add_reader'>add_reader</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Grant access to a group by prepending <code>&quot;group-&quot;</code> to an email:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>avatars/heidi/400x400.png</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_email'>email</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>authors@example.net</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_acl'>acl</span><span class='period'>.</span><span class='id identifier rubyid_add_reader'>add_reader</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>group-</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_email'>email</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Or, grant access via a predefined permissions list:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>avatars/heidi/400x400.png</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_acl'>acl</span><span class='period'>.</span><span class='id identifier rubyid_public!'>public!</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="File/Acl.html" title="Google::Cloud::Storage::File::Acl (class)">File::Acl</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/access-control" target="_parent" title="Access Control guide">Access Control guide</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1574
1575
1576</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 1574</span>

<span class='kw'>def</span> <span class='id identifier rubyid_acl'>acl</span>
  <span class='ivar'>@acl</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="" title="Google::Cloud::Storage::File (class)">File</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="File/Acl.html" title="Google::Cloud::Storage::File::Acl (class)">Acl</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="api_url-instance_method">
  
    #<strong>api_url</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>A URL that can be used to access the file using the REST API.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


175
176
177</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 175</span>

<span class='kw'>def</span> <span class='id identifier rubyid_api_url'>api_url</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_self_link'>self_link</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="bucket-instance_method">
  
    #<strong>bucket</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The name of the <span class='object_link'><a href="Bucket.html" title="Google::Cloud::Storage::Bucket (class)">Bucket</a></span> containing this file.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


144
145
146</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 144</span>

<span class='kw'>def</span> <span class='id identifier rubyid_bucket'>bucket</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cache_control-instance_method">
  
    #<strong>cache_control</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The <a href="https://tools.ietf.org/html/rfc7234#section-5.2">Cache-Control</a>
directive for the file data. If omitted, and the file is accessible
to all anonymous users, the default will be <code>public, max-age=3600</code>.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


253
254
255</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 253</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cache_control'>cache_control</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_cache_control'>cache_control</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cache_control=-instance_method">
  
    #<strong>cache_control=</strong>(cache_control)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Updates the
<a href="https://tools.ietf.org/html/rfc7234#section-5.2">Cache-Control</a>
directive for the file data. If omitted, and the file is accessible
to all anonymous users, the default will be <code>public, max-age=3600</code>.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>cache_control</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The Cache-Control directive.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


265
266
267
268</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 265</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cache_control='>cache_control=</span> <span class='id identifier rubyid_cache_control'>cache_control</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_cache_control'>cache_control</span> <span class='op'>=</span> <span class='id identifier rubyid_cache_control'>cache_control</span>
  <span class='id identifier rubyid_update_gapi!'>update_gapi!</span> <span class='symbol'>:cache_control</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="content_disposition-instance_method">
  
    #<strong>content_disposition</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The <a href="https://tools.ietf.org/html/rfc6266">Content-Disposition</a> of the
file data.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


276
277
278</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 276</span>

<span class='kw'>def</span> <span class='id identifier rubyid_content_disposition'>content_disposition</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_content_disposition'>content_disposition</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="content_disposition=-instance_method">
  
    #<strong>content_disposition=</strong>(content_disposition)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Updates the <a href="https://tools.ietf.org/html/rfc6266">Content-Disposition</a>
of the file data.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>content_disposition</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The Content-Disposition of the
file.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


287
288
289
290</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 287</span>

<span class='kw'>def</span> <span class='id identifier rubyid_content_disposition='>content_disposition=</span> <span class='id identifier rubyid_content_disposition'>content_disposition</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_content_disposition'>content_disposition</span> <span class='op'>=</span> <span class='id identifier rubyid_content_disposition'>content_disposition</span>
  <span class='id identifier rubyid_update_gapi!'>update_gapi!</span> <span class='symbol'>:content_disposition</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="content_encoding-instance_method">
  
    #<strong>content_encoding</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The <a href="https://tools.ietf.org/html/rfc7231#section-3.1.2.2">Content-Encoding
</a> of the file
data.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


299
300
301</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 299</span>

<span class='kw'>def</span> <span class='id identifier rubyid_content_encoding'>content_encoding</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_content_encoding'>content_encoding</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="content_encoding=-instance_method">
  
    #<strong>content_encoding=</strong>(content_encoding)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Updates the <a href="https://tools.ietf.org/html/rfc7231#section-3.1.2.2">Content-Encoding
</a> of the file
data.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>content_encoding</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The Content-Encoding of the file.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


310
311
312
313</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 310</span>

<span class='kw'>def</span> <span class='id identifier rubyid_content_encoding='>content_encoding=</span> <span class='id identifier rubyid_content_encoding'>content_encoding</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_content_encoding'>content_encoding</span> <span class='op'>=</span> <span class='id identifier rubyid_content_encoding'>content_encoding</span>
  <span class='id identifier rubyid_update_gapi!'>update_gapi!</span> <span class='symbol'>:content_encoding</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="content_language-instance_method">
  
    #<strong>content_language</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The <a href="http://tools.ietf.org/html/bcp47">Content-Language</a> of the file
data.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


321
322
323</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 321</span>

<span class='kw'>def</span> <span class='id identifier rubyid_content_language'>content_language</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_content_language'>content_language</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="content_language=-instance_method">
  
    #<strong>content_language=</strong>(content_language)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Updates the <a href="http://tools.ietf.org/html/bcp47">Content-Language</a> of
the file data.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>content_language</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The Content-Language of the file.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


331
332
333
334</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 331</span>

<span class='kw'>def</span> <span class='id identifier rubyid_content_language='>content_language=</span> <span class='id identifier rubyid_content_language'>content_language</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_content_language'>content_language</span> <span class='op'>=</span> <span class='id identifier rubyid_content_language'>content_language</span>
  <span class='id identifier rubyid_update_gapi!'>update_gapi!</span> <span class='symbol'>:content_language</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="content_type-instance_method">
  
    #<strong>content_type</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The <a href="https://tools.ietf.org/html/rfc2616#section-14.17">Content-Type</a>
of the file data.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


342
343
344</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 342</span>

<span class='kw'>def</span> <span class='id identifier rubyid_content_type'>content_type</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_content_type'>content_type</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="content_type=-instance_method">
  
    #<strong>content_type=</strong>(content_type)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Updates the
<a href="https://tools.ietf.org/html/rfc2616#section-14.17">Content-Type</a> of
the file data.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>content_type</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The Content-Type of the file.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


353
354
355
356</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 353</span>

<span class='kw'>def</span> <span class='id identifier rubyid_content_type='>content_type=</span> <span class='id identifier rubyid_content_type'>content_type</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_content_type'>content_type</span> <span class='op'>=</span> <span class='id identifier rubyid_content_type'>content_type</span>
  <span class='id identifier rubyid_update_gapi!'>update_gapi!</span> <span class='symbol'>:content_type</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="copy-instance_method">
  
    #<strong>copy</strong>(dest_bucket_or_path, dest_path = nil, acl: nil, generation: nil, encryption_key: nil) {|file| ... } &#x21d2; <tt><span class='object_link'><a href="" title="Google::Cloud::Storage::File (class)">Google::Cloud::Storage::File</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Copy the file to a new location.</p>

<p>If a <a href="https://cloud.google.com/storage/docs/encryption#customer-supplied">customer-supplied encryption
key</a>
was used with <span class='object_link'><a href="Bucket.html#create_file-instance_method" title="Google::Cloud::Storage::Bucket#create_file (method)">Bucket#create_file</a></span>, the <code>encryption_key</code> option must
be provided.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>The file can be copied to a new path in the current bucket:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_copy'>copy</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/destination/file.ext</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>The file can also be copied to a different bucket:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_copy'>copy</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>new-destination-bucket</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/destination/file.ext</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>The file can also be copied by specifying a generation:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_copy'>copy</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>copy/of/previous/generation/file.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='label'>generation:</span> <span class='int'>123456</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>The file can be modified during copying:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_copy'>copy</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>new-destination-bucket</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/destination/file.ext</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_metadata'>metadata</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>copied_from</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>dest_bucket_or_path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Either the bucket to copy the file
to, or the path to copy the file to in the current bucket.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>dest_path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>If a bucket was provided in the first
parameter, this contains the path to copy the file to in the given
bucket.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>acl</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A predefined set of access controls to apply to
new file.</p>

<p>Acceptable values are:</p>

<ul>
<li><code>auth</code>, <code>auth_read</code>, <code>authenticated</code>, <code>authenticated_read</code>,
<code>authenticatedRead</code> - File owner gets OWNER access, and
allAuthenticatedUsers get READER access.</li>
<li><code>owner_full</code>, <code>bucketOwnerFullControl</code> - File owner gets OWNER
access, and project team owners get OWNER access.</li>
<li><code>owner_read</code>, <code>bucketOwnerRead</code> - File owner gets OWNER access,
and project team owners get READER access.</li>
<li><code>private</code> - File owner gets OWNER access.</li>
<li><code>project_private</code>, <code>projectPrivate</code> - File owner gets OWNER
access, and project team members get access according to their
roles.</li>
<li><code>public</code>, <code>public_read</code>, <code>publicRead</code> - File owner gets OWNER
access, and allUsers get READER access.</li>
</ul>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>generation</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Select a specific revision of the file to
copy. The default is the latest version.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>encryption_key</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Optional. The customer-supplied,
AES-256 encryption key used to encrypt the file, if one was provided
to <span class='object_link'><a href="Bucket.html#create_file-instance_method" title="Google::Cloud::Storage::Bucket#create_file (method)">Bucket#create_file</a></span>.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>file</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>a block yielding a delegate object for updating</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Google::Cloud::Storage::File (class)">Google::Cloud::Storage::File</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1038
1039
1040
1041
1042
1043
1044
1045
1046</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 1038</span>

<span class='kw'>def</span> <span class='id identifier rubyid_copy'>copy</span> <span class='id identifier rubyid_dest_bucket_or_path'>dest_bucket_or_path</span><span class='comma'>,</span> <span class='id identifier rubyid_dest_path'>dest_path</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span>
         <span class='label'>acl:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>generation:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>encryption_key:</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_rewrite'>rewrite</span> <span class='id identifier rubyid_dest_bucket_or_path'>dest_bucket_or_path</span><span class='comma'>,</span> <span class='id identifier rubyid_dest_path'>dest_path</span><span class='comma'>,</span>
          <span class='label'>acl:</span> <span class='id identifier rubyid_acl'>acl</span><span class='comma'>,</span> <span class='label'>generation:</span> <span class='id identifier rubyid_generation'>generation</span><span class='comma'>,</span>
          <span class='label'>encryption_key:</span> <span class='id identifier rubyid_encryption_key'>encryption_key</span><span class='comma'>,</span>
          <span class='label'>new_encryption_key:</span> <span class='id identifier rubyid_encryption_key'>encryption_key</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_updater'>updater</span><span class='op'>|</span>
    <span class='kw'>yield</span> <span class='id identifier rubyid_updater'>updater</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="crc32c-instance_method">
  
    #<strong>crc32c</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The CRC32c checksum of the data, as described in
<a href="http://tools.ietf.org/html/rfc4960#appendix-B">RFC 4960, Appendix B</a>.
Encoded using base64 in big-endian byte order.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


233
234
235</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 233</span>

<span class='kw'>def</span> <span class='id identifier rubyid_crc32c'>crc32c</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_crc32c'>crc32c</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="created_at-instance_method">
  
    #<strong>created_at</strong>  &#x21d2; <tt>DateTime</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creation time of the file.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>DateTime</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


202
203
204</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 202</span>

<span class='kw'>def</span> <span class='id identifier rubyid_created_at'>created_at</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_time_created'>time_created</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete-instance_method">
  
    #<strong>delete</strong>(generation: nil)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Permanently deletes the file.</p>

<p>Raises PermissionDeniedError if the object is subject to an active
retention policy or hold. (See <span class='object_link'><a href="#retention_expires_at-instance_method" title="Google::Cloud::Storage::File#retention_expires_at (method)">#retention_expires_at</a></span>,
<span class='object_link'><a href="Bucket.html#retention_period-instance_method" title="Google::Cloud::Storage::Bucket#retention_period (method)">Bucket#retention_period</a></span>, <span class='object_link'><a href="#temporary_hold%3F-instance_method" title="Google::Cloud::Storage::File#temporary_hold? (method)">#temporary_hold?</a></span> and
<span class='object_link'><a href="#event_based_hold%3F-instance_method" title="Google::Cloud::Storage::File#event_based_hold? (method)">#event_based_hold?</a></span>.)</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>The file&#39;s generation can used by passing <code>true</code>:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='label'>generation:</span> <span class='kw'>true</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>A generation can also be specified:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='label'>generation:</span> <span class='int'>123456</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>generation</span>
      
      
        <span class='type'>(<tt>Boolean</tt>, <tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Specify a version of the file to
delete. When <code>true</code>, it will delete the version returned by
<span class='object_link'><a href="#generation-instance_method" title="Google::Cloud::Storage::File#generation (method)">#generation</a></span>. The default behavior is to delete the latest version
of the file (regardless of the version to which the file is set,
which is the version returned by <span class='object_link'><a href="#generation-instance_method" title="Google::Cloud::Storage::File#generation (method)">#generation</a></span>.)</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Returns <code>true</code> if the file was deleted.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1341
1342
1343
1344
1345
1346
1347</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 1341</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete'>delete</span> <span class='label'>generation:</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_generation'>generation</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_generation'>generation</span> <span class='kw'>if</span> <span class='id identifier rubyid_generation'>generation</span> <span class='op'>==</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>
  <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_delete_file'>delete_file</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>generation:</span> <span class='id identifier rubyid_generation'>generation</span><span class='comma'>,</span>
                                    <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="download-instance_method">
  
    #<strong>download</strong>(path = nil, verify: :md5, encryption_key: nil, range: nil, skip_decompress: nil)  &#x21d2; <tt>::File</tt>, <tt>StringIO</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Download the file&#39;s contents to a local file or an File-like object.</p>

<p>By default, the download is verified by calculating the MD5 digest.</p>

<p>If a <a href="https://cloud.google.com/storage/docs/encryption#customer-supplied">customer-supplied encryption
key</a>
was used with <span class='object_link'><a href="Bucket.html#create_file-instance_method" title="Google::Cloud::Storage::Bucket#create_file (method)">Bucket#create_file</a></span>, the <code>encryption_key</code> option must
be provided.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_download'>download</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/downloaded/file.ext</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Use the CRC32c digest by passing :crc32c.</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_download'>download</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/downloaded/file.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>verify:</span> <span class='symbol'>:crc32c</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Use the MD5 and CRC32c digests by passing :all.</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_download'>download</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/downloaded/file.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>verify:</span> <span class='symbol'>:all</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Disable the download verification by passing :none.</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_download'>download</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/downloaded/file.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>verify:</span> <span class='symbol'>:none</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Download to an in-memory StringIO object.</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_downloaded'>downloaded</span> <span class='op'>=</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_download'>download</span>
<span class='id identifier rubyid_downloaded'>downloaded</span><span class='period'>.</span><span class='id identifier rubyid_rewind'>rewind</span>
<span class='id identifier rubyid_downloaded'>downloaded</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span> <span class='comment'>#=&gt; &quot;Hello world!&quot;</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Download a public file with an unauthenticated client.</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_anonymous'><span class='object_link'><a href="../Storage.html#anonymous-class_method" title="Google::Cloud::Storage.anonymous (method)">anonymous</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>public-bucket</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>skip_lookup:</span> <span class='kw'>true</span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/public-file.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>skip_lookup:</span> <span class='kw'>true</span>

<span class='id identifier rubyid_downloaded'>downloaded</span> <span class='op'>=</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_download'>download</span>
<span class='id identifier rubyid_downloaded'>downloaded</span><span class='period'>.</span><span class='id identifier rubyid_rewind'>rewind</span>
<span class='id identifier rubyid_downloaded'>downloaded</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span> <span class='comment'>#=&gt; &quot;Hello world!&quot;</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Upload and download gzip-encoded file data.</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>zlib</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_gz'>gz</span> <span class='op'>=</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_z'>z</span> <span class='op'>=</span> <span class='const'>Zlib</span><span class='op'>::</span><span class='const'>GzipWriter</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_gz'>gz</span>
<span class='id identifier rubyid_z'>z</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello world!</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_z'>z</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
<span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_gz'>gz</span><span class='period'>.</span><span class='id identifier rubyid_string'>string</span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_create_file'>create_file</span> <span class='id identifier rubyid_data'>data</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/gzipped.txt</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                   <span class='label'>content_encoding:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>gzip</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/gzipped.txt</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># The downloaded data is decompressed by default.
</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_download'>download</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/downloaded/hello.txt</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># The downloaded data remains compressed with skip_decompress.
</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_download'>download</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/downloaded/gzipped.txt</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
              <span class='label'>skip_decompress:</span> <span class='kw'>true</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Partially download.</p>
</div></p>
      
      <pre class="example code"><code>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>
<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_downloaded'>downloaded</span> <span class='op'>=</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_download'>download</span> <span class='label'>range:</span> <span class='int'>6</span><span class='op'>..</span><span class='int'>10</span>
<span class='id identifier rubyid_downloaded'>downloaded</span><span class='period'>.</span><span class='id identifier rubyid_rewind'>rewind</span>
<span class='id identifier rubyid_downloaded'>downloaded</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span> <span class='comment'>#=&gt; &quot;world&quot;</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>path</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>::File</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The path on the local file system to
write the data to. The path provided must be writable. Can also be
an File object, or File-like object such as StringIO. If an file
object, the object will be written to, not the filesystem. If
omitted, a new StringIO instance will be written to and returned.
Optional.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>verify</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The verification algorithm used to ensure the
downloaded file contents are correct. Default is <code>:md5</code>.</p>

<p>Acceptable values are:</p>

<ul>
<li><code>md5</code> - Verify file content match using the MD5 hash.</li>
<li><code>crc32c</code> - Verify file content match using the CRC32c hash.</li>
<li><code>all</code> - Perform all available file content verification.</li>
<li><code>none</code> - Don&#39;t perform file content verification.</li>
</ul>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>encryption_key</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Optional. The customer-supplied,
AES-256 encryption key used to encrypt the file, if one was provided
to <span class='object_link'><a href="Bucket.html#create_file-instance_method" title="Google::Cloud::Storage::Bucket#create_file (method)">Bucket#create_file</a></span>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>range</span>
      
      
        <span class='type'>(<tt>Range</tt>, <tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Optional. The byte range of the file&#39;s
contents to download or a string header value. Provide this to
perform a partial download. When a range is provided, no
verification is performed regardless of the <code>verify</code> parameter&#39;s
value.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>skip_decompress</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Optional. If <code>true</code>, the data for a
Storage object returning a <code>Content-Encoding: gzip</code> response header
will <em>not</em> be automatically decompressed by this client library. The
default is <code>nil</code>. Note that all requests by this client library send
the <code>Accept-Encoding: gzip</code> header, so decompressive transcoding is
not performed in the Storage service. (See <a href="https://cloud.google.com/storage/docs/transcoding">Transcoding of
gzip-compressed files</a>)</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>::File</tt>, <tt>StringIO</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Returns a file object representing the file
data. This will ordinarily be a <code>::File</code> object referencing the
local file system. However, if the argument to <code>path</code> is <code>nil</code>, a
StringIO instance will be returned. If the argument to <code>path</code> is an
File-like object, then that object will be returned.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


931
932
933
934
935
936
937
938
939
940
941
942
943
944
945
946
947
948
949
950
951</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 931</span>

<span class='kw'>def</span> <span class='id identifier rubyid_download'>download</span> <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>verify:</span> <span class='symbol'>:md5</span><span class='comma'>,</span> <span class='label'>encryption_key:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>range:</span> <span class='kw'>nil</span><span class='comma'>,</span>
             <span class='label'>skip_decompress:</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='const'>StringIO</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
    <span class='id identifier rubyid_path'>path</span><span class='period'>.</span><span class='id identifier rubyid_set_encoding'>set_encoding</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ASCII-8BIT</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_resp'>resp</span> <span class='op'>=</span>
    <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_download_file'>download_file</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_path'>path</span><span class='comma'>,</span>
                          <span class='label'>key:</span> <span class='id identifier rubyid_encryption_key'>encryption_key</span><span class='comma'>,</span> <span class='label'>range:</span> <span class='id identifier rubyid_range'>range</span><span class='comma'>,</span>
                          <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
  <span class='comment'># FIX: downloading with encryption key will return nil
</span>  <span class='id identifier rubyid_file'>file</span> <span class='op'>||=</span> <span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_path'>path</span>
  <span class='id identifier rubyid_verify'>verify</span> <span class='op'>=</span> <span class='symbol'>:none</span> <span class='kw'>if</span> <span class='id identifier rubyid_range'>range</span>
  <span class='id identifier rubyid_verify_file!'>verify_file!</span> <span class='id identifier rubyid_file'>file</span><span class='comma'>,</span> <span class='id identifier rubyid_verify'>verify</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_skip_decompress'>skip_decompress</span> <span class='op'>&amp;&amp;</span>
     <span class='const'>Array</span><span class='lparen'>(</span><span class='id identifier rubyid_resp'>resp</span><span class='period'>.</span><span class='id identifier rubyid_header'>header</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Content-Encoding</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>gzip</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_gzip_decompress'>gzip_decompress</span> <span class='id identifier rubyid_file'>file</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_file'>file</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="encryption_key_sha256-instance_method">
  
    #<strong>encryption_key_sha256</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>An <a href="https://tools.ietf.org/html/rfc4648#section-4">RFC 4648</a>
Base64-encoded string of the SHA256 hash of the <a href="https://cloud.google.com/storage/docs/encryption#customer-supplied">customer-supplied
encryption
key</a>.
You can use this SHA256 hash to uniquely identify the AES-256
encryption key required to decrypt this file.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


394
395
396
397</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 394</span>

<span class='kw'>def</span> <span class='id identifier rubyid_encryption_key_sha256'>encryption_key_sha256</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_customer_encryption'>customer_encryption</span>
  <span class='const'>Base64</span><span class='period'>.</span><span class='id identifier rubyid_decode64'>decode64</span> <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_customer_encryption'>customer_encryption</span><span class='period'>.</span><span class='id identifier rubyid_key_sha256'>key_sha256</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="etag-instance_method">
  
    #<strong>etag</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>HTTP 1.1 Entity tag for the file.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


242
243
244</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 242</span>

<span class='kw'>def</span> <span class='id identifier rubyid_etag'>etag</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_etag'>etag</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="event_based_hold?-instance_method">
  
    #<strong>event_based_hold?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Whether there is an event-based hold on the file. An event-based
hold will be enforced on the file as long as this property is <code>true</code>,
even if the bucket-level retention policy would normally allow
deletion. Removing the event-based hold extends the retention duration
of the file to the current date plus the bucket-level policy duration.
Removing the event-based hold represents that a retention-related
event has occurred, and thus the retention clock ticks from the moment
of the event as opposed to the creation date of the object. The
default value is configured at the bucket level (which defaults to
<code>false</code>), and is assigned to newly-created objects.</p>

<p>See <span class='object_link'><a href="#set_event_based_hold!-instance_method" title="Google::Cloud::Storage::File#set_event_based_hold! (method)">#set_event_based_hold!</a></span>, <span class='object_link'><a href="#release_event_based_hold!-instance_method" title="Google::Cloud::Storage::File#release_event_based_hold! (method)">#release_event_based_hold!</a></span>,
<span class='object_link'><a href="Bucket.html#default_event_based_hold%3F-instance_method" title="Google::Cloud::Storage::Bucket#default_event_based_hold? (method)">Bucket#default_event_based_hold?</a></span> and
<span class='object_link'><a href="Bucket.html#default_event_based_hold=-instance_method" title="Google::Cloud::Storage::Bucket#default_event_based_hold= (method)">Bucket#default_event_based_hold=</a></span>.</p>

<p>If a bucket&#39;s retention policy duration is modified after the
event-based hold flag is unset, the updated retention duration applies
retroactively to objects that previously had event-based holds.  For
example:</p>

<ul>
<li>If the bucket&#39;s [unlocked] retention policy is removed, objects with
event-based holds may be deleted immediately after the hold is
removed (the duration of a nonexistent policy for the purpose of
event-based holds is considered to be zero).</li>
<li>If the bucket&#39;s [unlocked] policy is reduced, objects with
previously released event-based holds will be have their retention
expiration dates reduced accordingly.</li>
<li>If the bucket&#39;s policy is extended, objects with previously released
event-based holds will have their retention expiration dates
extended accordingly.  However, note that objects with event-based
holds released prior to the effective date of the new policy may
have already been deleted by the user.</li>
</ul>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_retention_period'>retention_period</span> <span class='op'>=</span> <span class='int'>2592000</span> <span class='comment'># 30 days in seconds
</span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_event_based_hold?'>event_based_hold?</span> <span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_set_event_based_hold!'>set_event_based_hold!</span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='comment'># raises Google::Cloud::PermissionDeniedError
</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_release_event_based_hold!'>release_event_based_hold!</span>

<span class='comment'># The end of the retention period is calculated from the time that
</span><span class='comment'># the event-based hold was released.
</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_retention_expires_at'>retention_expires_at</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Returns <code>true</code> if there is an event-based hold on
the file, otherwise <code>false</code>.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


587
588
589</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 587</span>

<span class='kw'>def</span> <span class='id identifier rubyid_event_based_hold?'>event_based_hold?</span>
  <span class='op'>!</span><span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_event_based_hold'>event_based_hold</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_event_based_hold'>event_based_hold</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="exists?-instance_method">
  
    #<strong>exists?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Determines whether the file exists in the Storage service.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1630
1631
1632
1633
1634
1635
1636
1637
1638
1639</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 1630</span>

<span class='kw'>def</span> <span class='id identifier rubyid_exists?'>exists?</span>
  <span class='comment'># Always true if we have a grpc object
</span>  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>unless</span> <span class='id identifier rubyid_lazy?'>lazy?</span>
  <span class='comment'># If we have a value, return it
</span>  <span class='kw'>return</span> <span class='ivar'>@exists</span> <span class='kw'>unless</span> <span class='ivar'>@exists</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_ensure_gapi!'>ensure_gapi!</span>
  <span class='ivar'>@exists</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>rescue</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'>NotFoundError</span>
  <span class='ivar'>@exists</span> <span class='op'>=</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="generation-instance_method">
  
    #<strong>generation</strong>  &#x21d2; <tt>Fixnum</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The content generation of this file.
Used for object versioning.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Fixnum</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


154
155
156</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 154</span>

<span class='kw'>def</span> <span class='id identifier rubyid_generation'>generation</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_generation'>generation</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="generations-instance_method">
  
    #<strong>generations</strong>  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="" title="Google::Cloud::Storage::File (class)">Google::Cloud::Storage::File</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Retrieves a list of versioned files for the current object.</p>

<p>Useful for listing archived versions of the file, restoring the live
version of the file to an older version, or deleting an archived
version. You can turn versioning on or off for a bucket at any time
with <span class='object_link'><a href="Bucket.html#versioning=-instance_method" title="Google::Cloud::Storage::Bucket#versioning= (method)">Bucket#versioning=</a></span>. Turning versioning off leaves existing file
versions in place and causes the bucket to stop accumulating new
archived object versions. (See <span class='object_link'><a href="Bucket.html#versioning%3F-instance_method" title="Google::Cloud::Storage::Bucket#versioning? (method)">Bucket#versioning?</a></span> and
<span class='object_link'><a href="#generation-instance_method" title="Google::Cloud::Storage::File#generation (method)">#generation</a></span>)</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_generation'>generation</span> <span class='comment'>#=&gt; 1234567890
</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_generations'>generations</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_versioned_file'>versioned_file</span><span class='op'>|</span>
  <span class='id identifier rubyid_versioned_file'>versioned_file</span><span class='period'>.</span><span class='id identifier rubyid_generation'>generation</span>
<span class='kw'>end</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="Google::Cloud::Storage::File (class)">Google::Cloud::Storage::File</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>(See
<span class='object_link'><a href="File/List.html" title="Google::Cloud::Storage::File::List (class)">List</a></span>)</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/object-versioning" target="_parent" title="Object Versioning">Object Versioning</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


735
736
737
738
739
740
741
742</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 735</span>

<span class='kw'>def</span> <span class='id identifier rubyid_generations'>generations</span>
  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>
  <span class='id identifier rubyid_gapi'>gapi</span> <span class='op'>=</span> <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_list_files'>list_files</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='comma'>,</span> <span class='label'>prefix:</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
                                    <span class='label'>versions:</span> <span class='kw'>true</span><span class='comma'>,</span>
                                    <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
  <span class='const'><span class='object_link'><a href="" title="Google::Cloud::Storage::File (class)">File</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="File/List.html" title="Google::Cloud::Storage::File::List (class)">List</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_gapi'>from_gapi</span> <span class='id identifier rubyid_gapi'>gapi</span><span class='comma'>,</span> <span class='id identifier rubyid_service'>service</span><span class='comma'>,</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span>
                       <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="id-instance_method">
  
    #<strong>id</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The ID of the file.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 126</span>

<span class='kw'>def</span> <span class='id identifier rubyid_id'>id</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="kind-instance_method">
  
    #<strong>kind</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The kind of item this is.
For files, this is always storage#object.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


117
118
119</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 117</span>

<span class='kw'>def</span> <span class='id identifier rubyid_kind'>kind</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_kind'>kind</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="kms_key-instance_method">
  
    #<strong>kms_key</strong>  &#x21d2; <tt>String</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The Cloud KMS encryption key that was used to protect the file, or
  <code>nil</code> if none has been configured.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A Cloud KMS encryption key, or <code>nil</code> if none has
been configured.</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/kms/docs/" target="_parent" title="Cloud Key Management Service Documentation">Cloud Key Management Service Documentation</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


409
410
411</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 409</span>

<span class='kw'>def</span> <span class='id identifier rubyid_kms_key'>kms_key</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_kms_key_name'>kms_key_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="md5-instance_method">
  
    #<strong>md5</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>MD5 hash of the data; encoded using base64.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


222
223
224</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 222</span>

<span class='kw'>def</span> <span class='id identifier rubyid_md5'>md5</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_md5_hash'>md5_hash</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="media_url-instance_method">
  
    #<strong>media_url</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>A URL that can be used to download the file using the REST API.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


184
185
186</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 184</span>

<span class='kw'>def</span> <span class='id identifier rubyid_media_url'>media_url</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_media_link'>media_link</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="metadata-instance_method">
  
    #<strong>metadata</strong>  &#x21d2; <tt>Hash(String =&gt; String)</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>A hash of custom, user-provided web-safe keys and arbitrary string
values that will returned with requests for the file as &quot;x-goog-meta-&quot;
response headers.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash(String =&gt; String)</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


365
366
367
368
369</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 365</span>

<span class='kw'>def</span> <span class='id identifier rubyid_metadata'>metadata</span>
  <span class='id identifier rubyid_m'>m</span> <span class='op'>=</span> <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_metadata'>metadata</span>
  <span class='id identifier rubyid_m'>m</span> <span class='op'>=</span> <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span> <span class='kw'>if</span> <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbol'>:to_h</span>
  <span class='id identifier rubyid_m'>m</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="metadata=-instance_method">
  
    #<strong>metadata=</strong>(metadata)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Updates the hash of custom, user-provided web-safe keys and arbitrary
string values that will returned with requests for the file as
&quot;x-goog-meta-&quot; response headers.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>metadata</span>
      
      
        <span class='type'>(<tt>Hash(String =&gt; String)</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The user-provided metadata,
in key/value pairs.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


379
380
381
382</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 379</span>

<span class='kw'>def</span> <span class='id identifier rubyid_metadata='>metadata=</span> <span class='id identifier rubyid_metadata'>metadata</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_metadata'>metadata</span> <span class='op'>=</span> <span class='id identifier rubyid_metadata'>metadata</span>
  <span class='id identifier rubyid_update_gapi!'>update_gapi!</span> <span class='symbol'>:metadata</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="metageneration-instance_method">
  
    #<strong>metageneration</strong>  &#x21d2; <tt>Fixnum</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The version of the metadata for this file at this generation.
Used for preconditions and for detecting changes in metadata.
A metageneration number is only meaningful in the context of a
particular generation of a particular file.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Fixnum</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


166
167
168</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 166</span>

<span class='kw'>def</span> <span class='id identifier rubyid_metageneration'>metageneration</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_metageneration'>metageneration</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="name-instance_method">
  
    #<strong>name</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The name of this file.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 135</span>

<span class='kw'>def</span> <span class='id identifier rubyid_name'>name</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="public_url-instance_method">
  
    #<strong>public_url</strong>(protocol: :https)  &#x21d2; <tt>String</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='url-instance_method'>url</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Public URL to access the file. If the file is not public, requests to
the URL will return an error. (See <span class='object_link'><a href="File/Acl.html#public!-instance_method" title="Google::Cloud::Storage::File::Acl#public! (method)">Google::Cloud::Storage::File::Acl#public!</a></span> and
<span class='object_link'><a href="Bucket/DefaultAcl.html#public!-instance_method" title="Google::Cloud::Storage::Bucket::DefaultAcl#public! (method)">Bucket::DefaultAcl#public!</a></span>) To share a file that is not public see
<span class='object_link'><a href="#signed_url-instance_method" title="Google::Cloud::Storage::File#signed_url (method)">#signed_url</a></span>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>avatars/heidi/400x400.png</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_public_url'>public_url</span> <span class='op'>=</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_public_url'>public_url</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Generate the URL with a protocol other than HTTPS:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>avatars/heidi/400x400.png</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_public_url'>public_url</span> <span class='op'>=</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_public_url'>public_url</span> <span class='label'>protocol:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>http</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>protocol</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The protocol to use for the URL. Default is
<code>HTTPS</code>.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/access-public-data" target="_parent" title="Accessing Public Data">Accessing Public Data</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1381
1382
1383</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 1381</span>

<span class='kw'>def</span> <span class='id identifier rubyid_public_url'>public_url</span> <span class='label'>protocol:</span> <span class='symbol'>:https</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_protocol'>protocol</span><span class='embexpr_end'>}</span><span class='tstring_content'>://storage.googleapis.com/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_bucket'>bucket</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="release_event_based_hold!-instance_method">
  
    #<strong>release_event_based_hold!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Sets the event-based hold property of the file to <code>false</code>. Removing
the event-based hold extends the retention duration of the file to the
current date plus the bucket-level policy duration. Removing the
event-based hold represents that a retention-related event has
occurred, and thus the retention clock ticks from the moment of the
event as opposed to the creation date of the object. The default value
is configured at the bucket level (which defaults to <code>false</code>), and is
assigned to newly-created objects.</p>

<p>See <span class='object_link'><a href="#event_based_hold%3F-instance_method" title="Google::Cloud::Storage::File#event_based_hold? (method)">#event_based_hold?</a></span>, <span class='object_link'><a href="#set_event_based_hold!-instance_method" title="Google::Cloud::Storage::File#set_event_based_hold! (method)">#set_event_based_hold!</a></span>,
<span class='object_link'><a href="Bucket.html#default_event_based_hold%3F-instance_method" title="Google::Cloud::Storage::Bucket#default_event_based_hold? (method)">Bucket#default_event_based_hold?</a></span> and
<span class='object_link'><a href="Bucket.html#default_event_based_hold=-instance_method" title="Google::Cloud::Storage::Bucket#default_event_based_hold= (method)">Bucket#default_event_based_hold=</a></span>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_retention_period'>retention_period</span> <span class='op'>=</span> <span class='int'>2592000</span> <span class='comment'># 30 days in seconds
</span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_event_based_hold?'>event_based_hold?</span> <span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_set_event_based_hold!'>set_event_based_hold!</span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='comment'># raises Google::Cloud::PermissionDeniedError
</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_release_event_based_hold!'>release_event_based_hold!</span>

<span class='comment'># The end of the retention period is calculated from the time that
</span><span class='comment'># the event-based hold was released.
</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_retention_expires_at'>retention_expires_at</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


678
679
680
681</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 678</span>

<span class='kw'>def</span> <span class='id identifier rubyid_release_event_based_hold!'>release_event_based_hold!</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_event_based_hold'>event_based_hold</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_update_gapi!'>update_gapi!</span> <span class='symbol'>:event_based_hold</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="release_temporary_hold!-instance_method">
  
    #<strong>release_temporary_hold!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Sets the temporary hold property of the file to <code>false</code>. This property
is used to enforce a temporary hold on a file. While it is set to
<code>true</code>, the file is protected against deletion and overwrites. Once
removed, the file&#39;s <code>retention_expires_at</code> date is not changed. The
default value is <code>false</code>.</p>

<p>See <span class='object_link'><a href="#retention_expires_at-instance_method" title="Google::Cloud::Storage::File#retention_expires_at (method)">#retention_expires_at</a></span>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_temporary_hold?'>temporary_hold?</span> <span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_set_temporary_hold!'>set_temporary_hold!</span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='comment'># raises Google::Cloud::PermissionDeniedError
</span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_release_temporary_hold!'>release_temporary_hold!</span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


526
527
528
529</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 526</span>

<span class='kw'>def</span> <span class='id identifier rubyid_release_temporary_hold!'>release_temporary_hold!</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_temporary_hold'>temporary_hold</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_update_gapi!'>update_gapi!</span> <span class='symbol'>:temporary_hold</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reload!-instance_method">
  
    #<strong>reload!</strong>(generation: nil)  &#x21d2; <tt>Object</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='refresh!-instance_method'>refresh!</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Reloads the file with current data from the Storage service.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_reload!'>reload!</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>The file&#39;s generation can used by passing <code>true</code>:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>generation:</span> <span class='int'>123456</span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_reload!'>reload!</span> <span class='label'>generation:</span> <span class='kw'>true</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>A generation can also be specified:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>generation:</span> <span class='int'>123456</span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_reload!'>reload!</span> <span class='label'>generation:</span> <span class='int'>123457</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>generation</span>
      
      
        <span class='type'>(<tt>Boolean</tt>, <tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Specify a version of the file to
reload with. When <code>true</code>, it will reload the version returned by
<span class='object_link'><a href="#generation-instance_method" title="Google::Cloud::Storage::File#generation (method)">#generation</a></span>. The default behavior is to reload with the latest
version of the file (regardless of the version to which the file is
set, which is the version returned by <span class='object_link'><a href="#generation-instance_method" title="Google::Cloud::Storage::File#generation (method)">#generation</a></span>.)</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1617
1618
1619
1620
1621
1622
1623
1624
1625</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 1617</span>

<span class='kw'>def</span> <span class='id identifier rubyid_reload!'>reload!</span> <span class='label'>generation:</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_generation'>generation</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_generation'>generation</span> <span class='kw'>if</span> <span class='id identifier rubyid_generation'>generation</span> <span class='op'>==</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>
  <span class='ivar'>@gapi</span> <span class='op'>=</span> <span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_get_file'>get_file</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>generation:</span> <span class='id identifier rubyid_generation'>generation</span><span class='comma'>,</span>
                                         <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
  <span class='comment'># If NotFound then lazy will never be unset
</span>  <span class='ivar'>@lazy</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="retention_expires_at-instance_method">
  
    #<strong>retention_expires_at</strong>  &#x21d2; <tt>DateTime</tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The retention expiration time of the file. This field is indirectly
mutable when the retention policy applicable to the object changes.
The date represents the earliest time that the object could be
deleted, assuming no temporary hold is set. (See <span class='object_link'><a href="#temporary_hold%3F-instance_method" title="Google::Cloud::Storage::File#temporary_hold? (method)">#temporary_hold?</a></span>.)
It is provided when both of the following are true:</p>

<ul>
<li>There is a retention policy on the bucket.</li>
<li>The eventBasedHold flag is unset on the object.</li>
</ul>

<p>Note that it can be provided even when <span class='object_link'><a href="#temporary_hold%3F-instance_method" title="Google::Cloud::Storage::File#temporary_hold? (method)">#temporary_hold?</a></span> is <code>true</code>
(so that the user can reason about policy without having to first
unset the temporary hold).</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>DateTime</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A DateTime representing the earliest time at
which the object can be deleted, or <code>nil</code> if there are no
restrictions on deleting the object.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


701
702
703</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 701</span>

<span class='kw'>def</span> <span class='id identifier rubyid_retention_expires_at'>retention_expires_at</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_retention_expiration_time'>retention_expiration_time</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rewrite-instance_method">
  
    #<strong>rewrite</strong>(dest_bucket_or_path, dest_path = nil, acl: nil, generation: nil, encryption_key: nil, new_encryption_key: nil, new_kms_key: nil) {|file| ... } &#x21d2; <tt><span class='object_link'><a href="" title="Google::Cloud::Storage::File (class)">Google::Cloud::Storage::File</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><a href="https://cloud.google.com/storage/docs/json_api/v1/objects/rewrite">Rewrites</a>
the file to a new location. Or the same location can be provided to
rewrite the file in place.</p>

<p>If a <a href="https://cloud.google.com/storage/docs/encryption#customer-supplied">customer-supplied encryption
key</a>
was used with <span class='object_link'><a href="Bucket.html#create_file-instance_method" title="Google::Cloud::Storage::Bucket#create_file (method)">Bucket#create_file</a></span>, the <code>encryption_key</code> option must
be provided. Unlike <span class='object_link'><a href="#copy-instance_method" title="Google::Cloud::Storage::File#copy (method)">#copy</a></span>, separate encryption keys are used to read
(encryption_key) and to write (new_encryption_key) file contents.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>The file can be rewritten to a new path in the bucket:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_rewrite'>rewrite</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/destination/file.ext</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>The file can also be rewritten to a different bucket:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_rewrite'>rewrite</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>new-destination-bucket</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
             <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/destination/file.ext</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>The file can also be rewritten by specifying a generation:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_rewrite'>rewrite</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>copy/of/previous/generation/file.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
             <span class='label'>generation:</span> <span class='int'>123456</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>The file can be modified during rewriting:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_rewrite'>rewrite</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>new-destination-bucket</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
             <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/destination/file.ext</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_metadata'>metadata</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rewritten_from</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Rewriting with a customer-supplied encryption key:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># Old key was stored securely for later use.
</span><span class='id identifier rubyid_old_key'>old_key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>y\x03\&quot;\x0E\xB6\xD3\x9B\x0E\xAB*\x19\xFAv\xDEY\xBEI...</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># Key generation shown for example purposes only. Write your own.
</span><span class='id identifier rubyid_cipher'>cipher</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>Cipher</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>aes-256-cfb</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_cipher'>cipher</span><span class='period'>.</span><span class='id identifier rubyid_encrypt'>encrypt</span>
<span class='id identifier rubyid_new_key'>new_key</span> <span class='op'>=</span> <span class='id identifier rubyid_cipher'>cipher</span><span class='period'>.</span><span class='id identifier rubyid_random_key'>random_key</span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_rewrite'>rewrite</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>new-destination-bucket</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
             <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/destination/file.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
             <span class='label'>encryption_key:</span> <span class='id identifier rubyid_old_key'>old_key</span><span class='comma'>,</span>
             <span class='label'>new_encryption_key:</span> <span class='id identifier rubyid_new_key'>new_key</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_metadata'>metadata</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rewritten_from</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Rewriting with a customer-managed Cloud KMS encryption key:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># KMS key ring must use the same location as the bucket.
</span><span class='id identifier rubyid_kms_key_name'>kms_key_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>projects/a/locations/b/keyRings/c/cryptoKeys/d</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># Old customer-supplied key was stored securely for later use.
</span><span class='id identifier rubyid_old_key'>old_key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>y\x03\&quot;\x0E\xB6\xD3\x9B\x0E\xAB*\x19\xFAv\xDEY\xBEI...</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_rewrite'>rewrite</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>new-destination-bucket</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
             <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/destination/file.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
             <span class='label'>encryption_key:</span> <span class='id identifier rubyid_old_key'>old_key</span><span class='comma'>,</span>
             <span class='label'>new_kms_key:</span> <span class='id identifier rubyid_kms_key_name'>kms_key_name</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_metadata'>metadata</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rewritten_from</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>dest_bucket_or_path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Either the bucket to rewrite the
file to, or the path to rewrite the file to in the current bucket.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>dest_path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>If a bucket was provided in the first
parameter, this contains the path to rewrite the file to in the
given bucket.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>acl</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A predefined set of access controls to apply to
new file.</p>

<p>Acceptable values are:</p>

<ul>
<li><code>auth</code>, <code>auth_read</code>, <code>authenticated</code>, <code>authenticated_read</code>,
<code>authenticatedRead</code> - File owner gets OWNER access, and
allAuthenticatedUsers get READER access.</li>
<li><code>owner_full</code>, <code>bucketOwnerFullControl</code> - File owner gets OWNER
access, and project team owners get OWNER access.</li>
<li><code>owner_read</code>, <code>bucketOwnerRead</code> - File owner gets OWNER access,
and project team owners get READER access.</li>
<li><code>private</code> - File owner gets OWNER access.</li>
<li><code>project_private</code>, <code>projectPrivate</code> - File owner gets OWNER
access, and project team members get access according to their
roles.</li>
<li><code>public</code>, <code>public_read</code>, <code>publicRead</code> - File owner gets OWNER
access, and allUsers get READER access.</li>
</ul>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>generation</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Select a specific revision of the file to
rewrite. The default is the latest version.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>encryption_key</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Optional. The customer-supplied,
AES-256 encryption key used to decrypt the file, if the existing
file is encrypted.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>new_encryption_key</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Optional. The new
customer-supplied, AES-256 encryption key with which to encrypt the
file. If not provided, the rewritten file will be encrypted using
the default server-side encryption, or the <code>new_kms_key</code> if one is
provided. Do not provide if <code>new_kms_key</code> is used.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>new_kms_key</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Optional. Resource name of the Cloud KMS
key, of the form
<code>projects/my-prj/locations/kr-loc/keyRings/my-kr/cryptoKeys/my-key</code>,
that will be used to encrypt the file. The KMS key ring must use
the same location as the bucket.The Service Account associated with
your project requires access to this encryption key. Do not provide
if <code>new_encryption_key</code> is used.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>file</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>a block yielding a delegate object for updating</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Google::Cloud::Storage::File (class)">Google::Cloud::Storage::File</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1192
1193
1194
1195
1196
1197
1198
1199
1200
1201
1202
1203
1204
1205
1206
1207
1208
1209
1210
1211
1212
1213
1214
1215
1216
1217
1218
1219</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 1192</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rewrite'>rewrite</span> <span class='id identifier rubyid_dest_bucket_or_path'>dest_bucket_or_path</span><span class='comma'>,</span> <span class='id identifier rubyid_dest_path'>dest_path</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span>
            <span class='label'>acl:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>generation:</span> <span class='kw'>nil</span><span class='comma'>,</span>
            <span class='label'>encryption_key:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>new_encryption_key:</span> <span class='kw'>nil</span><span class='comma'>,</span>
            <span class='label'>new_kms_key:</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>
  <span class='id identifier rubyid_dest_bucket'>dest_bucket</span><span class='comma'>,</span> <span class='id identifier rubyid_dest_path'>dest_path</span> <span class='op'>=</span> <span class='id identifier rubyid_fix_rewrite_args'>fix_rewrite_args</span> <span class='id identifier rubyid_dest_bucket_or_path'>dest_bucket_or_path</span><span class='comma'>,</span>
                                            <span class='id identifier rubyid_dest_path'>dest_path</span>

  <span class='id identifier rubyid_update_gapi'>update_gapi</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
    <span class='id identifier rubyid_updater'>updater</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="File/Updater.html" title="Google::Cloud::Storage::File::Updater (class)">Updater</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_gapi'>gapi</span>
    <span class='kw'>yield</span> <span class='id identifier rubyid_updater'>updater</span>
    <span class='id identifier rubyid_updater'>updater</span><span class='period'>.</span><span class='id identifier rubyid_check_for_changed_metadata!'>check_for_changed_metadata!</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_updater'>updater</span><span class='period'>.</span><span class='id identifier rubyid_updates'>updates</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span>
      <span class='id identifier rubyid_update_gapi'>update_gapi</span> <span class='op'>=</span> <span class='id identifier rubyid_gapi_from_attrs'>gapi_from_attrs</span> <span class='id identifier rubyid_updater'>updater</span><span class='period'>.</span><span class='id identifier rubyid_updates'>updates</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_new_gapi'>new_gapi</span> <span class='op'>=</span> <span class='id identifier rubyid_rewrite_gapi'>rewrite_gapi</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_update_gapi'>update_gapi</span><span class='comma'>,</span>
                          <span class='label'>new_bucket:</span> <span class='id identifier rubyid_dest_bucket'>dest_bucket</span><span class='comma'>,</span> <span class='label'>new_name:</span> <span class='id identifier rubyid_dest_path'>dest_path</span><span class='comma'>,</span>
                          <span class='label'>acl:</span> <span class='id identifier rubyid_acl'>acl</span><span class='comma'>,</span> <span class='label'>generation:</span> <span class='id identifier rubyid_generation'>generation</span><span class='comma'>,</span>
                          <span class='label'>encryption_key:</span> <span class='id identifier rubyid_encryption_key'>encryption_key</span><span class='comma'>,</span>
                          <span class='label'>new_encryption_key:</span> <span class='id identifier rubyid_new_encryption_key'>new_encryption_key</span><span class='comma'>,</span>
                          <span class='label'>new_kms_key:</span> <span class='id identifier rubyid_new_kms_key'>new_kms_key</span><span class='comma'>,</span>
                          <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>

  <span class='const'><span class='object_link'><a href="" title="Google::Cloud::Storage::File (class)">File</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_gapi'>from_gapi</span> <span class='id identifier rubyid_new_gapi'>new_gapi</span><span class='comma'>,</span> <span class='id identifier rubyid_service'>service</span><span class='comma'>,</span> <span class='label'>user_project:</span> <span class='id identifier rubyid_user_project'>user_project</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rotate-instance_method">
  
    #<strong>rotate</strong>(encryption_key: nil, new_encryption_key: nil, new_kms_key: nil)  &#x21d2; <tt><span class='object_link'><a href="" title="Google::Cloud::Storage::File (class)">Google::Cloud::Storage::File</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><a href="https://cloud.google.com/storage/docs/json_api/v1/objects/rewrite">Rewrites</a>
the file to the same <span class='object_link'><a href="#bucket-instance_method" title="Google::Cloud::Storage::File#bucket (method)">#bucket</a></span> and <span class='object_link'><a href="#name-instance_method" title="Google::Cloud::Storage::File#name (method)">#name</a></span> with a new
<a href="https://cloud.google.com/storage/docs/encryption#customer-supplied">customer-supplied encryption
key</a>.</p>

<p>If a new key is provided to this method, the new key must be used to
subsequently download or copy the file. You must securely manage your
keys and ensure that they are not lost. Also, please note that file
metadata is not encrypted, with the exception of the CRC32C checksum
and MD5 hash. The names of files and buckets are also not encrypted,
and you can read or update the metadata of an encrypted file without
providing the encryption key.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Rotating to a new customer-supplied encryption key:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>
<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># Old key was stored securely for later use.
</span><span class='id identifier rubyid_old_key'>old_key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>y\x03\&quot;\x0E\xB6\xD3\x9B\x0E\xAB*\x19\xFAv\xDEY\xBEI...</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>encryption_key:</span> <span class='id identifier rubyid_old_key'>old_key</span>

<span class='comment'># Key generation shown for example purposes only. Write your own.
</span><span class='id identifier rubyid_cipher'>cipher</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>Cipher</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>aes-256-cfb</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_cipher'>cipher</span><span class='period'>.</span><span class='id identifier rubyid_encrypt'>encrypt</span>
<span class='id identifier rubyid_new_key'>new_key</span> <span class='op'>=</span> <span class='id identifier rubyid_cipher'>cipher</span><span class='period'>.</span><span class='id identifier rubyid_random_key'>random_key</span>

<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_rotate'>rotate</span> <span class='label'>encryption_key:</span> <span class='id identifier rubyid_old_key'>old_key</span><span class='comma'>,</span> <span class='label'>new_encryption_key:</span> <span class='id identifier rubyid_new_key'>new_key</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Rotating to a customer-managed Cloud KMS encryption key:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>
<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># KMS key ring must use the same location as the bucket.
</span><span class='id identifier rubyid_kms_key_name'>kms_key_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>projects/a/locations/b/keyRings/c/cryptoKeys/d</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># Old key was stored securely for later use.
</span><span class='id identifier rubyid_old_key'>old_key</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>y\x03\&quot;\x0E\xB6\xD3\x9B\x0E\xAB*\x19\xFAv\xDEY\xBEI...</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>encryption_key:</span> <span class='id identifier rubyid_old_key'>old_key</span>

<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_rotate'>rotate</span> <span class='label'>encryption_key:</span> <span class='id identifier rubyid_old_key'>old_key</span><span class='comma'>,</span> <span class='label'>new_kms_key:</span> <span class='id identifier rubyid_kms_key_name'>kms_key_name</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>encryption_key</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Optional. The last
customer-supplied, AES-256 encryption key used to encrypt the file,
if one was used.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>new_encryption_key</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Optional. The new
customer-supplied, AES-256 encryption key with which to encrypt the
file. If not provided, the rewritten file will be encrypted using
the default server-side encryption, or the <code>new_kms_key</code> if one is
provided. Do not provide if <code>new_kms_key</code> is used.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>new_kms_key</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Optional. Resource name of the Cloud KMS
key, of the form
<code>projects/my-prj/locations/kr-loc/keyRings/my-kr/cryptoKeys/my-key</code>,
that will be used to encrypt the file. The KMS key ring must use
the same location as the bucket.The Service Account associated with
your project requires access to this encryption key. Do not provide
if <code>new_encryption_key</code> is used.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Google::Cloud::Storage::File (class)">Google::Cloud::Storage::File</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://cloud.google.com/storage/docs/encryption" target="_parent" title="https://cloud.google.com/storage/docs/encryption">https://cloud.google.com/storage/docs/encryption</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1289
1290
1291
1292
1293
1294</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 1289</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rotate'>rotate</span> <span class='label'>encryption_key:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>new_encryption_key:</span> <span class='kw'>nil</span><span class='comma'>,</span>
           <span class='label'>new_kms_key:</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_rewrite'>rewrite</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='label'>encryption_key:</span> <span class='id identifier rubyid_encryption_key'>encryption_key</span><span class='comma'>,</span>
                        <span class='label'>new_encryption_key:</span> <span class='id identifier rubyid_new_encryption_key'>new_encryption_key</span><span class='comma'>,</span>
                        <span class='label'>new_kms_key:</span> <span class='id identifier rubyid_new_kms_key'>new_kms_key</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_event_based_hold!-instance_method">
  
    #<strong>set_event_based_hold!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Sets the event-based hold property of the file to <code>true</code>. This
property enforces an event-based hold on the file as long as this
property is <code>true</code>, even if the bucket-level retention policy would
normally allow deletion. The default value is configured at the
bucket level (which defaults to <code>false</code>), and is assigned to
newly-created objects.</p>

<p>See <span class='object_link'><a href="#event_based_hold%3F-instance_method" title="Google::Cloud::Storage::File#event_based_hold? (method)">#event_based_hold?</a></span>, <span class='object_link'><a href="#release_event_based_hold!-instance_method" title="Google::Cloud::Storage::File#release_event_based_hold! (method)">#release_event_based_hold!</a></span>,
<span class='object_link'><a href="Bucket.html#default_event_based_hold%3F-instance_method" title="Google::Cloud::Storage::Bucket#default_event_based_hold? (method)">Bucket#default_event_based_hold?</a></span> and
<span class='object_link'><a href="Bucket.html#default_event_based_hold=-instance_method" title="Google::Cloud::Storage::Bucket#default_event_based_hold= (method)">Bucket#default_event_based_hold=</a></span>.</p>

<p>If a bucket&#39;s retention policy duration is modified after the
event-based hold is removed, the updated retention duration applies
retroactively to objects that previously had event-based holds.  For
example:</p>

<ul>
<li>If the bucket&#39;s [unlocked] retention policy is removed, objects with
event-based holds may be deleted immediately after the hold is
removed (the duration of a nonexistent policy for the purpose of
event-based holds is considered to be zero).</li>
<li>If the bucket&#39;s [unlocked] policy is reduced, objects with
previously released event-based holds will be have their retention
expiration dates reduced accordingly.</li>
<li>If the bucket&#39;s policy is extended, objects with previously released
event-based holds will have their retention expiration dates
extended accordingly.  However, note that objects with event-based
holds released prior to the effective date of the new policy may
have already been deleted by the user.</li>
</ul>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_retention_period'>retention_period</span> <span class='op'>=</span> <span class='int'>2592000</span> <span class='comment'># 30 days in seconds
</span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_event_based_hold?'>event_based_hold?</span> <span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_set_event_based_hold!'>set_event_based_hold!</span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='comment'># raises Google::Cloud::PermissionDeniedError
</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_release_event_based_hold!'>release_event_based_hold!</span>

<span class='comment'># The end of the retention period is calculated from the time that
</span><span class='comment'># the event-based hold was released.
</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_retention_expires_at'>retention_expires_at</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


640
641
642
643</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 640</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_event_based_hold!'>set_event_based_hold!</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_event_based_hold'>event_based_hold</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_update_gapi!'>update_gapi!</span> <span class='symbol'>:event_based_hold</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_temporary_hold!-instance_method">
  
    #<strong>set_temporary_hold!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Sets the temporary hold property of the file to <code>true</code>. This property
is used to enforce a temporary hold on a file. While it is set to
<code>true</code>, the file is protected against deletion and overwrites. Once
removed, the file&#39;s <code>retention_expires_at</code> date is not changed. The
default value is <code>false</code>.</p>

<p>See <span class='object_link'><a href="#retention_expires_at-instance_method" title="Google::Cloud::Storage::File#retention_expires_at (method)">#retention_expires_at</a></span>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_temporary_hold?'>temporary_hold?</span> <span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_set_temporary_hold!'>set_temporary_hold!</span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='comment'># raises Google::Cloud::PermissionDeniedError</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


497
498
499
500</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 497</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_temporary_hold!'>set_temporary_hold!</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_temporary_hold'>temporary_hold</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_update_gapi!'>update_gapi!</span> <span class='symbol'>:temporary_hold</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="signed_url-instance_method">
  
    #<strong>signed_url</strong>(method: nil, expires: nil, content_type: nil, content_md5: nil, headers: nil, issuer: nil, client_email: nil, signing_key: nil, private_key: nil, query: nil, version: nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Using the <code>issuer</code> and <code>signing_key</code> options:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>avatars/heidi/400x400.png</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='const'>OpenSSL</span><span class='op'>::</span><span class='const'>PKey</span><span class='op'>::</span><span class='const'>RSA</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-----BEGIN PRIVATE KEY-----\n...</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_shared_url'>shared_url</span> <span class='op'>=</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_signed_url'>signed_url</span> <span class='label'>issuer:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>service-account@gcloud.com</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                             <span class='label'>signing_key:</span> <span class='id identifier rubyid_key'>key</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Using the <code>headers</code> option:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>avatars/heidi/400x400.png</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_shared_url'>shared_url</span> <span class='op'>=</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_signed_url'>signed_url</span> <span class='label'>method:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GET</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                             <span class='label'>headers:</span> <span class='lbrace'>{</span>
                               <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-goog-acl</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>public-read</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                               <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-goog-meta-foo</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>bar,baz</span><span class='tstring_end'>&quot;</span></span>
                             <span class='rbrace'>}</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Generating a signed URL for resumable upload:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-todo-app</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>avatars/heidi/400x400.png</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>skip_lookup:</span> <span class='kw'>true</span>
<span class='id identifier rubyid_url'>url</span> <span class='op'>=</span> <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_signed_url'>signed_url</span> <span class='label'>method:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>POST</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                      <span class='label'>content_type:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>image/png</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                      <span class='label'>headers:</span> <span class='lbrace'>{</span>
                        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>x-goog-resumable</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>start</span><span class='tstring_end'>&quot;</span></span>
                      <span class='rbrace'>}</span>
<span class='comment'># Send the `x-goog-resumable:start` header and the content type
</span><span class='comment'># with the resumable upload POST request.</span></code></pre>
    
  </div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1503
1504
1505
1506
1507
1508
1509
1510
1511
1512
1513
1514
1515
1516
1517
1518
1519
1520
1521
1522
1523
1524
1525
1526
1527
1528</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 1503</span>

<span class='kw'>def</span> <span class='id identifier rubyid_signed_url'>signed_url</span> <span class='label'>method:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>expires:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>content_type:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>content_md5:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>headers:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>issuer:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>client_email:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>signing_key:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>private_key:</span> <span class='kw'>nil</span><span class='comma'>,</span>
               <span class='label'>query:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>version:</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>
  <span class='id identifier rubyid_version'>version</span> <span class='op'>||=</span> <span class='symbol'>:v2</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_version'>version</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>
  <span class='kw'>when</span> <span class='symbol'>:v2</span>
    <span class='id identifier rubyid_signer'>signer</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Google::Cloud::Storage::File (class)">File</a></span></span><span class='op'>::</span><span class='const'>SignerV2</span><span class='period'>.</span><span class='id identifier rubyid_from_file'>from_file</span> <span class='kw'>self</span>
    <span class='id identifier rubyid_signer'>signer</span><span class='period'>.</span><span class='id identifier rubyid_signed_url'>signed_url</span> <span class='label'>method:</span> <span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='label'>expires:</span> <span class='id identifier rubyid_expires'>expires</span><span class='comma'>,</span>
                      <span class='label'>headers:</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='label'>content_type:</span> <span class='id identifier rubyid_content_type'>content_type</span><span class='comma'>,</span>
                      <span class='label'>content_md5:</span> <span class='id identifier rubyid_content_md5'>content_md5</span><span class='comma'>,</span> <span class='label'>issuer:</span> <span class='id identifier rubyid_issuer'>issuer</span><span class='comma'>,</span>
                      <span class='label'>client_email:</span> <span class='id identifier rubyid_client_email'>client_email</span><span class='comma'>,</span>
                      <span class='label'>signing_key:</span> <span class='id identifier rubyid_signing_key'>signing_key</span><span class='comma'>,</span>
                      <span class='label'>private_key:</span> <span class='id identifier rubyid_private_key'>private_key</span><span class='comma'>,</span> <span class='label'>query:</span> <span class='id identifier rubyid_query'>query</span>
  <span class='kw'>when</span> <span class='symbol'>:v4</span>
    <span class='id identifier rubyid_signer'>signer</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="Google::Cloud::Storage::File (class)">File</a></span></span><span class='op'>::</span><span class='const'>SignerV4</span><span class='period'>.</span><span class='id identifier rubyid_from_file'>from_file</span> <span class='kw'>self</span>
    <span class='id identifier rubyid_signer'>signer</span><span class='period'>.</span><span class='id identifier rubyid_signed_url'>signed_url</span> <span class='label'>method:</span> <span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='label'>expires:</span> <span class='id identifier rubyid_expires'>expires</span><span class='comma'>,</span>
                      <span class='label'>headers:</span> <span class='id identifier rubyid_headers'>headers</span><span class='comma'>,</span> <span class='label'>issuer:</span> <span class='id identifier rubyid_issuer'>issuer</span><span class='comma'>,</span>
                      <span class='label'>client_email:</span> <span class='id identifier rubyid_client_email'>client_email</span><span class='comma'>,</span>
                      <span class='label'>signing_key:</span> <span class='id identifier rubyid_signing_key'>signing_key</span><span class='comma'>,</span>
                      <span class='label'>private_key:</span> <span class='id identifier rubyid_private_key'>private_key</span><span class='comma'>,</span> <span class='label'>query:</span> <span class='id identifier rubyid_query'>query</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>version &#39;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_version'>version</span><span class='embexpr_end'>}</span><span class='tstring_content'>&#39; not supported</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="size-instance_method">
  
    #<strong>size</strong>  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Content-Length of the data in bytes.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


193
194
195</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 193</span>

<span class='kw'>def</span> <span class='id identifier rubyid_size'>size</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='kw'>if</span> <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="storage_class-instance_method">
  
    #<strong>storage_class</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The file&#39;s storage class. This defines how the file is stored and
determines the SLA and the cost of storage. For more information, see
<a href="https://cloud.google.com/storage/docs/storage-classes">Storage
Classes</a> and
<a href="https://cloud.google.com/storage/docs/per-object-storage-class">Per-Object Storage
Class</a>.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


423
424
425</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 423</span>

<span class='kw'>def</span> <span class='id identifier rubyid_storage_class'>storage_class</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_storage_class'>storage_class</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="storage_class=-instance_method">
  
    #<strong>storage_class=</strong>(storage_class)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Rewrites the file with a new storage class, which determines the SLA
and the cost of storage. Accepted values include:</p>

<ul>
<li><code>:standard</code></li>
<li><code>:nearline</code></li>
<li><code>:coldline</code></li>
</ul>

<p>as well as the equivalent strings returned by <span class='object_link'><a href="#storage_class-instance_method" title="Google::Cloud::Storage::File#storage_class (method)">#storage_class</a></span> or
<span class='object_link'><a href="Bucket.html#storage_class-instance_method" title="Google::Cloud::Storage::Bucket#storage_class (method)">Bucket#storage_class</a></span>. For more information, see <a href="https://cloud.google.com/storage/docs/storage-classes">Storage
Classes</a> and
<a href="https://cloud.google.com/storage/docs/per-object-storage-class">Per-Object Storage
Class</a>.
The  default value is the default storage class for the bucket. See
<span class='object_link'><a href="Bucket.html#storage_class-instance_method" title="Google::Cloud::Storage::Bucket#storage_class (method)">Bucket#storage_class</a></span>.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>storage_class</span>
      
      
        <span class='type'>(<tt>Symbol</tt>, <tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Storage class of the file.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


445
446
447
448</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 445</span>

<span class='kw'>def</span> <span class='id identifier rubyid_storage_class='>storage_class=</span> <span class='id identifier rubyid_storage_class'>storage_class</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_storage_class'>storage_class</span> <span class='op'>=</span> <span class='id identifier rubyid_storage_class_for'>storage_class_for</span> <span class='id identifier rubyid_storage_class'>storage_class</span>
  <span class='id identifier rubyid_update_gapi!'>update_gapi!</span> <span class='symbol'>:storage_class</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="temporary_hold?-instance_method">
  
    #<strong>temporary_hold?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Whether there is a temporary hold on the file. A temporary hold will
be enforced on the file as long as this property is <code>true</code>, even if
the bucket-level retention policy would normally allow deletion. When
the temporary hold is removed, the normal bucket-level policy rules
once again apply. The default value is <code>false</code>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_temporary_hold?'>temporary_hold?</span> <span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_set_temporary_hold!'>set_temporary_hold!</span>
<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span> <span class='comment'># raises Google::Cloud::PermissionDeniedError</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Returns <code>true</code> if there is a temporary hold on the
file, otherwise <code>false</code>.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


472
473
474</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 472</span>

<span class='kw'>def</span> <span class='id identifier rubyid_temporary_hold?'>temporary_hold?</span>
  <span class='op'>!</span><span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_temporary_hold'>temporary_hold</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_temporary_hold'>temporary_hold</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update-instance_method">
  
    #<strong>update</strong> {|file| ... } &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Updates the file with changes made in the given block in a single
PATCH request. The following attributes may be set: <span class='object_link'><a href="#cache_control=-instance_method" title="Google::Cloud::Storage::File#cache_control= (method)">#cache_control=</a></span>,
<span class='object_link'><a href="#content_disposition=-instance_method" title="Google::Cloud::Storage::File#content_disposition= (method)">#content_disposition=</a></span>, <span class='object_link'><a href="#content_encoding=-instance_method" title="Google::Cloud::Storage::File#content_encoding= (method)">#content_encoding=</a></span>, <span class='object_link'><a href="#content_language=-instance_method" title="Google::Cloud::Storage::File#content_language= (method)">#content_language=</a></span>,
<span class='object_link'><a href="#content_type=-instance_method" title="Google::Cloud::Storage::File#content_type= (method)">#content_type=</a></span>, and <span class='object_link'><a href="#metadata=-instance_method" title="Google::Cloud::Storage::File#metadata= (method)">#metadata=</a></span>. The <span class='object_link'><a href="#metadata-instance_method" title="Google::Cloud::Storage::File#metadata (method)">#metadata</a></span> hash accessible in
the block is completely mutable and will be included in the request.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/storage</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_storage'>storage</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Storage.html" title="Google::Cloud::Storage (module)">Storage</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Storage.html#new-class_method" title="Google::Cloud::Storage.new (method)">new</a></span></span>

<span class='id identifier rubyid_bucket'>bucket</span> <span class='op'>=</span> <span class='id identifier rubyid_storage'>storage</span><span class='period'>.</span><span class='id identifier rubyid_bucket'>bucket</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-bucket</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span> <span class='op'>=</span> <span class='id identifier rubyid_bucket'>bucket</span><span class='period'>.</span><span class='id identifier rubyid_file'>file</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/my-file.ext</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_cache_control'>cache_control</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>private, max-age=0, no-cache</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_content_disposition'>content_disposition</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>inline; filename=filename.ext</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_content_encoding'>content_encoding</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>deflate</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_content_language'>content_language</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>de</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_content_type'>content_type</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>application/json</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_metadata'>metadata</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>player</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Bob</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_metadata'>metadata</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>score</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>10</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></code></pre>
    
  </div>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>file</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>a block yielding a delegate object for updating the file</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


772
773
774
775
776
777</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 772</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update'>update</span>
  <span class='id identifier rubyid_updater'>updater</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="File/Updater.html" title="Google::Cloud::Storage::File::Updater (class)">Updater</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_gapi'>gapi</span>
  <span class='kw'>yield</span> <span class='id identifier rubyid_updater'>updater</span>
  <span class='id identifier rubyid_updater'>updater</span><span class='period'>.</span><span class='id identifier rubyid_check_for_changed_metadata!'>check_for_changed_metadata!</span>
  <span class='id identifier rubyid_update_gapi!'>update_gapi!</span> <span class='id identifier rubyid_updater'>updater</span><span class='period'>.</span><span class='id identifier rubyid_updates'>updates</span> <span class='kw'>unless</span> <span class='id identifier rubyid_updater'>updater</span><span class='period'>.</span><span class='id identifier rubyid_updates'>updates</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="updated_at-instance_method">
  
    #<strong>updated_at</strong>  &#x21d2; <tt>DateTime</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The creation or modification time of the file.
For buckets with versioning enabled, changing an object&#39;s
metadata does not change this property.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>DateTime</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


213
214
215</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/storage/file.rb', line 213</span>

<span class='kw'>def</span> <span class='id identifier rubyid_updated_at'>updated_at</span>
  <span class='ivar'>@gapi</span><span class='period'>.</span><span class='id identifier rubyid_updated'>updated</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

  <div id="footer">
  <ul class="footer-links">
    <li>
      <a href="https://github.com/GoogleCloudPlatform/google-cloud-ruby" title="Google Cloud on Github">
        <img src="/google-cloud-ruby/img/icon-link-github.svg" alt="GitHub icon"> GitHub
      </a>
    </li>
    <li>
      <a href="https://github.com/GoogleCloudPlatform/google-cloud-ruby/issues" title="Google Cloud issues on Github">
        <img src="/google-cloud-ruby/img/icon-link-github.svg" alt="GitHub icon"> Issues
      </a>
    </li>
    <li>
      <a href="http://stackoverflow.com/questions/tagged/google-cloud-ruby" title="Google Cloud on StackOverflow">
      <img src="/google-cloud-ruby/img/icon-link-stackoverflow.svg" alt="StackOverflow icon"> StackOverflow
    </a>
    </li>
    <li>
      <a href="http://rubygems.org/gems/google-cloud" title="Google Cloud on RubyGems">
        <img src="/google-cloud-ruby/img/icon-link-package-manager.svg" alt="RubyGems icon"> RubyGems
      </a>
    </li>
  </ul>

  <p>
    Documentation generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>.
  </p>
</div>

</div>
