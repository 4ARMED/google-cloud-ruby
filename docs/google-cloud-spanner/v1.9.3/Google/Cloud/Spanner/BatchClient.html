---
layout: yard_main
title: "Class: Google::Cloud::Spanner::BatchClient - Google"
css: 
  - /docs/css/style.css
  - /docs/css/common.css
  - /css/yard-main.css
js: 
  - /docs/js/app.js
  - /js/yard-main.js
---
<script type="text/javascript" charset="utf-8">
  pathId = "Google::Cloud::Spanner::BatchClient";
  relpath = '../../../';
</script>


<div class="nav_wrap">
  <iframe id="nav" src="../../../class_list.html?1"></iframe>
  <div id="resizer"></div>
</div>

<div id="main" tabindex="-1">
  <div id="header">
    <div id="menu">
  
    <a href="../../../_index.html">Index (B)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span>
     &raquo; 
    <span class="title">BatchClient</span>
  
</div>

    <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
    <div class="clear"></div>
  </div>

  <div id="content"><h1>Class: Google::Cloud::Spanner::BatchClient
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Google::Cloud::Spanner::BatchClient</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/google/cloud/spanner/batch_client.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <h1>BatchClient</h1>

<p>Provides a batch client that can be used to read data from a Cloud
Spanner database. An instance of this class is tied to a specific
database.</p>

<p>BatchClient is useful when one wants to read or query a large amount of
data from Cloud Spanner across multiple processes, even across different
machines. It allows to create partitions of Cloud Spanner database and
then read or query over each partition independently yet at the same
snapshot.</p>

<p>See <span class='object_link'><a href="Project.html#batch_client-instance_method" title="Google::Cloud::Spanner::Project#batch_client (method)">Project#batch_client</a></span>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner'>spanner</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Spanner.html#new-class_method" title="Google::Cloud::Spanner.new (method)">new</a></span></span>

<span class='id identifier rubyid_batch_client'>batch_client</span> <span class='op'>=</span> <span class='id identifier rubyid_spanner'>spanner</span><span class='period'>.</span><span class='id identifier rubyid_batch_client'>batch_client</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-instance</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-database</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_batch_snapshot'>batch_snapshot</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_client'>batch_client</span><span class='period'>.</span><span class='id identifier rubyid_batch_snapshot'>batch_snapshot</span>

<span class='id identifier rubyid_partitions'>partitions</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_snapshot'>batch_snapshot</span><span class='period'>.</span><span class='id identifier rubyid_partition_read'>partition_read</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>users</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:id</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='rbracket'>]</span>

<span class='id identifier rubyid_partition'>partition</span> <span class='op'>=</span> <span class='id identifier rubyid_partitions'>partitions</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>

<span class='id identifier rubyid_serialized_snapshot'>serialized_snapshot</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_snapshot'>batch_snapshot</span><span class='period'>.</span><span class='id identifier rubyid_dump'>dump</span>
<span class='id identifier rubyid_serialized_partition'>serialized_partition</span> <span class='op'>=</span> <span class='id identifier rubyid_partition'>partition</span><span class='period'>.</span><span class='id identifier rubyid_dump'>dump</span>

<span class='comment'># In a separate process
</span><span class='id identifier rubyid_new_batch_snapshot'>new_batch_snapshot</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_client'>batch_client</span><span class='period'>.</span><span class='id identifier rubyid_load_batch_snapshot'>load_batch_snapshot</span> \
  <span class='id identifier rubyid_serialized_snapshot'>serialized_snapshot</span>

<span class='id identifier rubyid_new_partition'>new_partition</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_client'>batch_client</span><span class='period'>.</span><span class='id identifier rubyid_load_partition'>load_partition</span> \
  <span class='id identifier rubyid_serialized_partition'>serialized_partition</span>

<span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='id identifier rubyid_new_batch_snapshot'>new_batch_snapshot</span><span class='period'>.</span><span class='id identifier rubyid_execute_partition'>execute_partition</span> \
  <span class='id identifier rubyid_new_partition'>new_partition</span></code></pre>
    
  </div>


</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#batch_snapshot-instance_method" title="#batch_snapshot (instance method)">#<strong>batch_snapshot</strong>(strong: nil, timestamp: nil, read_timestamp: nil, staleness: nil, exact_staleness: nil) {|snapshot| ... } &#x21d2; Google::Cloud::Spanner::BatchSnapshot </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns a <span class='object_link'><a href="BatchSnapshot.html" title="Google::Cloud::Spanner::BatchSnapshot (class)">BatchSnapshot</a></span> context in which multiple reads and/or queries can be performed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#database-instance_method" title="#database (instance method)">#<strong>database</strong>  &#x21d2; Database </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The Spanner database connected to.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#database_id-instance_method" title="#database_id (instance method)">#<strong>database_id</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The unique identifier for the database.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fields-instance_method" title="#fields (instance method)">#<strong>fields</strong>(types)  &#x21d2; Fields </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a configuration object (<span class='object_link'><a href="Fields.html" title="Google::Cloud::Spanner::Fields (class)">Fields</a></span>) that may be provided to queries or used to create STRUCT objects.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#instance-instance_method" title="#instance (instance method)">#<strong>instance</strong>  &#x21d2; Instance </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The Spanner instance connected to.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#instance_id-instance_method" title="#instance_id (instance method)">#<strong>instance_id</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The unique identifier for the instance.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_batch_snapshot-instance_method" title="#load_batch_snapshot (instance method)">#<strong>load_batch_snapshot</strong>(serialized_snapshot)  &#x21d2; Google::Cloud::Spanner::BatchSnapshot </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns a <span class='object_link'><a href="BatchSnapshot.html" title="Google::Cloud::Spanner::BatchSnapshot (class)">BatchSnapshot</a></span> context in which multiple reads and/or queries can be performed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_partition-instance_method" title="#load_partition (instance method)">#<strong>load_partition</strong>(serialized_partition)  &#x21d2; Google::Cloud::Spanner::Partition </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns a <span class='object_link'><a href="Partition.html" title="Google::Cloud::Spanner::Partition (class)">Partition</a></span> from a serialized representation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#project-instance_method" title="#project (instance method)">#<strong>project</strong>  &#x21d2; Project </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The Spanner project connected to.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#project_id-instance_method" title="#project_id (instance method)">#<strong>project_id</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The unique identifier for the project.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#range-instance_method" title="#range (instance method)">#<strong>range</strong>(beginning, ending, exclude_begin: false, exclude_end: false)  &#x21d2; Google::Cloud::Spanner::Range </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a Spanner Range.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="batch_snapshot-instance_method">
  
    #<strong>batch_snapshot</strong>(strong: nil, timestamp: nil, read_timestamp: nil, staleness: nil, exact_staleness: nil) {|snapshot| ... } &#x21d2; <tt><span class='object_link'><a href="BatchSnapshot.html" title="Google::Cloud::Spanner::BatchSnapshot (class)">Google::Cloud::Spanner::BatchSnapshot</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a <span class='object_link'><a href="BatchSnapshot.html" title="Google::Cloud::Spanner::BatchSnapshot (class)">Google::Cloud::Spanner::BatchSnapshot</a></span> context in which multiple reads and/or
queries can be performed. All reads/queries will use the same
timestamp, and the timestamp can be inspected after this transaction
is created successfully. This is a blocking method since it waits to
finish the RPCs.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner'>spanner</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Spanner.html#new-class_method" title="Google::Cloud::Spanner.new (method)">new</a></span></span>

<span class='id identifier rubyid_batch_client'>batch_client</span> <span class='op'>=</span> <span class='id identifier rubyid_spanner'>spanner</span><span class='period'>.</span><span class='id identifier rubyid_batch_client'>batch_client</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-instance</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-database</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_batch_snapshot'>batch_snapshot</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_client'>batch_client</span><span class='period'>.</span><span class='id identifier rubyid_batch_snapshot'>batch_snapshot</span>

<span class='id identifier rubyid_partitions'>partitions</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_snapshot'>batch_snapshot</span><span class='period'>.</span><span class='id identifier rubyid_partition_read'>partition_read</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>users</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:id</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='rbracket'>]</span>

<span class='id identifier rubyid_partition'>partition</span> <span class='op'>=</span> <span class='id identifier rubyid_partitions'>partitions</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>

<span class='id identifier rubyid_serialized_snapshot'>serialized_snapshot</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_snapshot'>batch_snapshot</span><span class='period'>.</span><span class='id identifier rubyid_dump'>dump</span>
<span class='id identifier rubyid_serialized_partition'>serialized_partition</span> <span class='op'>=</span> <span class='id identifier rubyid_partition'>partition</span><span class='period'>.</span><span class='id identifier rubyid_dump'>dump</span>

<span class='comment'># In a separate process
</span><span class='id identifier rubyid_new_batch_snapshot'>new_batch_snapshot</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_client'>batch_client</span><span class='period'>.</span><span class='id identifier rubyid_load_batch_snapshot'>load_batch_snapshot</span> \
  <span class='id identifier rubyid_serialized_snapshot'>serialized_snapshot</span>

<span class='id identifier rubyid_new_partition'>new_partition</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_client'>batch_client</span><span class='period'>.</span><span class='id identifier rubyid_load_partition'>load_partition</span> \
  <span class='id identifier rubyid_serialized_partition'>serialized_partition</span>

<span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='id identifier rubyid_new_batch_snapshot'>new_batch_snapshot</span><span class='period'>.</span><span class='id identifier rubyid_execute_partition'>execute_partition</span> \
  <span class='id identifier rubyid_new_partition'>new_partition</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>strong</span>
      
      
        <span class='type'>(<tt>true</tt>, <tt>false</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Read at a timestamp where all previously
committed transactions are visible.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>timestamp</span>
      
      
        <span class='type'>(<tt>Time</tt>, <tt>DateTime</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Executes all reads at the given
timestamp. Unlike other modes, reads at a specific timestamp are
repeatable; the same read at the same timestamp always returns the
same data. If the timestamp is in the future, the read will block
until the specified timestamp, modulo the read&#39;s deadline.</p>

<p>Useful for large scale consistent reads such as mapreduces, or for
coordinating many reads against a consistent snapshot of the data.
(See
<a href="https://cloud.google.com/spanner/docs/reference/rpc/google.spanner.v1#transactionoptions">TransactionOptions</a>.)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>read_timestamp</span>
      
      
        <span class='type'>(<tt>Time</tt>, <tt>DateTime</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Same as <code>timestamp</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>staleness</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Executes all reads at a timestamp that is
<code>staleness</code> seconds old. For example, the number 10.1 is translated
to 10 seconds and 100 milliseconds.</p>

<p>Guarantees that all writes that have committed more than the
specified number of seconds ago are visible. Because Cloud Spanner
chooses the exact timestamp, this mode works even if the client&#39;s
local clock is substantially skewed from Cloud Spanner commit
timestamps.</p>

<p>Useful for reading at nearby replicas without the distributed
timestamp negotiation overhead of single-use <code>staleness</code>. (See
<a href="https://cloud.google.com/spanner/docs/reference/rpc/google.spanner.v1#transactionoptions">TransactionOptions</a>.)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>exact_staleness</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Same as <code>staleness</code>.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>snapshot</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The block for reading and writing data.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>snapshot</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Snapshot.html" title="Google::Cloud::Spanner::Snapshot (class)">Google::Cloud::Spanner::Snapshot</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The Snapshot
object.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="BatchSnapshot.html" title="Google::Cloud::Spanner::BatchSnapshot (class)">Google::Cloud::Spanner::BatchSnapshot</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


178
179
180
181
182
183
184
185
186
187
188
189
190
191
192</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/batch_client.rb', line 178</span>

<span class='kw'>def</span> <span class='id identifier rubyid_batch_snapshot'>batch_snapshot</span> <span class='label'>strong:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>timestamp:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>read_timestamp:</span> <span class='kw'>nil</span><span class='comma'>,</span>
                   <span class='label'>staleness:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>exact_staleness:</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_validate_snapshot_args!'>validate_snapshot_args!</span> <span class='label'>strong:</span> <span class='id identifier rubyid_strong'>strong</span><span class='comma'>,</span> <span class='label'>timestamp:</span> <span class='id identifier rubyid_timestamp'>timestamp</span><span class='comma'>,</span>
                          <span class='label'>read_timestamp:</span> <span class='id identifier rubyid_read_timestamp'>read_timestamp</span><span class='comma'>,</span>
                          <span class='label'>staleness:</span> <span class='id identifier rubyid_staleness'>staleness</span><span class='comma'>,</span>
                          <span class='label'>exact_staleness:</span> <span class='id identifier rubyid_exact_staleness'>exact_staleness</span>

  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>
  <span class='id identifier rubyid_snp_session'>snp_session</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span>
  <span class='id identifier rubyid_snp_grpc'>snp_grpc</span> <span class='op'>=</span> <span class='ivar'>@project</span><span class='period'>.</span><span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_create_snapshot'>create_snapshot</span> \
    <span class='id identifier rubyid_snp_session'>snp_session</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='label'>strong:</span> <span class='id identifier rubyid_strong'>strong</span><span class='comma'>,</span>
                      <span class='label'>timestamp:</span> <span class='lparen'>(</span><span class='id identifier rubyid_timestamp'>timestamp</span> <span class='op'>||</span> <span class='id identifier rubyid_read_timestamp'>read_timestamp</span><span class='rparen'>)</span><span class='comma'>,</span>
                      <span class='label'>staleness:</span> <span class='lparen'>(</span><span class='id identifier rubyid_staleness'>staleness</span> <span class='op'>||</span> <span class='id identifier rubyid_exact_staleness'>exact_staleness</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="BatchSnapshot.html" title="Google::Cloud::Spanner::BatchSnapshot (class)">BatchSnapshot</a></span></span><span class='period'>.</span><span class='id identifier rubyid_from_grpc'>from_grpc</span> <span class='id identifier rubyid_snp_grpc'>snp_grpc</span><span class='comma'>,</span> <span class='id identifier rubyid_snp_session'>snp_session</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="database-instance_method">
  
    #<strong>database</strong>  &#x21d2; <tt><span class='object_link'><a href="Database.html" title="Google::Cloud::Spanner::Database (class)">Database</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The Spanner database connected to.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Database.html" title="Google::Cloud::Spanner::Database (class)">Database</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


107
108
109</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/batch_client.rb', line 107</span>

<span class='kw'>def</span> <span class='id identifier rubyid_database'>database</span>
  <span class='ivar'>@project</span><span class='period'>.</span><span class='id identifier rubyid_database'>database</span> <span class='id identifier rubyid_instance_id'>instance_id</span><span class='comma'>,</span> <span class='id identifier rubyid_database_id'>database_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="database_id-instance_method">
  
    #<strong>database_id</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The unique identifier for the database.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/batch_client.rb', line 89</span>

<span class='kw'>def</span> <span class='id identifier rubyid_database_id'>database_id</span>
  <span class='ivar'>@database_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fields-instance_method">
  
    #<strong>fields</strong>(types)  &#x21d2; <tt><span class='object_link'><a href="Fields.html" title="Google::Cloud::Spanner::Fields (class)">Fields</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a configuration object (<span class='object_link'><a href="Fields.html" title="Google::Cloud::Spanner::Fields (class)">Fields</a></span>) that may be provided to
queries or used to create STRUCT objects. (The STRUCT will be
represented by the <span class='object_link'><a href="Data.html" title="Google::Cloud::Spanner::Data (class)">Data</a></span> class.) See <span class='object_link'><a href="Client.html#execute-instance_method" title="Google::Cloud::Spanner::Client#execute (method)">Client#execute</a></span> and/or
<span class='object_link'><a href="Fields.html#struct-instance_method" title="Google::Cloud::Spanner::Fields#struct (method)">Fields#struct</a></span>.</p>

<p>For more information, see <a href="https://cloud.google.com/spanner/docs/data-types#constructing-a-struct">Data Types - Constructing a
STRUCT</a>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Create a STRUCT value with named fields using Fields object:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner'>spanner</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Spanner.html#new-class_method" title="Google::Cloud::Spanner.new (method)">new</a></span></span>

<span class='id identifier rubyid_batch_client'>batch_client</span> <span class='op'>=</span> <span class='id identifier rubyid_spanner'>spanner</span><span class='period'>.</span><span class='id identifier rubyid_batch_client'>batch_client</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-instance</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-database</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_named_type'>named_type</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_client'>batch_client</span><span class='period'>.</span><span class='id identifier rubyid_fields'>fields</span><span class='lparen'>(</span>
  <span class='lbrace'>{</span> <span class='label'>id:</span> <span class='symbol'>:INT64</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='symbol'>:STRING</span><span class='comma'>,</span> <span class='label'>active:</span> <span class='symbol'>:BOOL</span> <span class='rbrace'>}</span>
<span class='rparen'>)</span>
<span class='id identifier rubyid_named_data'>named_data</span> <span class='op'>=</span> <span class='id identifier rubyid_named_type'>named_type</span><span class='period'>.</span><span class='id identifier rubyid_struct'>struct</span><span class='lparen'>(</span>
  <span class='lbrace'>{</span> <span class='label'>id:</span> <span class='int'>42</span><span class='comma'>,</span> <span class='label'>name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>active:</span> <span class='kw'>false</span> <span class='rbrace'>}</span>
<span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Create a STRUCT value with anonymous field names:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner'>spanner</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Spanner.html#new-class_method" title="Google::Cloud::Spanner.new (method)">new</a></span></span>

<span class='id identifier rubyid_batch_client'>batch_client</span> <span class='op'>=</span> <span class='id identifier rubyid_spanner'>spanner</span><span class='period'>.</span><span class='id identifier rubyid_batch_client'>batch_client</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-instance</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-database</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_anon_type'>anon_type</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_client'>batch_client</span><span class='period'>.</span><span class='id identifier rubyid_fields'>fields</span> <span class='lbracket'>[</span><span class='symbol'>:INT64</span><span class='comma'>,</span> <span class='symbol'>:STRING</span><span class='comma'>,</span> <span class='symbol'>:BOOL</span><span class='rbracket'>]</span>
<span class='id identifier rubyid_anon_data'>anon_data</span> <span class='op'>=</span> <span class='id identifier rubyid_anon_type'>anon_type</span><span class='period'>.</span><span class='id identifier rubyid_struct'>struct</span> <span class='lbracket'>[</span><span class='int'>42</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rbracket'>]</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Create a STRUCT value with duplicate field names:</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner'>spanner</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Spanner.html#new-class_method" title="Google::Cloud::Spanner.new (method)">new</a></span></span>

<span class='id identifier rubyid_batch_client'>batch_client</span> <span class='op'>=</span> <span class='id identifier rubyid_spanner'>spanner</span><span class='period'>.</span><span class='id identifier rubyid_batch_client'>batch_client</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-instance</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-database</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_dup_type'>dup_type</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_client'>batch_client</span><span class='period'>.</span><span class='id identifier rubyid_fields'>fields</span><span class='lparen'>(</span>
  <span class='lbracket'>[</span><span class='lbracket'>[</span><span class='symbol'>:x</span><span class='comma'>,</span> <span class='symbol'>:INT64</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:x</span><span class='comma'>,</span> <span class='symbol'>:STRING</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:x</span><span class='comma'>,</span> <span class='symbol'>:BOOL</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
<span class='rparen'>)</span>
<span class='id identifier rubyid_dup_data'>dup_data</span> <span class='op'>=</span> <span class='id identifier rubyid_dup_type'>dup_type</span><span class='period'>.</span><span class='id identifier rubyid_struct'>struct</span> <span class='lbracket'>[</span><span class='int'>42</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rbracket'>]</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>types</span>
      
      
        <span class='type'>(<tt>Array</tt>, <tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Accepts an array or hash types.</p>

<p>Arrays can contain just the type value, or a sub-array of the
field&#39;s name and type value. Hash keys must contain the field name
as a <code>Symbol</code> or <code>String</code>, or the field position as an <code>Integer</code>.
Hash values must contain the type value. If a Hash is used the
fields will be created using the same order as the Hash keys.</p>

<p>Supported type values incude:</p>

<ul>
<li><code>:BOOL</code></li>
<li><code>:BYTES</code></li>
<li><code>:DATE</code></li>
<li><code>:FLOAT64</code></li>
<li><code>:INT64</code></li>
<li><code>:STRING</code></li>
<li><code>:TIMESTAMP</code></li>
<li><code>Array</code> - Lists are specified by providing the type code in an
array. For example, an array of integers are specified as
<code>[:INT64]</code>.</li>
<li><span class='object_link'><a href="Fields.html" title="Google::Cloud::Spanner::Fields (class)">Fields</a></span> - Nested Structs are specified by providing a Fields
object.</li>
</ul>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Fields.html" title="Google::Cloud::Spanner::Fields (class)">Fields</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The fields of the given types.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


346
347
348</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/batch_client.rb', line 346</span>

<span class='kw'>def</span> <span class='id identifier rubyid_fields'>fields</span> <span class='id identifier rubyid_types'>types</span>
  <span class='const'><span class='object_link'><a href="Fields.html" title="Google::Cloud::Spanner::Fields (class)">Fields</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='id identifier rubyid_types'>types</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="instance-instance_method">
  
    #<strong>instance</strong>  &#x21d2; <tt><span class='object_link'><a href="Instance.html" title="Google::Cloud::Spanner::Instance (class)">Instance</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The Spanner instance connected to.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Instance.html" title="Google::Cloud::Spanner::Instance (class)">Instance</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


101
102
103</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/batch_client.rb', line 101</span>

<span class='kw'>def</span> <span class='id identifier rubyid_instance'>instance</span>
  <span class='ivar'>@project</span><span class='period'>.</span><span class='id identifier rubyid_instance'>instance</span> <span class='id identifier rubyid_instance_id'>instance_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="instance_id-instance_method">
  
    #<strong>instance_id</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The unique identifier for the instance.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


83
84
85</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/batch_client.rb', line 83</span>

<span class='kw'>def</span> <span class='id identifier rubyid_instance_id'>instance_id</span>
  <span class='ivar'>@instance_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_batch_snapshot-instance_method">
  
    #<strong>load_batch_snapshot</strong>(serialized_snapshot)  &#x21d2; <tt><span class='object_link'><a href="BatchSnapshot.html" title="Google::Cloud::Spanner::BatchSnapshot (class)">Google::Cloud::Spanner::BatchSnapshot</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a <span class='object_link'><a href="BatchSnapshot.html" title="Google::Cloud::Spanner::BatchSnapshot (class)">Google::Cloud::Spanner::BatchSnapshot</a></span> context in which multiple reads and/or
queries can be performed. All reads/queries will use the same
timestamp, and the timestamp can be inspected after this transaction
is created successfully. This method does not perform an RPC.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner'>spanner</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Spanner.html#new-class_method" title="Google::Cloud::Spanner.new (method)">new</a></span></span>

<span class='id identifier rubyid_batch_client'>batch_client</span> <span class='op'>=</span> <span class='id identifier rubyid_spanner'>spanner</span><span class='period'>.</span><span class='id identifier rubyid_batch_client'>batch_client</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-instance</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-database</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_batch_snapshot'>batch_snapshot</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_client'>batch_client</span><span class='period'>.</span><span class='id identifier rubyid_batch_snapshot'>batch_snapshot</span>

<span class='id identifier rubyid_partitions'>partitions</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_snapshot'>batch_snapshot</span><span class='period'>.</span><span class='id identifier rubyid_partition_read'>partition_read</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>users</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:id</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='rbracket'>]</span>

<span class='id identifier rubyid_partition'>partition</span> <span class='op'>=</span> <span class='id identifier rubyid_partitions'>partitions</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>

<span class='id identifier rubyid_serialized_snapshot'>serialized_snapshot</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_snapshot'>batch_snapshot</span><span class='period'>.</span><span class='id identifier rubyid_dump'>dump</span>
<span class='id identifier rubyid_serialized_partition'>serialized_partition</span> <span class='op'>=</span> <span class='id identifier rubyid_partition'>partition</span><span class='period'>.</span><span class='id identifier rubyid_dump'>dump</span>

<span class='comment'># In a separate process
</span><span class='id identifier rubyid_new_batch_snapshot'>new_batch_snapshot</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_client'>batch_client</span><span class='period'>.</span><span class='id identifier rubyid_load_batch_snapshot'>load_batch_snapshot</span> \
  <span class='id identifier rubyid_serialized_snapshot'>serialized_snapshot</span>

<span class='id identifier rubyid_new_partition'>new_partition</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_client'>batch_client</span><span class='period'>.</span><span class='id identifier rubyid_load_partition'>load_partition</span> \
  <span class='id identifier rubyid_serialized_partition'>serialized_partition</span>

<span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='id identifier rubyid_new_batch_snapshot'>new_batch_snapshot</span><span class='period'>.</span><span class='id identifier rubyid_execute_partition'>execute_partition</span> \
  <span class='id identifier rubyid_new_partition'>new_partition</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>serialized_snapshot</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The serialized representation of
an existing batch snapshot. See <span class='object_link'><a href="BatchSnapshot.html#dump-instance_method" title="Google::Cloud::Spanner::BatchSnapshot#dump (method)">Google::Cloud::Spanner::BatchSnapshot#dump</a></span>.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="BatchSnapshot.html" title="Google::Cloud::Spanner::BatchSnapshot (class)">Google::Cloud::Spanner::BatchSnapshot</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


231
232
233
234
235</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/batch_client.rb', line 231</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_batch_snapshot'>load_batch_snapshot</span> <span class='id identifier rubyid_serialized_snapshot'>serialized_snapshot</span>
  <span class='id identifier rubyid_ensure_service!'>ensure_service!</span>

  <span class='const'><span class='object_link'><a href="BatchSnapshot.html" title="Google::Cloud::Spanner::BatchSnapshot (class)">BatchSnapshot</a></span></span><span class='period'>.</span><span class='id identifier rubyid_load'>load</span> <span class='id identifier rubyid_serialized_snapshot'>serialized_snapshot</span><span class='comma'>,</span> <span class='label'>service:</span> <span class='ivar'>@project</span><span class='period'>.</span><span class='id identifier rubyid_service'>service</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_partition-instance_method">
  
    #<strong>load_partition</strong>(serialized_partition)  &#x21d2; <tt><span class='object_link'><a href="Partition.html" title="Google::Cloud::Spanner::Partition (class)">Google::Cloud::Spanner::Partition</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a <span class='object_link'><a href="Partition.html" title="Google::Cloud::Spanner::Partition (class)">Partition</a></span> from a serialized representation. See
<span class='object_link'><a href="Partition.html#load-class_method" title="Google::Cloud::Spanner::Partition.load (method)">Partition.load</a></span>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner'>spanner</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Spanner.html#new-class_method" title="Google::Cloud::Spanner.new (method)">new</a></span></span>

<span class='id identifier rubyid_batch_client'>batch_client</span> <span class='op'>=</span> <span class='id identifier rubyid_spanner'>spanner</span><span class='period'>.</span><span class='id identifier rubyid_batch_client'>batch_client</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-instance</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-database</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_batch_snapshot'>batch_snapshot</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_client'>batch_client</span><span class='period'>.</span><span class='id identifier rubyid_batch_snapshot'>batch_snapshot</span>

<span class='id identifier rubyid_partitions'>partitions</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_snapshot'>batch_snapshot</span><span class='period'>.</span><span class='id identifier rubyid_partition_read'>partition_read</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>users</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:id</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='rbracket'>]</span>

<span class='id identifier rubyid_partition'>partition</span> <span class='op'>=</span> <span class='id identifier rubyid_partitions'>partitions</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>

<span class='id identifier rubyid_serialized_snapshot'>serialized_snapshot</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_snapshot'>batch_snapshot</span><span class='period'>.</span><span class='id identifier rubyid_dump'>dump</span>
<span class='id identifier rubyid_serialized_partition'>serialized_partition</span> <span class='op'>=</span> <span class='id identifier rubyid_partition'>partition</span><span class='period'>.</span><span class='id identifier rubyid_dump'>dump</span>

<span class='comment'># In a separate process
</span><span class='id identifier rubyid_new_batch_snapshot'>new_batch_snapshot</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_client'>batch_client</span><span class='period'>.</span><span class='id identifier rubyid_load_batch_snapshot'>load_batch_snapshot</span> \
  <span class='id identifier rubyid_serialized_snapshot'>serialized_snapshot</span>

<span class='id identifier rubyid_new_partition'>new_partition</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_client'>batch_client</span><span class='period'>.</span><span class='id identifier rubyid_load_partition'>load_partition</span> \
  <span class='id identifier rubyid_serialized_partition'>serialized_partition</span>

<span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='id identifier rubyid_new_batch_snapshot'>new_batch_snapshot</span><span class='period'>.</span><span class='id identifier rubyid_execute_partition'>execute_partition</span> \
  <span class='id identifier rubyid_new_partition'>new_partition</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>serialized_partition</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The serialized representation of
an existing batch partition. See <span class='object_link'><a href="Partition.html#dump-instance_method" title="Google::Cloud::Spanner::Partition#dump (method)">Partition#dump</a></span>.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Partition.html" title="Google::Cloud::Spanner::Partition (class)">Google::Cloud::Spanner::Partition</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


272
273
274</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/batch_client.rb', line 272</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_partition'>load_partition</span> <span class='id identifier rubyid_serialized_partition'>serialized_partition</span>
  <span class='const'><span class='object_link'><a href="Partition.html" title="Google::Cloud::Spanner::Partition (class)">Partition</a></span></span><span class='period'>.</span><span class='id identifier rubyid_load'><span class='object_link'><a href="Partition.html#load-class_method" title="Google::Cloud::Spanner::Partition.load (method)">load</a></span></span> <span class='id identifier rubyid_serialized_partition'>serialized_partition</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="project-instance_method">
  
    #<strong>project</strong>  &#x21d2; <tt><span class='object_link'><a href="Project.html" title="Google::Cloud::Spanner::Project (class)">Project</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The Spanner project connected to.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Project.html" title="Google::Cloud::Spanner::Project (class)">Project</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


95
96
97</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/batch_client.rb', line 95</span>

<span class='kw'>def</span> <span class='id identifier rubyid_project'>project</span>
  <span class='ivar'>@project</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="project_id-instance_method">
  
    #<strong>project_id</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The unique identifier for the project.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/batch_client.rb', line 77</span>

<span class='kw'>def</span> <span class='id identifier rubyid_project_id'>project_id</span>
  <span class='ivar'>@project</span><span class='period'>.</span><span class='id identifier rubyid_service'>service</span><span class='period'>.</span><span class='id identifier rubyid_project'>project</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="range-instance_method">
  
    #<strong>range</strong>(beginning, ending, exclude_begin: false, exclude_end: false)  &#x21d2; <tt><span class='object_link'><a href="Range.html" title="Google::Cloud::Spanner::Range (class)">Google::Cloud::Spanner::Range</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a Spanner Range. This can be used in place of a Ruby Range
when needing to exclude the beginning value.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner'>spanner</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Spanner.html#new-class_method" title="Google::Cloud::Spanner.new (method)">new</a></span></span>

<span class='id identifier rubyid_batch_client'>batch_client</span> <span class='op'>=</span> <span class='id identifier rubyid_spanner'>spanner</span><span class='period'>.</span><span class='id identifier rubyid_batch_client'>batch_client</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-instance</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my-database</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_batch_snapshot'>batch_snapshot</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_client'>batch_client</span><span class='period'>.</span><span class='id identifier rubyid_batch_snapshot'>batch_snapshot</span>

<span class='id identifier rubyid_key_range'>key_range</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_client'>batch_client</span><span class='period'>.</span><span class='id identifier rubyid_range'>range</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>100</span>

<span class='id identifier rubyid_partitions'>partitions</span> <span class='op'>=</span> <span class='id identifier rubyid_batch_snapshot'>batch_snapshot</span><span class='period'>.</span><span class='id identifier rubyid_partition_read'>partition_read</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>users</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='symbol'>:id</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='rbracket'>]</span><span class='comma'>,</span>
                                        <span class='label'>keys:</span> <span class='id identifier rubyid_key_range'>key_range</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>beginning</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The object that defines the beginning of the
range.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ending</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The object that defines the end of the range.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>exclude_begin</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Determines if the range excludes its
beginning value. Default is <code>false</code>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>exclude_end</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Determines if the range excludes its
ending value. Default is <code>false</code>.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Range.html" title="Google::Cloud::Spanner::Range (class)">Google::Cloud::Spanner::Range</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The new Range instance.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


377
378
379
380
381</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/batch_client.rb', line 377</span>

<span class='kw'>def</span> <span class='id identifier rubyid_range'>range</span> <span class='id identifier rubyid_beginning'>beginning</span><span class='comma'>,</span> <span class='id identifier rubyid_ending'>ending</span><span class='comma'>,</span> <span class='label'>exclude_begin:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>exclude_end:</span> <span class='kw'>false</span>
  <span class='const'><span class='object_link'><a href="Range.html" title="Google::Cloud::Spanner::Range (class)">Range</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="../Spanner.html#new-class_method" title="Google::Cloud::Spanner.new (method)">new</a></span></span> <span class='id identifier rubyid_beginning'>beginning</span><span class='comma'>,</span> <span class='id identifier rubyid_ending'>ending</span><span class='comma'>,</span>
            <span class='label'>exclude_begin:</span> <span class='id identifier rubyid_exclude_begin'>exclude_begin</span><span class='comma'>,</span>
            <span class='label'>exclude_end:</span> <span class='id identifier rubyid_exclude_end'>exclude_end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

  <div id="footer">
  <ul class="footer-links">
    <li>
      <a href="https://github.com/GoogleCloudPlatform/google-cloud-ruby" title="Google Cloud on Github">
        <img src="/google-cloud-ruby/img/icon-link-github.svg" alt="GitHub icon"> GitHub
      </a>
    </li>
    <li>
      <a href="https://github.com/GoogleCloudPlatform/google-cloud-ruby/issues" title="Google Cloud issues on Github">
        <img src="/google-cloud-ruby/img/icon-link-github.svg" alt="GitHub icon"> Issues
      </a>
    </li>
    <li>
      <a href="http://stackoverflow.com/questions/tagged/google-cloud-ruby" title="Google Cloud on StackOverflow">
      <img src="/google-cloud-ruby/img/icon-link-stackoverflow.svg" alt="StackOverflow icon"> StackOverflow
    </a>
    </li>
    <li>
      <a href="http://rubygems.org/gems/google-cloud" title="Google Cloud on RubyGems">
        <img src="/google-cloud-ruby/img/icon-link-package-manager.svg" alt="RubyGems icon"> RubyGems
      </a>
    </li>
  </ul>

  <p>
    Documentation generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>.
  </p>
</div>

</div>
