---
layout: yard_main
title: "Class: Google::Cloud::Spanner::V1::SpannerClient - Google"
css: 
  - /docs/css/style.css
  - /docs/css/common.css
  - /css/yard-main.css
js: 
  - /docs/js/app.js
  - /js/yard-main.js
---
<script type="text/javascript" charset="utf-8">
  pathId = "Google::Cloud::Spanner::V1::SpannerClient";
  relpath = '../../../../';
</script>


<div class="nav_wrap">
  <iframe id="nav" src="../../../../class_list.html?1"></iframe>
  <div id="resizer"></div>
</div>

<div id="main" tabindex="-1">
  <div id="header">
    <div id="menu">
  
    <a href="../../../../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span>
     &raquo; 
    <span class="title">SpannerClient</span>
  
</div>

    <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
    <div class="clear"></div>
  </div>

  <div id="content"><h1>Class: Google::Cloud::Spanner::V1::SpannerClient
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Google::Cloud::Spanner::V1::SpannerClient</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/google/cloud/spanner/v1/spanner_client.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Cloud Spanner API</p>

<p>The Cloud Spanner API can be used to manage sessions and execute
transactions on data stored in Cloud Spanner databases.</p>


  </div>
</div>
<div class="tags">
  

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="SERVICE_ADDRESS-constant" class="">SERVICE_ADDRESS =
          <div class="docstring">
  <div class="discussion">
    <p>The default address of the service.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>spanner.googleapis.com</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
        <dt id="DEFAULT_SERVICE_PORT-constant" class="">DEFAULT_SERVICE_PORT =
          <div class="docstring">
  <div class="discussion">
    <p>The default port of the service.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>443</span></pre></dd>
      
        <dt id="GRPC_INTERCEPTORS-constant" class="">GRPC_INTERCEPTORS =
          <div class="docstring">
  <div class="discussion">
    <p>The default set of gRPC interceptors.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='rbracket'>]</span></pre></dd>
      
        <dt id="DEFAULT_TIMEOUT-constant" class="">DEFAULT_TIMEOUT =
          
        </dt>
        <dd><pre class="code"><span class='int'>30</span></pre></dd>
      
        <dt id="ALL_SCOPES-constant" class="">ALL_SCOPES =
          <div class="docstring">
  <div class="discussion">
    <p>The scopes needed to make gRPC calls to all of the methods defined in
this service.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://www.googleapis.com/auth/cloud-platform</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>https://www.googleapis.com/auth/spanner.data</span><span class='tstring_end'>&quot;</span></span>
<span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#database_path-class_method" title="database_path (class method)">.<strong>database_path</strong>(project, instance, database)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns a fully-qualified database resource name string.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#session_path-class_method" title="session_path (class method)">.<strong>session_path</strong>(project, instance, database, session)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns a fully-qualified session resource name string.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#begin_transaction-instance_method" title="#begin_transaction (instance method)">#<strong>begin_transaction</strong>(session, options_, options: nil) {|result, operation| ... } &#x21d2; Google::Spanner::V1::Transaction </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Begins a new transaction.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#commit-instance_method" title="#commit (instance method)">#<strong>commit</strong>(session, mutations, transaction_id: nil, single_use_transaction: nil, options: nil) {|result, operation| ... } &#x21d2; Google::Spanner::V1::CommitResponse </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Commits a transaction.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_session-instance_method" title="#create_session (instance method)">#<strong>create_session</strong>(database, session: nil, options: nil) {|result, operation| ... } &#x21d2; Google::Spanner::V1::Session </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a new session.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_session-instance_method" title="#delete_session (instance method)">#<strong>delete_session</strong>(name, options: nil) {|result, operation| ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Ends a session, releasing server resources associated with it.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#execute_batch_dml-instance_method" title="#execute_batch_dml (instance method)">#<strong>execute_batch_dml</strong>(session, transaction, statements, seqno, options: nil) {|result, operation| ... } &#x21d2; Google::Spanner::V1::ExecuteBatchDmlResponse </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Executes a batch of SQL DML statements.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#execute_sql-instance_method" title="#execute_sql (instance method)">#<strong>execute_sql</strong>(session, sql, transaction: nil, params: nil, param_types: nil, resume_token: nil, query_mode: nil, partition_token: nil, seqno: nil, options: nil) {|result, operation| ... } &#x21d2; Google::Spanner::V1::ResultSet </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Executes an SQL statement, returning all results in a single reply.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#execute_streaming_sql-instance_method" title="#execute_streaming_sql (instance method)">#<strong>execute_streaming_sql</strong>(session, sql, transaction: nil, params: nil, param_types: nil, resume_token: nil, query_mode: nil, partition_token: nil, seqno: nil, options: nil)  &#x21d2; Enumerable&lt;Google::Spanner::V1::PartialResultSet&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Like ExecuteSql, except returns the result set as a stream.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_session-instance_method" title="#get_session (instance method)">#<strong>get_session</strong>(name, options: nil) {|result, operation| ... } &#x21d2; Google::Spanner::V1::Session </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Gets a session.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(credentials: nil, scopes: ALL_SCOPES, client_config: {}, timeout: DEFAULT_TIMEOUT, metadata: nil, exception_transformer: nil, lib_name: nil, lib_version: &quot;&quot;)  &#x21d2; SpannerClient </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A new instance of SpannerClient.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#list_sessions-instance_method" title="#list_sessions (instance method)">#<strong>list_sessions</strong>(database, page_size: nil, filter: nil, options: nil) {|result, operation| ... } &#x21d2; Google::Gax::PagedEnumerable&lt;Google::Spanner::V1::Session&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Lists all sessions in a given database.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#partition_query-instance_method" title="#partition_query (instance method)">#<strong>partition_query</strong>(session, sql, transaction: nil, params: nil, param_types: nil, partition_options: nil, options: nil) {|result, operation| ... } &#x21d2; Google::Spanner::V1::PartitionResponse </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a set of partition tokens that can be used to execute a query operation in parallel.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#partition_read-instance_method" title="#partition_read (instance method)">#<strong>partition_read</strong>(session, table, key_set, transaction: nil, index: nil, columns: nil, partition_options: nil, options: nil) {|result, operation| ... } &#x21d2; Google::Spanner::V1::PartitionResponse </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Creates a set of partition tokens that can be used to execute a read operation in parallel.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read-instance_method" title="#read (instance method)">#<strong>read</strong>(session, table, columns, key_set, transaction: nil, index: nil, limit: nil, resume_token: nil, partition_token: nil, options: nil) {|result, operation| ... } &#x21d2; Google::Spanner::V1::ResultSet </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Reads rows from the database using key lookups and scans, as a simple key/value style alternative to ExecuteSql.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rollback-instance_method" title="#rollback (instance method)">#<strong>rollback</strong>(session, transaction_id, options: nil) {|result, operation| ... } &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Rolls back a transaction, releasing any locks it holds.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#streaming_read-instance_method" title="#streaming_read (instance method)">#<strong>streaming_read</strong>(session, table, columns, key_set, transaction: nil, index: nil, limit: nil, resume_token: nil, partition_token: nil, options: nil)  &#x21d2; Enumerable&lt;Google::Spanner::V1::PartialResultSet&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Like Read, except returns the result set as a stream.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(credentials: nil, scopes: ALL_SCOPES, client_config: {}, timeout: DEFAULT_TIMEOUT, metadata: nil, exception_transformer: nil, lib_name: nil, lib_version: &quot;&quot;)  &#x21d2; <tt><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a new instance of SpannerClient</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>credentials</span>
      
      
        <span class='type'>(<tt>Google::Auth::Credentials</tt>, <tt>String</tt>, <tt>Hash</tt>, <tt>GRPC::Core::Channel</tt>, <tt>GRPC::Core::ChannelCredentials</tt>, <tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Provides the means for authenticating requests made by the client. This parameter can
be many types.
A <code>Google::Auth::Credentials</code> uses a the properties of its represented keyfile for
authenticating requests made by this client.
A <code>String</code> will be treated as the path to the keyfile to be used for the construction of
credentials for this client.
A <code>Hash</code> will be treated as the contents of a keyfile to be used for the construction of
credentials for this client.
A <code>GRPC::Core::Channel</code> will be used to make calls through.
A <code>GRPC::Core::ChannelCredentials</code> for the setting up the RPC client. The channel credentials
should already be composed with a <code>GRPC::Core::CallCredentials</code> object.
A <code>Proc</code> will be used as an updater_proc for the Grpc channel. The proc transforms the
metadata for requests, generally, to give OAuth credentials.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>scopes</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The OAuth scopes for this service. This parameter is ignored if
an updater_proc is supplied.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>client_config</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A Hash for call options for each method. See
Google::Gax#construct_settings for the structure of
this data. Falls back to the default config if not specified
or the specified config is missing data points.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>timeout</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The default timeout, in seconds, for calls made through this client.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>metadata</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Default metadata to be sent with each request. This can be overridden on a per call basis.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>exception_transformer</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>An optional proc that intercepts any exceptions raised during an API call to inject
custom error handling.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/v1/spanner_client.rb', line 144</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span> \
    <span class='label'>credentials:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>scopes:</span> <span class='const'><span class='object_link'><a href="#ALL_SCOPES-constant" title="Google::Cloud::Spanner::V1::SpannerClient::ALL_SCOPES (constant)">ALL_SCOPES</a></span></span><span class='comma'>,</span>
    <span class='label'>client_config:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span>
    <span class='label'>timeout:</span> <span class='const'><span class='object_link'><a href="#DEFAULT_TIMEOUT-constant" title="Google::Cloud::Spanner::V1::SpannerClient::DEFAULT_TIMEOUT (constant)">DEFAULT_TIMEOUT</a></span></span><span class='comma'>,</span>
    <span class='label'>metadata:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>exception_transformer:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>lib_name:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>lib_version:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='comment'># These require statements are intentionally placed here to initialize
</span>  <span class='comment'># the gRPC module only when it&#39;s required.
</span>  <span class='comment'># See https://github.com/googleapis/toolkit/issues/446
</span>  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/gax/grpc</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/spanner/v1/spanner_services_pb</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_credentials'>credentials</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Credentials.html" title="Google::Cloud::Spanner::V1::Credentials (class)">Credentials</a></span></span><span class='period'>.</span><span class='id identifier rubyid_default'>default</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_credentials'>credentials</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_credentials'>credentials</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_updater_proc'>updater_proc</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Credentials.html" title="Google::Cloud::Spanner::V1::Credentials (class)">Credentials</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_credentials'>credentials</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_updater_proc'>updater_proc</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_credentials'>credentials</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>GRPC</span><span class='op'>::</span><span class='const'>Core</span><span class='op'>::</span><span class='const'>Channel</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_channel'>channel</span> <span class='op'>=</span> <span class='id identifier rubyid_credentials'>credentials</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_credentials'>credentials</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>GRPC</span><span class='op'>::</span><span class='const'>Core</span><span class='op'>::</span><span class='const'>ChannelCredentials</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_chan_creds'>chan_creds</span> <span class='op'>=</span> <span class='id identifier rubyid_credentials'>credentials</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_credentials'>credentials</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Proc</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_updater_proc'>updater_proc</span> <span class='op'>=</span> <span class='id identifier rubyid_credentials'>credentials</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_credentials'>credentials</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Auth</span><span class='op'>::</span><span class='const'>Credentials</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_updater_proc'>updater_proc</span> <span class='op'>=</span> <span class='id identifier rubyid_credentials'>credentials</span><span class='period'>.</span><span class='id identifier rubyid_updater_proc'>updater_proc</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_package_version'>package_version</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html#VERSION-constant" title="Google::Cloud::Spanner::VERSION (constant)">VERSION</a></span></span>

  <span class='id identifier rubyid_google_api_client'>google_api_client</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>gl-ruby/</span><span class='embexpr_beg'>#{</span><span class='const'>RUBY_VERSION</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_google_api_client'>google_api_client</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lib_name'>lib_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_lib_version'>lib_version</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_lib_name'>lib_name</span>
  <span class='id identifier rubyid_google_api_client'>google_api_client</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> gapic/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_package_version'>package_version</span><span class='embexpr_end'>}</span><span class='tstring_content'> gax/</span><span class='embexpr_beg'>#{</span><span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='op'>::</span><span class='const'>VERSION</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_google_api_client'>google_api_client</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> grpc/</span><span class='embexpr_beg'>#{</span><span class='const'>GRPC</span><span class='op'>::</span><span class='const'>VERSION</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_google_api_client'>google_api_client</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>

  <span class='id identifier rubyid_headers'>headers</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='symbol'>:&quot;x-goog-api-client&quot;</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_google_api_client'>google_api_client</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_headers'>headers</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='id identifier rubyid_metadata'>metadata</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_metadata'>metadata</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_client_config_file'>client_config_file</span> <span class='op'>=</span> <span class='const'>Pathname</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid___dir__'>__dir__</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>spanner_client_config.json</span><span class='tstring_end'>&quot;</span></span>
  <span class='rparen'>)</span>
  <span class='id identifier rubyid_defaults'>defaults</span> <span class='op'>=</span> <span class='id identifier rubyid_client_config_file'>client_config_file</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
    <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='period'>.</span><span class='id identifier rubyid_construct_settings'>construct_settings</span><span class='lparen'>(</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google.spanner.v1.Spanner</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='id identifier rubyid_client_config'>client_config</span><span class='comma'>,</span>
      <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='op'>::</span><span class='const'>Grpc</span><span class='op'>::</span><span class='const'>STATUS_CODE_NAMES</span><span class='comma'>,</span>
      <span class='id identifier rubyid_timeout'>timeout</span><span class='comma'>,</span>
      <span class='label'>page_descriptors:</span> <span class='const'>PAGE_DESCRIPTORS</span><span class='comma'>,</span>
      <span class='label'>errors:</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='op'>::</span><span class='const'>Grpc</span><span class='op'>::</span><span class='const'>API_ERRORS</span><span class='comma'>,</span>
      <span class='label'>metadata:</span> <span class='id identifier rubyid_headers'>headers</span>
    <span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Allow overriding the service path/port in subclasses.
</span>  <span class='id identifier rubyid_service_path'>service_path</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='op'>::</span><span class='const'>SERVICE_ADDRESS</span>
  <span class='id identifier rubyid_port'>port</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='op'>::</span><span class='const'>DEFAULT_SERVICE_PORT</span>
  <span class='id identifier rubyid_interceptors'>interceptors</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='op'>::</span><span class='const'>GRPC_INTERCEPTORS</span>
  <span class='ivar'>@spanner_stub</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='op'>::</span><span class='const'>Grpc</span><span class='period'>.</span><span class='id identifier rubyid_create_stub'>create_stub</span><span class='lparen'>(</span>
    <span class='id identifier rubyid_service_path'>service_path</span><span class='comma'>,</span>
    <span class='id identifier rubyid_port'>port</span><span class='comma'>,</span>
    <span class='label'>chan_creds:</span> <span class='id identifier rubyid_chan_creds'>chan_creds</span><span class='comma'>,</span>
    <span class='label'>channel:</span> <span class='id identifier rubyid_channel'>channel</span><span class='comma'>,</span>
    <span class='label'>updater_proc:</span> <span class='id identifier rubyid_updater_proc'>updater_proc</span><span class='comma'>,</span>
    <span class='label'>scopes:</span> <span class='id identifier rubyid_scopes'>scopes</span><span class='comma'>,</span>
    <span class='label'>interceptors:</span> <span class='id identifier rubyid_interceptors'>interceptors</span><span class='comma'>,</span>
    <span class='op'>&amp;</span><span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner.html" title="Google::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1.html" title="Google::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'>Spanner</span><span class='op'>::</span><span class='const'>Stub</span><span class='period'>.</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:new</span><span class='rparen'>)</span>
  <span class='rparen'>)</span>

  <span class='ivar'>@create_session</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='period'>.</span><span class='id identifier rubyid_create_api_call'>create_api_call</span><span class='lparen'>(</span>
    <span class='ivar'>@spanner_stub</span><span class='period'>.</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:create_session</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='id identifier rubyid_defaults'>defaults</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>create_session</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>exception_transformer:</span> <span class='id identifier rubyid_exception_transformer'>exception_transformer</span><span class='comma'>,</span>
    <span class='label'>params_extractor:</span> <span class='id identifier rubyid_proc'>proc</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_request'>request</span><span class='op'>|</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>database</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_database'>database</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='rparen'>)</span>
  <span class='ivar'>@get_session</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='period'>.</span><span class='id identifier rubyid_create_api_call'>create_api_call</span><span class='lparen'>(</span>
    <span class='ivar'>@spanner_stub</span><span class='period'>.</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:get_session</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='id identifier rubyid_defaults'>defaults</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>get_session</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>exception_transformer:</span> <span class='id identifier rubyid_exception_transformer'>exception_transformer</span><span class='comma'>,</span>
    <span class='label'>params_extractor:</span> <span class='id identifier rubyid_proc'>proc</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_request'>request</span><span class='op'>|</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='rparen'>)</span>
  <span class='ivar'>@list_sessions</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='period'>.</span><span class='id identifier rubyid_create_api_call'>create_api_call</span><span class='lparen'>(</span>
    <span class='ivar'>@spanner_stub</span><span class='period'>.</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:list_sessions</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='id identifier rubyid_defaults'>defaults</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>list_sessions</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>exception_transformer:</span> <span class='id identifier rubyid_exception_transformer'>exception_transformer</span><span class='comma'>,</span>
    <span class='label'>params_extractor:</span> <span class='id identifier rubyid_proc'>proc</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_request'>request</span><span class='op'>|</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>database</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_database'>database</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='rparen'>)</span>
  <span class='ivar'>@delete_session</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='period'>.</span><span class='id identifier rubyid_create_api_call'>create_api_call</span><span class='lparen'>(</span>
    <span class='ivar'>@spanner_stub</span><span class='period'>.</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:delete_session</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='id identifier rubyid_defaults'>defaults</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>delete_session</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>exception_transformer:</span> <span class='id identifier rubyid_exception_transformer'>exception_transformer</span><span class='comma'>,</span>
    <span class='label'>params_extractor:</span> <span class='id identifier rubyid_proc'>proc</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_request'>request</span><span class='op'>|</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>name</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='rparen'>)</span>
  <span class='ivar'>@execute_sql</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='period'>.</span><span class='id identifier rubyid_create_api_call'>create_api_call</span><span class='lparen'>(</span>
    <span class='ivar'>@spanner_stub</span><span class='period'>.</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:execute_sql</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='id identifier rubyid_defaults'>defaults</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>execute_sql</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>exception_transformer:</span> <span class='id identifier rubyid_exception_transformer'>exception_transformer</span><span class='comma'>,</span>
    <span class='label'>params_extractor:</span> <span class='id identifier rubyid_proc'>proc</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_request'>request</span><span class='op'>|</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>session</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_session'>session</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='rparen'>)</span>
  <span class='ivar'>@execute_streaming_sql</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='period'>.</span><span class='id identifier rubyid_create_api_call'>create_api_call</span><span class='lparen'>(</span>
    <span class='ivar'>@spanner_stub</span><span class='period'>.</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:execute_streaming_sql</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='id identifier rubyid_defaults'>defaults</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>execute_streaming_sql</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>exception_transformer:</span> <span class='id identifier rubyid_exception_transformer'>exception_transformer</span><span class='comma'>,</span>
    <span class='label'>params_extractor:</span> <span class='id identifier rubyid_proc'>proc</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_request'>request</span><span class='op'>|</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>session</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_session'>session</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='rparen'>)</span>
  <span class='ivar'>@execute_batch_dml</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='period'>.</span><span class='id identifier rubyid_create_api_call'>create_api_call</span><span class='lparen'>(</span>
    <span class='ivar'>@spanner_stub</span><span class='period'>.</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:execute_batch_dml</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='id identifier rubyid_defaults'>defaults</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>execute_batch_dml</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>exception_transformer:</span> <span class='id identifier rubyid_exception_transformer'>exception_transformer</span><span class='comma'>,</span>
    <span class='label'>params_extractor:</span> <span class='id identifier rubyid_proc'>proc</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_request'>request</span><span class='op'>|</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>session</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_session'>session</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='rparen'>)</span>
  <span class='ivar'>@read</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='period'>.</span><span class='id identifier rubyid_create_api_call'>create_api_call</span><span class='lparen'>(</span>
    <span class='ivar'>@spanner_stub</span><span class='period'>.</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:read</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='id identifier rubyid_defaults'>defaults</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>read</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>exception_transformer:</span> <span class='id identifier rubyid_exception_transformer'>exception_transformer</span><span class='comma'>,</span>
    <span class='label'>params_extractor:</span> <span class='id identifier rubyid_proc'>proc</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_request'>request</span><span class='op'>|</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>session</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_session'>session</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='rparen'>)</span>
  <span class='ivar'>@streaming_read</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='period'>.</span><span class='id identifier rubyid_create_api_call'>create_api_call</span><span class='lparen'>(</span>
    <span class='ivar'>@spanner_stub</span><span class='period'>.</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:streaming_read</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='id identifier rubyid_defaults'>defaults</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>streaming_read</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>exception_transformer:</span> <span class='id identifier rubyid_exception_transformer'>exception_transformer</span><span class='comma'>,</span>
    <span class='label'>params_extractor:</span> <span class='id identifier rubyid_proc'>proc</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_request'>request</span><span class='op'>|</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>session</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_session'>session</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='rparen'>)</span>
  <span class='ivar'>@begin_transaction</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='period'>.</span><span class='id identifier rubyid_create_api_call'>create_api_call</span><span class='lparen'>(</span>
    <span class='ivar'>@spanner_stub</span><span class='period'>.</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:begin_transaction</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='id identifier rubyid_defaults'>defaults</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>begin_transaction</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>exception_transformer:</span> <span class='id identifier rubyid_exception_transformer'>exception_transformer</span><span class='comma'>,</span>
    <span class='label'>params_extractor:</span> <span class='id identifier rubyid_proc'>proc</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_request'>request</span><span class='op'>|</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>session</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_session'>session</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='rparen'>)</span>
  <span class='ivar'>@commit</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='period'>.</span><span class='id identifier rubyid_create_api_call'>create_api_call</span><span class='lparen'>(</span>
    <span class='ivar'>@spanner_stub</span><span class='period'>.</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:commit</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='id identifier rubyid_defaults'>defaults</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>commit</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>exception_transformer:</span> <span class='id identifier rubyid_exception_transformer'>exception_transformer</span><span class='comma'>,</span>
    <span class='label'>params_extractor:</span> <span class='id identifier rubyid_proc'>proc</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_request'>request</span><span class='op'>|</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>session</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_session'>session</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='rparen'>)</span>
  <span class='ivar'>@rollback</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='period'>.</span><span class='id identifier rubyid_create_api_call'>create_api_call</span><span class='lparen'>(</span>
    <span class='ivar'>@spanner_stub</span><span class='period'>.</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:rollback</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='id identifier rubyid_defaults'>defaults</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rollback</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>exception_transformer:</span> <span class='id identifier rubyid_exception_transformer'>exception_transformer</span><span class='comma'>,</span>
    <span class='label'>params_extractor:</span> <span class='id identifier rubyid_proc'>proc</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_request'>request</span><span class='op'>|</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>session</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_session'>session</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='rparen'>)</span>
  <span class='ivar'>@partition_query</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='period'>.</span><span class='id identifier rubyid_create_api_call'>create_api_call</span><span class='lparen'>(</span>
    <span class='ivar'>@spanner_stub</span><span class='period'>.</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:partition_query</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='id identifier rubyid_defaults'>defaults</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>partition_query</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>exception_transformer:</span> <span class='id identifier rubyid_exception_transformer'>exception_transformer</span><span class='comma'>,</span>
    <span class='label'>params_extractor:</span> <span class='id identifier rubyid_proc'>proc</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_request'>request</span><span class='op'>|</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>session</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_session'>session</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='rparen'>)</span>
  <span class='ivar'>@partition_read</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='period'>.</span><span class='id identifier rubyid_create_api_call'>create_api_call</span><span class='lparen'>(</span>
    <span class='ivar'>@spanner_stub</span><span class='period'>.</span><span class='id identifier rubyid_method'>method</span><span class='lparen'>(</span><span class='symbol'>:partition_read</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='id identifier rubyid_defaults'>defaults</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>partition_read</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>exception_transformer:</span> <span class='id identifier rubyid_exception_transformer'>exception_transformer</span><span class='comma'>,</span>
    <span class='label'>params_extractor:</span> <span class='id identifier rubyid_proc'>proc</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_request'>request</span><span class='op'>|</span>
      <span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>session</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_session'>session</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="database_path-class_method">
  
    .<strong>database_path</strong>(project, instance, database)  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a fully-qualified database resource name string.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>project</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>instance</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>database</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


92
93
94
95
96
97
98</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/v1/spanner_client.rb', line 92</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_database_path'>database_path</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_instance'>instance</span><span class='comma'>,</span> <span class='id identifier rubyid_database'>database</span>
  <span class='const'>DATABASE_PATH_TEMPLATE</span><span class='period'>.</span><span class='id identifier rubyid_render'>render</span><span class='lparen'>(</span>
    <span class='symbol'>:&quot;project&quot;</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span>
    <span class='symbol'>:&quot;instance&quot;</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_instance'>instance</span><span class='comma'>,</span>
    <span class='symbol'>:&quot;database&quot;</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_database'>database</span>
  <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="session_path-class_method">
  
    .<strong>session_path</strong>(project, instance, database, session)  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns a fully-qualified session resource name string.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>project</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>instance</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>database</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>session</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108
109
110
111
112
113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/v1/spanner_client.rb', line 106</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_session_path'>session_path</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span> <span class='id identifier rubyid_instance'>instance</span><span class='comma'>,</span> <span class='id identifier rubyid_database'>database</span><span class='comma'>,</span> <span class='id identifier rubyid_session'>session</span>
  <span class='const'>SESSION_PATH_TEMPLATE</span><span class='period'>.</span><span class='id identifier rubyid_render'>render</span><span class='lparen'>(</span>
    <span class='symbol'>:&quot;project&quot;</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_project'>project</span><span class='comma'>,</span>
    <span class='symbol'>:&quot;instance&quot;</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_instance'>instance</span><span class='comma'>,</span>
    <span class='symbol'>:&quot;database&quot;</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_database'>database</span><span class='comma'>,</span>
    <span class='symbol'>:&quot;session&quot;</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_session'>session</span>
  <span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="begin_transaction-instance_method">
  
    #<strong>begin_transaction</strong>(session, options_, options: nil) {|result, operation| ... } &#x21d2; <tt><span class='object_link'><a href="../../../Spanner/V1/Transaction.html" title="Google::Spanner::V1::Transaction (class)">Google::Spanner::V1::Transaction</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Begins a new transaction. This step can often be skipped:
Read,
ExecuteSql and
Commit can begin a new transaction as a
side-effect.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner/v1</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner_client'>spanner_client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Google::Cloud::Spanner::V1::SpannerClient#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_formatted_session'>formatted_session</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_session_path'><span class='object_link'><a href="#session_path-class_method" title="Google::Cloud::Spanner::V1::SpannerClient.session_path (method)">session_path</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[PROJECT]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[INSTANCE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[DATABASE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[SESSION]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># TODO: Initialize `options_`:
</span><span class='id identifier rubyid_options_'>options_</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_spanner_client'>spanner_client</span><span class='period'>.</span><span class='id identifier rubyid_begin_transaction'>begin_transaction</span><span class='lparen'>(</span><span class='id identifier rubyid_formatted_session'>formatted_session</span><span class='comma'>,</span> <span class='id identifier rubyid_options_'>options_</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>session</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. The session in which the transaction runs.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options_</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/TransactionOptions.html" title="Google::Spanner::V1::TransactionOptions (class)">Google::Spanner::V1::TransactionOptions</a></span> | Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. Options for the new transaction.
A hash of the same form as <code>Google::Spanner::V1::TransactionOptions</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Google::Gax::CallOptions</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Overrides the default settings for this call, e.g, timeout,
retries, etc.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>result</tt>, <tt>operation</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Access the result along with the RPC operation</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>result</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/Transaction.html" title="Google::Spanner::V1::Transaction (class)">Google::Spanner::V1::Transaction</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>operation</span>
      
      
        <span class='type'>(<tt>GRPC::ActiveCall::Operation</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/Transaction.html" title="Google::Spanner::V1::Transaction (class)">Google::Spanner::V1::Transaction</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>Google::Gax::GaxError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the RPC is aborted.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1131
1132
1133
1134
1135
1136
1137
1138
1139
1140
1141
1142</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/v1/spanner_client.rb', line 1131</span>

<span class='kw'>def</span> <span class='id identifier rubyid_begin_transaction'>begin_transaction</span> \
    <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
    <span class='id identifier rubyid_options_'>options_</span><span class='comma'>,</span>
    <span class='label'>options:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>session:</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
    <span class='label'>options:</span> <span class='id identifier rubyid_options_'>options_</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='op'>::</span><span class='id identifier rubyid_to_proto'>to_proto</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner.html" title="Google::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1.html" title="Google::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1/BeginTransactionRequest.html" title="Google::Spanner::V1::BeginTransactionRequest (class)">BeginTransactionRequest</a></span></span><span class='rparen'>)</span>
  <span class='ivar'>@begin_transaction</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="commit-instance_method">
  
    #<strong>commit</strong>(session, mutations, transaction_id: nil, single_use_transaction: nil, options: nil) {|result, operation| ... } &#x21d2; <tt><span class='object_link'><a href="../../../Spanner/V1/CommitResponse.html" title="Google::Spanner::V1::CommitResponse (class)">Google::Spanner::V1::CommitResponse</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Commits a transaction. The request includes the mutations to be
applied to rows in the database.</p>

<p><code>Commit</code> might return an <code>ABORTED</code> error. This can occur at any time;
commonly, the cause is conflicts with concurrent
transactions. However, it can also happen for a variety of other
reasons. If <code>Commit</code> returns <code>ABORTED</code>, the caller should re-attempt
the transaction from the beginning, re-using the same session.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner/v1</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner_client'>spanner_client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Google::Cloud::Spanner::V1::SpannerClient#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_formatted_session'>formatted_session</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_session_path'><span class='object_link'><a href="#session_path-class_method" title="Google::Cloud::Spanner::V1::SpannerClient.session_path (method)">session_path</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[PROJECT]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[INSTANCE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[DATABASE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[SESSION]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># TODO: Initialize `mutations`:
</span><span class='id identifier rubyid_mutations'>mutations</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_spanner_client'>spanner_client</span><span class='period'>.</span><span class='id identifier rubyid_commit'>commit</span><span class='lparen'>(</span><span class='id identifier rubyid_formatted_session'>formatted_session</span><span class='comma'>,</span> <span class='id identifier rubyid_mutations'>mutations</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>session</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. The session in which the transaction to be committed is running.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>mutations</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../../../Spanner/V1/Mutation.html" title="Google::Spanner::V1::Mutation (class)">Google::Spanner::V1::Mutation</a></span> | Hash&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The mutations to be executed when this transaction commits. All
mutations are applied atomically, in the order they appear in
this list.
A hash of the same form as <code>Google::Spanner::V1::Mutation</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>transaction_id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Commit a previously-started transaction.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>single_use_transaction</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/TransactionOptions.html" title="Google::Spanner::V1::TransactionOptions (class)">Google::Spanner::V1::TransactionOptions</a></span> | Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Execute mutations in a temporary transaction. Note that unlike
commit of a previously-started transaction, commit with a
temporary transaction is non-idempotent. That is, if the
<code>CommitRequest</code> is sent to Cloud Spanner more than once (for
instance, due to retries in the application, or in the
transport library), it is possible that the mutations are
executed more than once. If this is undesirable, use
BeginTransaction and
Commit instead.
A hash of the same form as <code>Google::Spanner::V1::TransactionOptions</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Google::Gax::CallOptions</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Overrides the default settings for this call, e.g, timeout,
retries, etc.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>result</tt>, <tt>operation</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Access the result along with the RPC operation</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>result</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/CommitResponse.html" title="Google::Spanner::V1::CommitResponse (class)">Google::Spanner::V1::CommitResponse</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>operation</span>
      
      
        <span class='type'>(<tt>GRPC::ActiveCall::Operation</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/CommitResponse.html" title="Google::Spanner::V1::CommitResponse (class)">Google::Spanner::V1::CommitResponse</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>Google::Gax::GaxError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the RPC is aborted.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1193
1194
1195
1196
1197
1198
1199
1200
1201
1202
1203
1204
1205
1206
1207
1208</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/v1/spanner_client.rb', line 1193</span>

<span class='kw'>def</span> <span class='id identifier rubyid_commit'>commit</span> \
    <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
    <span class='id identifier rubyid_mutations'>mutations</span><span class='comma'>,</span>
    <span class='label'>transaction_id:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>single_use_transaction:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>options:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>session:</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
    <span class='label'>mutations:</span> <span class='id identifier rubyid_mutations'>mutations</span><span class='comma'>,</span>
    <span class='label'>transaction_id:</span> <span class='id identifier rubyid_transaction_id'>transaction_id</span><span class='comma'>,</span>
    <span class='label'>single_use_transaction:</span> <span class='id identifier rubyid_single_use_transaction'>single_use_transaction</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='op'>::</span><span class='id identifier rubyid_to_proto'>to_proto</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner.html" title="Google::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1.html" title="Google::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1/CommitRequest.html" title="Google::Spanner::V1::CommitRequest (class)">CommitRequest</a></span></span><span class='rparen'>)</span>
  <span class='ivar'>@commit</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_session-instance_method">
  
    #<strong>create_session</strong>(database, session: nil, options: nil) {|result, operation| ... } &#x21d2; <tt><span class='object_link'><a href="../../../Spanner/V1/Session.html" title="Google::Spanner::V1::Session (class)">Google::Spanner::V1::Session</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a new session. A session can be used to perform
transactions that read and/or modify data in a Cloud Spanner database.
Sessions are meant to be reused for many consecutive
transactions.</p>

<p>Sessions can only execute one transaction at a time. To execute
multiple concurrent read-write/write-only transactions, create
multiple sessions. Note that standalone reads and queries use a
transaction internally, and count toward the one transaction
limit.</p>

<p>Cloud Spanner limits the number of sessions that can exist at any given
time; thus, it is a good idea to delete idle and/or unneeded sessions.
Aside from explicit deletes, Cloud Spanner can delete sessions for which no
operations are sent for more than an hour. If a session is deleted,
requests to it return <code>NOT_FOUND</code>.</p>

<p>Idle sessions can be kept alive by sending a trivial SQL query
periodically, e.g., <code>&quot;SELECT 1&quot;</code>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner/v1</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner_client'>spanner_client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Google::Cloud::Spanner::V1::SpannerClient#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_formatted_database'>formatted_database</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_database_path'><span class='object_link'><a href="#database_path-class_method" title="Google::Cloud::Spanner::V1::SpannerClient.database_path (method)">database_path</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[PROJECT]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[INSTANCE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[DATABASE]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_spanner_client'>spanner_client</span><span class='period'>.</span><span class='id identifier rubyid_create_session'>create_session</span><span class='lparen'>(</span><span class='id identifier rubyid_formatted_database'>formatted_database</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>database</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. The database in which the new session is created.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>session</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/Session.html" title="Google::Spanner::V1::Session (class)">Google::Spanner::V1::Session</a></span> | Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The session to create.
A hash of the same form as <code>Google::Spanner::V1::Session</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Google::Gax::CallOptions</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Overrides the default settings for this call, e.g, timeout,
retries, etc.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>result</tt>, <tt>operation</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Access the result along with the RPC operation</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>result</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/Session.html" title="Google::Spanner::V1::Session (class)">Google::Spanner::V1::Session</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>operation</span>
      
      
        <span class='type'>(<tt>GRPC::ActiveCall::Operation</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/Session.html" title="Google::Spanner::V1::Session (class)">Google::Spanner::V1::Session</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>Google::Gax::GaxError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the RPC is aborted.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


375
376
377
378
379
380
381
382
383
384
385
386</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/v1/spanner_client.rb', line 375</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_session'>create_session</span> \
    <span class='id identifier rubyid_database'>database</span><span class='comma'>,</span>
    <span class='label'>session:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>options:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>database:</span> <span class='id identifier rubyid_database'>database</span><span class='comma'>,</span>
    <span class='label'>session:</span> <span class='id identifier rubyid_session'>session</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='op'>::</span><span class='id identifier rubyid_to_proto'>to_proto</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner.html" title="Google::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1.html" title="Google::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1/CreateSessionRequest.html" title="Google::Spanner::V1::CreateSessionRequest (class)">CreateSessionRequest</a></span></span><span class='rparen'>)</span>
  <span class='ivar'>@create_session</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_session-instance_method">
  
    #<strong>delete_session</strong>(name, options: nil) {|result, operation| ... } &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Ends a session, releasing server resources associated with it. This will
asynchronously trigger cancellation of any operations that are running with
this session.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner/v1</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner_client'>spanner_client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Google::Cloud::Spanner::V1::SpannerClient#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_formatted_name'>formatted_name</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_session_path'><span class='object_link'><a href="#session_path-class_method" title="Google::Cloud::Spanner::V1::SpannerClient.session_path (method)">session_path</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[PROJECT]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[INSTANCE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[DATABASE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[SESSION]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_spanner_client'>spanner_client</span><span class='period'>.</span><span class='id identifier rubyid_delete_session'>delete_session</span><span class='lparen'>(</span><span class='id identifier rubyid_formatted_name'>formatted_name</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. The name of the session to delete.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Google::Gax::CallOptions</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Overrides the default settings for this call, e.g, timeout,
retries, etc.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>result</tt>, <tt>operation</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Access the result along with the RPC operation</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>result</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'><p>[]</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>operation</span>
      
      
        <span class='type'>(<tt>GRPC::ActiveCall::Operation</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>Google::Gax::GaxError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the RPC is aborted.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


507
508
509
510
511
512
513
514
515
516
517</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/v1/spanner_client.rb', line 507</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_session'>delete_session</span> \
    <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
    <span class='label'>options:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>name:</span> <span class='id identifier rubyid_name'>name</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='op'>::</span><span class='id identifier rubyid_to_proto'>to_proto</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner.html" title="Google::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1.html" title="Google::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1/DeleteSessionRequest.html" title="Google::Spanner::V1::DeleteSessionRequest (class)">DeleteSessionRequest</a></span></span><span class='rparen'>)</span>
  <span class='ivar'>@delete_session</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="execute_batch_dml-instance_method">
  
    #<strong>execute_batch_dml</strong>(session, transaction, statements, seqno, options: nil) {|result, operation| ... } &#x21d2; <tt><span class='object_link'><a href="../../../Spanner/V1/ExecuteBatchDmlResponse.html" title="Google::Spanner::V1::ExecuteBatchDmlResponse (class)">Google::Spanner::V1::ExecuteBatchDmlResponse</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Executes a batch of SQL DML statements. This method allows many statements
to be run with lower latency than submitting them sequentially with
ExecuteSql.</p>

<p>Statements are executed in order, sequentially.
ExecuteBatchDmlResponse will contain a
<span class='object_link'><a href="../../../Spanner/V1/ResultSet.html" title="Google::Spanner::V1::ResultSet (class)">ResultSet</a></span> for each DML statement that has successfully executed. If a
statement fails, its error status will be returned as part of the
ExecuteBatchDmlResponse. Execution will
stop at the first failed statement; the remaining statements will not run.</p>

<p>ExecuteBatchDml is expected to return an OK status with a response even if
there was an error while processing one of the DML statements. Clients must
inspect response.status to determine if there were any errors while
processing the request.</p>

<p>See more details in
ExecuteBatchDmlRequest and
ExecuteBatchDmlResponse.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner/v1</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner_client'>spanner_client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Google::Cloud::Spanner::V1::SpannerClient#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_formatted_session'>formatted_session</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_session_path'><span class='object_link'><a href="#session_path-class_method" title="Google::Cloud::Spanner::V1::SpannerClient.session_path (method)">session_path</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[PROJECT]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[INSTANCE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[DATABASE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[SESSION]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># TODO: Initialize `transaction`:
</span><span class='id identifier rubyid_transaction'>transaction</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

<span class='comment'># TODO: Initialize `statements`:
</span><span class='id identifier rubyid_statements'>statements</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

<span class='comment'># TODO: Initialize `seqno`:
</span><span class='id identifier rubyid_seqno'>seqno</span> <span class='op'>=</span> <span class='int'>0</span>
<span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_spanner_client'>spanner_client</span><span class='period'>.</span><span class='id identifier rubyid_execute_batch_dml'>execute_batch_dml</span><span class='lparen'>(</span><span class='id identifier rubyid_formatted_session'>formatted_session</span><span class='comma'>,</span> <span class='id identifier rubyid_transaction'>transaction</span><span class='comma'>,</span> <span class='id identifier rubyid_statements'>statements</span><span class='comma'>,</span> <span class='id identifier rubyid_seqno'>seqno</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>session</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. The session in which the DML statements should be performed.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>transaction</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/TransactionSelector.html" title="Google::Spanner::V1::TransactionSelector (class)">Google::Spanner::V1::TransactionSelector</a></span> | Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The transaction to use. A ReadWrite transaction is required. Single-use
transactions are not supported (to avoid replay).  The caller must either
supply an existing transaction ID or begin a new transaction.
A hash of the same form as <code>Google::Spanner::V1::TransactionSelector</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>statements</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../../../Spanner/V1/ExecuteBatchDmlRequest/Statement.html" title="Google::Spanner::V1::ExecuteBatchDmlRequest::Statement (class)">Google::Spanner::V1::ExecuteBatchDmlRequest::Statement</a></span> | Hash&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The list of statements to execute in this batch. Statements are executed
serially, such that the effects of statement i are visible to statement
i+1. Each statement must be a DML statement. Execution will stop at the
first failed statement; the remaining statements will not run.</p>

<p>REQUIRES: statements_size() &gt; 0.
A hash of the same form as <code>Google::Spanner::V1::ExecuteBatchDmlRequest::Statement</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>seqno</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A per-transaction sequence number used to identify this request. This is
used in the same space as the seqno in
ExecuteSqlRequest. See more details
in ExecuteSqlRequest.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Google::Gax::CallOptions</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Overrides the default settings for this call, e.g, timeout,
retries, etc.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>result</tt>, <tt>operation</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Access the result along with the RPC operation</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>result</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/ExecuteBatchDmlResponse.html" title="Google::Spanner::V1::ExecuteBatchDmlResponse (class)">Google::Spanner::V1::ExecuteBatchDmlResponse</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>operation</span>
      
      
        <span class='type'>(<tt>GRPC::ActiveCall::Operation</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/ExecuteBatchDmlResponse.html" title="Google::Spanner::V1::ExecuteBatchDmlResponse (class)">Google::Spanner::V1::ExecuteBatchDmlResponse</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>Google::Gax::GaxError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the RPC is aborted.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


853
854
855
856
857
858
859
860
861
862
863
864
865
866
867
868</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/v1/spanner_client.rb', line 853</span>

<span class='kw'>def</span> <span class='id identifier rubyid_execute_batch_dml'>execute_batch_dml</span> \
    <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
    <span class='id identifier rubyid_transaction'>transaction</span><span class='comma'>,</span>
    <span class='id identifier rubyid_statements'>statements</span><span class='comma'>,</span>
    <span class='id identifier rubyid_seqno'>seqno</span><span class='comma'>,</span>
    <span class='label'>options:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>session:</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
    <span class='label'>transaction:</span> <span class='id identifier rubyid_transaction'>transaction</span><span class='comma'>,</span>
    <span class='label'>statements:</span> <span class='id identifier rubyid_statements'>statements</span><span class='comma'>,</span>
    <span class='label'>seqno:</span> <span class='id identifier rubyid_seqno'>seqno</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='op'>::</span><span class='id identifier rubyid_to_proto'>to_proto</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner.html" title="Google::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1.html" title="Google::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1/ExecuteBatchDmlRequest.html" title="Google::Spanner::V1::ExecuteBatchDmlRequest (class)">ExecuteBatchDmlRequest</a></span></span><span class='rparen'>)</span>
  <span class='ivar'>@execute_batch_dml</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="execute_sql-instance_method">
  
    #<strong>execute_sql</strong>(session, sql, transaction: nil, params: nil, param_types: nil, resume_token: nil, query_mode: nil, partition_token: nil, seqno: nil, options: nil) {|result, operation| ... } &#x21d2; <tt><span class='object_link'><a href="../../../Spanner/V1/ResultSet.html" title="Google::Spanner::V1::ResultSet (class)">Google::Spanner::V1::ResultSet</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Executes an SQL statement, returning all results in a single reply. This
method cannot be used to return a result set larger than 10 MiB;
if the query yields more data than that, the query fails with
a <code>FAILED_PRECONDITION</code> error.</p>

<p>Operations inside read-write transactions might return <code>ABORTED</code>. If
this occurs, the application should restart the transaction from
the beginning. See <span class='object_link'><a href="../../../Spanner/V1/Transaction.html" title="Google::Spanner::V1::Transaction (class)">Transaction</a></span> for more
details.</p>

<p>Larger result sets can be fetched in streaming fashion by calling
ExecuteStreamingSql
instead.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner/v1</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner_client'>spanner_client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Google::Cloud::Spanner::V1::SpannerClient#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_formatted_session'>formatted_session</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_session_path'><span class='object_link'><a href="#session_path-class_method" title="Google::Cloud::Spanner::V1::SpannerClient.session_path (method)">session_path</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[PROJECT]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[INSTANCE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[DATABASE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[SESSION]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># TODO: Initialize `sql`:
</span><span class='id identifier rubyid_sql'>sql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_spanner_client'>spanner_client</span><span class='period'>.</span><span class='id identifier rubyid_execute_sql'>execute_sql</span><span class='lparen'>(</span><span class='id identifier rubyid_formatted_session'>formatted_session</span><span class='comma'>,</span> <span class='id identifier rubyid_sql'>sql</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>session</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. The session in which the SQL query should be performed.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sql</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. The SQL string.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>transaction</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/TransactionSelector.html" title="Google::Spanner::V1::TransactionSelector (class)">Google::Spanner::V1::TransactionSelector</a></span> | Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The transaction to use. If none is provided, the default is a
temporary read-only transaction with strong concurrency.</p>

<p>The transaction to use.</p>

<p>For queries, if none is provided, the default is a temporary read-only
transaction with strong concurrency.</p>

<p>Standard DML statements require a ReadWrite transaction. Single-use
transactions are not supported (to avoid replay).  The caller must
either supply an existing transaction ID or begin a new transaction.</p>

<p>Partitioned DML requires an existing PartitionedDml transaction ID.
A hash of the same form as <code>Google::Spanner::V1::TransactionSelector</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>params</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Protobuf/Struct.html" title="Google::Protobuf::Struct (class)">Google::Protobuf::Struct</a></span> | Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The SQL string can contain parameter placeholders. A parameter
placeholder consists of <code>&#39;@&#39;</code> followed by the parameter
name. Parameter names consist of any combination of letters,
numbers, and underscores.</p>

<p>Parameters can appear anywhere that a literal value is expected.  The same
parameter name can be used more than once, for example:
  <code>&quot;WHERE id &gt; @msg_id AND id &lt; @msg_id + 100&quot;</code></p>

<p>It is an error to execute an SQL statement with unbound parameters.</p>

<p>Parameter values are specified using <code>params</code>, which is a JSON
object whose keys are parameter names, and whose values are the
corresponding parameter values.
A hash of the same form as <code>Google::Protobuf::Struct</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>param_types</span>
      
      
        <span class='type'>(<tt>Hash{String =&gt; <span class='object_link'><a href="../../../Spanner/V1/Type.html" title="Google::Spanner::V1::Type (class)">Google::Spanner::V1::Type</a></span> | Hash}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>It is not always possible for Cloud Spanner to infer the right SQL type
from a JSON value.  For example, values of type <code>BYTES</code> and values
of type <code>STRING</code> both appear in
<span class='object_link'><a href="../../../Spanner/V1/ExecuteSqlRequest.html#params-instance_method" title="Google::Spanner::V1::ExecuteSqlRequest#params (method)">params</a></span> as JSON strings.</p>

<p>In these cases, <code>param_types</code> can be used to specify the exact
SQL type for some or all of the SQL statement parameters. See the
definition of <span class='object_link'><a href="../../../Spanner/V1/Type.html" title="Google::Spanner::V1::Type (class)">Type</a></span> for more information
about SQL types.
A hash of the same form as <code>Google::Spanner::V1::Type</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>resume_token</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If this request is resuming a previously interrupted SQL statement
execution, <code>resume_token</code> should be copied from the last
<span class='object_link'><a href="../../../Spanner/V1/PartialResultSet.html" title="Google::Spanner::V1::PartialResultSet (class)">PartialResultSet</a></span> yielded before the
interruption. Doing this enables the new SQL statement execution to resume
where the last one left off. The rest of the request parameters must
exactly match the request that yielded this token.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>query_mode</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/ExecuteSqlRequest/QueryMode.html" title="Google::Spanner::V1::ExecuteSqlRequest::QueryMode (module)">Google::Spanner::V1::ExecuteSqlRequest::QueryMode</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Used to control the amount of debugging information returned in
<span class='object_link'><a href="../../../Spanner/V1/ResultSetStats.html" title="Google::Spanner::V1::ResultSetStats (class)">ResultSetStats</a></span>. If
<span class='object_link'><a href="../../../Spanner/V1/ExecuteSqlRequest.html#partition_token-instance_method" title="Google::Spanner::V1::ExecuteSqlRequest#partition_token (method)">partition_token</a></span> is
set, <span class='object_link'><a href="../../../Spanner/V1/ExecuteSqlRequest.html#query_mode-instance_method" title="Google::Spanner::V1::ExecuteSqlRequest#query_mode (method)">query_mode</a></span> can only
be set to
<span class='object_link'><a href="../../../Spanner/V1/ExecuteSqlRequest/QueryMode.html#NORMAL-constant" title="Google::Spanner::V1::ExecuteSqlRequest::QueryMode::NORMAL (constant)">QueryMode::NORMAL</a></span>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>partition_token</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If present, results will be restricted to the specified partition
previously created using PartitionQuery().  There must be an exact
match for the values of fields common to this message and the
PartitionQueryRequest message used to create this partition_token.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>seqno</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A per-transaction sequence number used to identify this request. This
makes each request idempotent such that if the request is received multiple
times, at most one will succeed.</p>

<p>The sequence number must be monotonically increasing within the
transaction. If a request arrives for the first time with an out-of-order
sequence number, the transaction may be aborted. Replays of previously
handled requests will yield the same response as the first execution.</p>

<p>Required for DML statements. Ignored for queries.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Google::Gax::CallOptions</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Overrides the default settings for this call, e.g, timeout,
retries, etc.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>result</tt>, <tt>operation</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Access the result along with the RPC operation</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>result</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/ResultSet.html" title="Google::Spanner::V1::ResultSet (class)">Google::Spanner::V1::ResultSet</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>operation</span>
      
      
        <span class='type'>(<tt>GRPC::ActiveCall::Operation</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/ResultSet.html" title="Google::Spanner::V1::ResultSet (class)">Google::Spanner::V1::ResultSet</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>Google::Gax::GaxError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the RPC is aborted.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654
655</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/v1/spanner_client.rb', line 630</span>

<span class='kw'>def</span> <span class='id identifier rubyid_execute_sql'>execute_sql</span> \
    <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
    <span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span>
    <span class='label'>transaction:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>params:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>param_types:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>resume_token:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>query_mode:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>partition_token:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>seqno:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>options:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>session:</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
    <span class='label'>sql:</span> <span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span>
    <span class='label'>transaction:</span> <span class='id identifier rubyid_transaction'>transaction</span><span class='comma'>,</span>
    <span class='label'>params:</span> <span class='id identifier rubyid_params'>params</span><span class='comma'>,</span>
    <span class='label'>param_types:</span> <span class='id identifier rubyid_param_types'>param_types</span><span class='comma'>,</span>
    <span class='label'>resume_token:</span> <span class='id identifier rubyid_resume_token'>resume_token</span><span class='comma'>,</span>
    <span class='label'>query_mode:</span> <span class='id identifier rubyid_query_mode'>query_mode</span><span class='comma'>,</span>
    <span class='label'>partition_token:</span> <span class='id identifier rubyid_partition_token'>partition_token</span><span class='comma'>,</span>
    <span class='label'>seqno:</span> <span class='id identifier rubyid_seqno'>seqno</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='op'>::</span><span class='id identifier rubyid_to_proto'>to_proto</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner.html" title="Google::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1.html" title="Google::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1/ExecuteSqlRequest.html" title="Google::Spanner::V1::ExecuteSqlRequest (class)">ExecuteSqlRequest</a></span></span><span class='rparen'>)</span>
  <span class='ivar'>@execute_sql</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="execute_streaming_sql-instance_method">
  
    #<strong>execute_streaming_sql</strong>(session, sql, transaction: nil, params: nil, param_types: nil, resume_token: nil, query_mode: nil, partition_token: nil, seqno: nil, options: nil)  &#x21d2; <tt>Enumerable&lt;<span class='object_link'><a href="../../../Spanner/V1/PartialResultSet.html" title="Google::Spanner::V1::PartialResultSet (class)">Google::Spanner::V1::PartialResultSet</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Like ExecuteSql, except returns the
result set as a stream. Unlike
ExecuteSql, there is no limit on
the size of the returned result set. However, no individual row in the
result set can exceed 100 MiB, and no column value can exceed 10 MiB.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner/v1</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner_client'>spanner_client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Google::Cloud::Spanner::V1::SpannerClient#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_formatted_session'>formatted_session</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_session_path'><span class='object_link'><a href="#session_path-class_method" title="Google::Cloud::Spanner::V1::SpannerClient.session_path (method)">session_path</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[PROJECT]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[INSTANCE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[DATABASE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[SESSION]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># TODO: Initialize `sql`:
</span><span class='id identifier rubyid_sql'>sql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_spanner_client'>spanner_client</span><span class='period'>.</span><span class='id identifier rubyid_execute_streaming_sql'>execute_streaming_sql</span><span class='lparen'>(</span><span class='id identifier rubyid_formatted_session'>formatted_session</span><span class='comma'>,</span> <span class='id identifier rubyid_sql'>sql</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_element'>element</span><span class='op'>|</span>
  <span class='comment'># Process element.
</span><span class='kw'>end</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>session</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. The session in which the SQL query should be performed.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sql</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. The SQL string.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>transaction</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/TransactionSelector.html" title="Google::Spanner::V1::TransactionSelector (class)">Google::Spanner::V1::TransactionSelector</a></span> | Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The transaction to use. If none is provided, the default is a
temporary read-only transaction with strong concurrency.</p>

<p>The transaction to use.</p>

<p>For queries, if none is provided, the default is a temporary read-only
transaction with strong concurrency.</p>

<p>Standard DML statements require a ReadWrite transaction. Single-use
transactions are not supported (to avoid replay).  The caller must
either supply an existing transaction ID or begin a new transaction.</p>

<p>Partitioned DML requires an existing PartitionedDml transaction ID.
A hash of the same form as <code>Google::Spanner::V1::TransactionSelector</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>params</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Protobuf/Struct.html" title="Google::Protobuf::Struct (class)">Google::Protobuf::Struct</a></span> | Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The SQL string can contain parameter placeholders. A parameter
placeholder consists of <code>&#39;@&#39;</code> followed by the parameter
name. Parameter names consist of any combination of letters,
numbers, and underscores.</p>

<p>Parameters can appear anywhere that a literal value is expected.  The same
parameter name can be used more than once, for example:
  <code>&quot;WHERE id &gt; @msg_id AND id &lt; @msg_id + 100&quot;</code></p>

<p>It is an error to execute an SQL statement with unbound parameters.</p>

<p>Parameter values are specified using <code>params</code>, which is a JSON
object whose keys are parameter names, and whose values are the
corresponding parameter values.
A hash of the same form as <code>Google::Protobuf::Struct</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>param_types</span>
      
      
        <span class='type'>(<tt>Hash{String =&gt; <span class='object_link'><a href="../../../Spanner/V1/Type.html" title="Google::Spanner::V1::Type (class)">Google::Spanner::V1::Type</a></span> | Hash}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>It is not always possible for Cloud Spanner to infer the right SQL type
from a JSON value.  For example, values of type <code>BYTES</code> and values
of type <code>STRING</code> both appear in
<span class='object_link'><a href="../../../Spanner/V1/ExecuteSqlRequest.html#params-instance_method" title="Google::Spanner::V1::ExecuteSqlRequest#params (method)">params</a></span> as JSON strings.</p>

<p>In these cases, <code>param_types</code> can be used to specify the exact
SQL type for some or all of the SQL statement parameters. See the
definition of <span class='object_link'><a href="../../../Spanner/V1/Type.html" title="Google::Spanner::V1::Type (class)">Type</a></span> for more information
about SQL types.
A hash of the same form as <code>Google::Spanner::V1::Type</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>resume_token</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If this request is resuming a previously interrupted SQL statement
execution, <code>resume_token</code> should be copied from the last
<span class='object_link'><a href="../../../Spanner/V1/PartialResultSet.html" title="Google::Spanner::V1::PartialResultSet (class)">PartialResultSet</a></span> yielded before the
interruption. Doing this enables the new SQL statement execution to resume
where the last one left off. The rest of the request parameters must
exactly match the request that yielded this token.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>query_mode</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/ExecuteSqlRequest/QueryMode.html" title="Google::Spanner::V1::ExecuteSqlRequest::QueryMode (module)">Google::Spanner::V1::ExecuteSqlRequest::QueryMode</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Used to control the amount of debugging information returned in
<span class='object_link'><a href="../../../Spanner/V1/ResultSetStats.html" title="Google::Spanner::V1::ResultSetStats (class)">ResultSetStats</a></span>. If
<span class='object_link'><a href="../../../Spanner/V1/ExecuteSqlRequest.html#partition_token-instance_method" title="Google::Spanner::V1::ExecuteSqlRequest#partition_token (method)">partition_token</a></span> is
set, <span class='object_link'><a href="../../../Spanner/V1/ExecuteSqlRequest.html#query_mode-instance_method" title="Google::Spanner::V1::ExecuteSqlRequest#query_mode (method)">query_mode</a></span> can only
be set to
<span class='object_link'><a href="../../../Spanner/V1/ExecuteSqlRequest/QueryMode.html#NORMAL-constant" title="Google::Spanner::V1::ExecuteSqlRequest::QueryMode::NORMAL (constant)">QueryMode::NORMAL</a></span>.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>partition_token</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If present, results will be restricted to the specified partition
previously created using PartitionQuery().  There must be an exact
match for the values of fields common to this message and the
PartitionQueryRequest message used to create this partition_token.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>seqno</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A per-transaction sequence number used to identify this request. This
makes each request idempotent such that if the request is received multiple
times, at most one will succeed.</p>

<p>The sequence number must be monotonically increasing within the
transaction. If a request arrives for the first time with an out-of-order
sequence number, the transaction may be aborted. Replays of previously
handled requests will yield the same response as the first execution.</p>

<p>Required for DML statements. Ignored for queries.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Google::Gax::CallOptions</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Overrides the default settings for this call, e.g, timeout,
retries, etc.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Enumerable&lt;<span class='object_link'><a href="../../../Spanner/V1/PartialResultSet.html" title="Google::Spanner::V1::PartialResultSet (class)">Google::Spanner::V1::PartialResultSet</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>An enumerable of Google::Spanner::V1::PartialResultSet instances.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>Google::Gax::GaxError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the RPC is aborted.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


761
762
763
764
765
766
767
768
769
770
771
772
773
774
775
776
777
778
779
780
781
782
783
784
785</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/v1/spanner_client.rb', line 761</span>

<span class='kw'>def</span> <span class='id identifier rubyid_execute_streaming_sql'>execute_streaming_sql</span> \
    <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
    <span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span>
    <span class='label'>transaction:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>params:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>param_types:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>resume_token:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>query_mode:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>partition_token:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>seqno:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>options:</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>session:</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
    <span class='label'>sql:</span> <span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span>
    <span class='label'>transaction:</span> <span class='id identifier rubyid_transaction'>transaction</span><span class='comma'>,</span>
    <span class='label'>params:</span> <span class='id identifier rubyid_params'>params</span><span class='comma'>,</span>
    <span class='label'>param_types:</span> <span class='id identifier rubyid_param_types'>param_types</span><span class='comma'>,</span>
    <span class='label'>resume_token:</span> <span class='id identifier rubyid_resume_token'>resume_token</span><span class='comma'>,</span>
    <span class='label'>query_mode:</span> <span class='id identifier rubyid_query_mode'>query_mode</span><span class='comma'>,</span>
    <span class='label'>partition_token:</span> <span class='id identifier rubyid_partition_token'>partition_token</span><span class='comma'>,</span>
    <span class='label'>seqno:</span> <span class='id identifier rubyid_seqno'>seqno</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='op'>::</span><span class='id identifier rubyid_to_proto'>to_proto</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner.html" title="Google::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1.html" title="Google::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1/ExecuteSqlRequest.html" title="Google::Spanner::V1::ExecuteSqlRequest (class)">ExecuteSqlRequest</a></span></span><span class='rparen'>)</span>
  <span class='ivar'>@execute_streaming_sql</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_session-instance_method">
  
    #<strong>get_session</strong>(name, options: nil) {|result, operation| ... } &#x21d2; <tt><span class='object_link'><a href="../../../Spanner/V1/Session.html" title="Google::Spanner::V1::Session (class)">Google::Spanner::V1::Session</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Gets a session. Returns <code>NOT_FOUND</code> if the session does not exist.
This is mainly useful for determining whether a session is still
alive.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner/v1</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner_client'>spanner_client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Google::Cloud::Spanner::V1::SpannerClient#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_formatted_name'>formatted_name</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_session_path'><span class='object_link'><a href="#session_path-class_method" title="Google::Cloud::Spanner::V1::SpannerClient.session_path (method)">session_path</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[PROJECT]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[INSTANCE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[DATABASE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[SESSION]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_spanner_client'>spanner_client</span><span class='period'>.</span><span class='id identifier rubyid_get_session'>get_session</span><span class='lparen'>(</span><span class='id identifier rubyid_formatted_name'>formatted_name</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. The name of the session to retrieve.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Google::Gax::CallOptions</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Overrides the default settings for this call, e.g, timeout,
retries, etc.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>result</tt>, <tt>operation</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Access the result along with the RPC operation</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>result</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/Session.html" title="Google::Spanner::V1::Session (class)">Google::Spanner::V1::Session</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>operation</span>
      
      
        <span class='type'>(<tt>GRPC::ActiveCall::Operation</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/Session.html" title="Google::Spanner::V1::Session (class)">Google::Spanner::V1::Session</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>Google::Gax::GaxError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the RPC is aborted.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


409
410
411
412
413
414
415
416
417
418</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/v1/spanner_client.rb', line 409</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_session'>get_session</span> \
    <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
    <span class='label'>options:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>name:</span> <span class='id identifier rubyid_name'>name</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='op'>::</span><span class='id identifier rubyid_to_proto'>to_proto</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner.html" title="Google::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1.html" title="Google::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1/GetSessionRequest.html" title="Google::Spanner::V1::GetSessionRequest (class)">GetSessionRequest</a></span></span><span class='rparen'>)</span>
  <span class='ivar'>@get_session</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="list_sessions-instance_method">
  
    #<strong>list_sessions</strong>(database, page_size: nil, filter: nil, options: nil) {|result, operation| ... } &#x21d2; <tt>Google::Gax::PagedEnumerable&lt;<span class='object_link'><a href="../../../Spanner/V1/Session.html" title="Google::Spanner::V1::Session (class)">Google::Spanner::V1::Session</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Lists all sessions in a given database.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner/v1</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner_client'>spanner_client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Google::Cloud::Spanner::V1::SpannerClient#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_formatted_database'>formatted_database</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_database_path'><span class='object_link'><a href="#database_path-class_method" title="Google::Cloud::Spanner::V1::SpannerClient.database_path (method)">database_path</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[PROJECT]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[INSTANCE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[DATABASE]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># Iterate over all results.
</span><span class='id identifier rubyid_spanner_client'>spanner_client</span><span class='period'>.</span><span class='id identifier rubyid_list_sessions'>list_sessions</span><span class='lparen'>(</span><span class='id identifier rubyid_formatted_database'>formatted_database</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_element'>element</span><span class='op'>|</span>
  <span class='comment'># Process element.
</span><span class='kw'>end</span>

<span class='comment'># Or iterate over results one page at a time.
</span><span class='id identifier rubyid_spanner_client'>spanner_client</span><span class='period'>.</span><span class='id identifier rubyid_list_sessions'>list_sessions</span><span class='lparen'>(</span><span class='id identifier rubyid_formatted_database'>formatted_database</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each_page'>each_page</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_page'>page</span><span class='op'>|</span>
  <span class='comment'># Process each page at a time.
</span>  <span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_element'>element</span><span class='op'>|</span>
    <span class='comment'># Process element.
</span>  <span class='kw'>end</span>
<span class='kw'>end</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>database</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. The database in which to list sessions.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>page_size</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The maximum number of resources contained in the underlying API
response. If page streaming is performed per-resource, this
parameter does not affect the return value. If page streaming is
performed per-page, this determines the maximum number of
resources in a page.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>filter</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>An expression for filtering the results of the request. Filter rules are
case insensitive. The fields eligible for filtering are:</p>

<ul>
<li><code>labels.key</code> where key is the name of a label</li>
</ul>

<p>Some examples of using filters are:</p>

<ul>
<li><code>labels.env:*</code> --&gt; The session has the label &quot;env&quot;.

<ul>
<li><code>labels.env:dev</code> --&gt; The session has the label &quot;env&quot; and the value of
the label contains the string &quot;dev&quot;.</li>
</ul></li>
</ul>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Google::Gax::CallOptions</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Overrides the default settings for this call, e.g, timeout,
retries, etc.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>result</tt>, <tt>operation</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Access the result along with the RPC operation</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>result</span>
      
      
        <span class='type'>(<tt>Google::Gax::PagedEnumerable&lt;<span class='object_link'><a href="../../../Spanner/V1/Session.html" title="Google::Spanner::V1::Session (class)">Google::Spanner::V1::Session</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>operation</span>
      
      
        <span class='type'>(<tt>GRPC::ActiveCall::Operation</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Google::Gax::PagedEnumerable&lt;<span class='object_link'><a href="../../../Spanner/V1/Session.html" title="Google::Spanner::V1::Session (class)">Google::Spanner::V1::Session</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>An enumerable of Google::Spanner::V1::Session instances.
See Google::Gax::PagedEnumerable documentation for other
operations such as per-page iteration or access to the response
object.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>Google::Gax::GaxError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the RPC is aborted.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


472
473
474
475
476
477
478
479
480
481
482
483
484
485</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/v1/spanner_client.rb', line 472</span>

<span class='kw'>def</span> <span class='id identifier rubyid_list_sessions'>list_sessions</span> \
    <span class='id identifier rubyid_database'>database</span><span class='comma'>,</span>
    <span class='label'>page_size:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>filter:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>options:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>database:</span> <span class='id identifier rubyid_database'>database</span><span class='comma'>,</span>
    <span class='label'>page_size:</span> <span class='id identifier rubyid_page_size'>page_size</span><span class='comma'>,</span>
    <span class='label'>filter:</span> <span class='id identifier rubyid_filter'>filter</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='op'>::</span><span class='id identifier rubyid_to_proto'>to_proto</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner.html" title="Google::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1.html" title="Google::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1/ListSessionsRequest.html" title="Google::Spanner::V1::ListSessionsRequest (class)">ListSessionsRequest</a></span></span><span class='rparen'>)</span>
  <span class='ivar'>@list_sessions</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="partition_query-instance_method">
  
    #<strong>partition_query</strong>(session, sql, transaction: nil, params: nil, param_types: nil, partition_options: nil, options: nil) {|result, operation| ... } &#x21d2; <tt><span class='object_link'><a href="../../../Spanner/V1/PartitionResponse.html" title="Google::Spanner::V1::PartitionResponse (class)">Google::Spanner::V1::PartitionResponse</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a set of partition tokens that can be used to execute a query
operation in parallel.  Each of the returned partition tokens can be used
by ExecuteStreamingSql to
specify a subset of the query result to read.  The same session and
read-only transaction must be used by the PartitionQueryRequest used to
create the partition tokens and the ExecuteSqlRequests that use the
partition tokens.</p>

<p>Partition tokens become invalid when the session used to create them
is deleted, is idle for too long, begins a new transaction, or becomes too
old.  When any of these happen, it is not possible to resume the query, and
the whole operation must be restarted from the beginning.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner/v1</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner_client'>spanner_client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Google::Cloud::Spanner::V1::SpannerClient#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_formatted_session'>formatted_session</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_session_path'><span class='object_link'><a href="#session_path-class_method" title="Google::Cloud::Spanner::V1::SpannerClient.session_path (method)">session_path</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[PROJECT]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[INSTANCE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[DATABASE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[SESSION]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># TODO: Initialize `sql`:
</span><span class='id identifier rubyid_sql'>sql</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_spanner_client'>spanner_client</span><span class='period'>.</span><span class='id identifier rubyid_partition_query'>partition_query</span><span class='lparen'>(</span><span class='id identifier rubyid_formatted_session'>formatted_session</span><span class='comma'>,</span> <span class='id identifier rubyid_sql'>sql</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>session</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. The session used to create the partitions.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>sql</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The query request to generate partitions for. The request will fail if
the query is not root partitionable. The query plan of a root
partitionable query has a single distributed union operator. A distributed
union operator conceptually divides one or more tables into multiple
splits, remotely evaluates a subquery independently on each split, and
then unions all results.</p>

<p>This must not contain DML commands, such as INSERT, UPDATE, or
DELETE. Use
ExecuteStreamingSql with a
PartitionedDml transaction for large, partition-friendly DML operations.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>transaction</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/TransactionSelector.html" title="Google::Spanner::V1::TransactionSelector (class)">Google::Spanner::V1::TransactionSelector</a></span> | Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Read only snapshot transactions are supported, read/write and single use
transactions are not.
A hash of the same form as <code>Google::Spanner::V1::TransactionSelector</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>params</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Protobuf/Struct.html" title="Google::Protobuf::Struct (class)">Google::Protobuf::Struct</a></span> | Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The SQL query string can contain parameter placeholders. A parameter
placeholder consists of <code>&#39;@&#39;</code> followed by the parameter
name. Parameter names consist of any combination of letters,
numbers, and underscores.</p>

<p>Parameters can appear anywhere that a literal value is expected.  The same
parameter name can be used more than once, for example:
  <code>&quot;WHERE id &gt; @msg_id AND id &lt; @msg_id + 100&quot;</code></p>

<p>It is an error to execute an SQL query with unbound parameters.</p>

<p>Parameter values are specified using <code>params</code>, which is a JSON
object whose keys are parameter names, and whose values are the
corresponding parameter values.
A hash of the same form as <code>Google::Protobuf::Struct</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>param_types</span>
      
      
        <span class='type'>(<tt>Hash{String =&gt; <span class='object_link'><a href="../../../Spanner/V1/Type.html" title="Google::Spanner::V1::Type (class)">Google::Spanner::V1::Type</a></span> | Hash}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>It is not always possible for Cloud Spanner to infer the right SQL type
from a JSON value.  For example, values of type <code>BYTES</code> and values
of type <code>STRING</code> both appear in
<span class='object_link'><a href="../../../Spanner/V1/PartitionQueryRequest.html#params-instance_method" title="Google::Spanner::V1::PartitionQueryRequest#params (method)">params</a></span> as JSON strings.</p>

<p>In these cases, <code>param_types</code> can be used to specify the exact
SQL type for some or all of the SQL query parameters. See the
definition of <span class='object_link'><a href="../../../Spanner/V1/Type.html" title="Google::Spanner::V1::Type (class)">Type</a></span> for more information
about SQL types.
A hash of the same form as <code>Google::Spanner::V1::Type</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>partition_options</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/PartitionOptions.html" title="Google::Spanner::V1::PartitionOptions (class)">Google::Spanner::V1::PartitionOptions</a></span> | Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Additional options that affect how many partitions are created.
A hash of the same form as <code>Google::Spanner::V1::PartitionOptions</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Google::Gax::CallOptions</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Overrides the default settings for this call, e.g, timeout,
retries, etc.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>result</tt>, <tt>operation</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Access the result along with the RPC operation</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>result</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/PartitionResponse.html" title="Google::Spanner::V1::PartitionResponse (class)">Google::Spanner::V1::PartitionResponse</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>operation</span>
      
      
        <span class='type'>(<tt>GRPC::ActiveCall::Operation</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/PartitionResponse.html" title="Google::Spanner::V1::PartitionResponse (class)">Google::Spanner::V1::PartitionResponse</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>Google::Gax::GaxError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the RPC is aborted.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1338
1339
1340
1341
1342
1343
1344
1345
1346
1347
1348
1349
1350
1351
1352
1353
1354
1355
1356
1357</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/v1/spanner_client.rb', line 1338</span>

<span class='kw'>def</span> <span class='id identifier rubyid_partition_query'>partition_query</span> \
    <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
    <span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span>
    <span class='label'>transaction:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>params:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>param_types:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>partition_options:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>options:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>session:</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
    <span class='label'>sql:</span> <span class='id identifier rubyid_sql'>sql</span><span class='comma'>,</span>
    <span class='label'>transaction:</span> <span class='id identifier rubyid_transaction'>transaction</span><span class='comma'>,</span>
    <span class='label'>params:</span> <span class='id identifier rubyid_params'>params</span><span class='comma'>,</span>
    <span class='label'>param_types:</span> <span class='id identifier rubyid_param_types'>param_types</span><span class='comma'>,</span>
    <span class='label'>partition_options:</span> <span class='id identifier rubyid_partition_options'>partition_options</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='op'>::</span><span class='id identifier rubyid_to_proto'>to_proto</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner.html" title="Google::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1.html" title="Google::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1/PartitionQueryRequest.html" title="Google::Spanner::V1::PartitionQueryRequest (class)">PartitionQueryRequest</a></span></span><span class='rparen'>)</span>
  <span class='ivar'>@partition_query</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="partition_read-instance_method">
  
    #<strong>partition_read</strong>(session, table, key_set, transaction: nil, index: nil, columns: nil, partition_options: nil, options: nil) {|result, operation| ... } &#x21d2; <tt><span class='object_link'><a href="../../../Spanner/V1/PartitionResponse.html" title="Google::Spanner::V1::PartitionResponse (class)">Google::Spanner::V1::PartitionResponse</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Creates a set of partition tokens that can be used to execute a read
operation in parallel.  Each of the returned partition tokens can be used
by StreamingRead to specify a
subset of the read result to read.  The same session and read-only
transaction must be used by the PartitionReadRequest used to create the
partition tokens and the ReadRequests that use the partition tokens.  There
are no ordering guarantees on rows returned among the returned partition
tokens, or even within each individual StreamingRead call issued with a
partition_token.</p>

<p>Partition tokens become invalid when the session used to create them
is deleted, is idle for too long, begins a new transaction, or becomes too
old.  When any of these happen, it is not possible to resume the read, and
the whole operation must be restarted from the beginning.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner/v1</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner_client'>spanner_client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Google::Cloud::Spanner::V1::SpannerClient#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_formatted_session'>formatted_session</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_session_path'><span class='object_link'><a href="#session_path-class_method" title="Google::Cloud::Spanner::V1::SpannerClient.session_path (method)">session_path</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[PROJECT]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[INSTANCE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[DATABASE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[SESSION]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># TODO: Initialize `table`:
</span><span class='id identifier rubyid_table'>table</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>

<span class='comment'># TODO: Initialize `key_set`:
</span><span class='id identifier rubyid_key_set'>key_set</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_spanner_client'>spanner_client</span><span class='period'>.</span><span class='id identifier rubyid_partition_read'>partition_read</span><span class='lparen'>(</span><span class='id identifier rubyid_formatted_session'>formatted_session</span><span class='comma'>,</span> <span class='id identifier rubyid_table'>table</span><span class='comma'>,</span> <span class='id identifier rubyid_key_set'>key_set</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>session</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. The session used to create the partitions.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>table</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. The name of the table in the database to be read.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>key_set</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/KeySet.html" title="Google::Spanner::V1::KeySet (class)">Google::Spanner::V1::KeySet</a></span> | Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. <code>key_set</code> identifies the rows to be yielded. <code>key_set</code> names the
primary keys of the rows in
<span class='object_link'><a href="../../../Spanner/V1/PartitionReadRequest.html#table-instance_method" title="Google::Spanner::V1::PartitionReadRequest#table (method)">table</a></span> to be yielded, unless
<span class='object_link'><a href="../../../Spanner/V1/PartitionReadRequest.html#index-instance_method" title="Google::Spanner::V1::PartitionReadRequest#index (method)">index</a></span> is present. If
<span class='object_link'><a href="../../../Spanner/V1/PartitionReadRequest.html#index-instance_method" title="Google::Spanner::V1::PartitionReadRequest#index (method)">index</a></span> is present, then
<span class='object_link'><a href="../../../Spanner/V1/PartitionReadRequest.html#key_set-instance_method" title="Google::Spanner::V1::PartitionReadRequest#key_set (method)">key_set</a></span> instead names
index keys in <span class='object_link'><a href="../../../Spanner/V1/PartitionReadRequest.html#index-instance_method" title="Google::Spanner::V1::PartitionReadRequest#index (method)">index</a></span>.</p>

<p>It is not an error for the <code>key_set</code> to name rows that do not
exist in the database. Read yields nothing for nonexistent rows.
A hash of the same form as <code>Google::Spanner::V1::KeySet</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>transaction</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/TransactionSelector.html" title="Google::Spanner::V1::TransactionSelector (class)">Google::Spanner::V1::TransactionSelector</a></span> | Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Read only snapshot transactions are supported, read/write and single use
transactions are not.
A hash of the same form as <code>Google::Spanner::V1::TransactionSelector</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>index</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If non-empty, the name of an index on
<span class='object_link'><a href="../../../Spanner/V1/PartitionReadRequest.html#table-instance_method" title="Google::Spanner::V1::PartitionReadRequest#table (method)">table</a></span>. This index is used
instead of the table primary key when interpreting
<span class='object_link'><a href="../../../Spanner/V1/PartitionReadRequest.html#key_set-instance_method" title="Google::Spanner::V1::PartitionReadRequest#key_set (method)">key_set</a></span> and sorting
result rows. See <span class='object_link'><a href="../../../Spanner/V1/PartitionReadRequest.html#key_set-instance_method" title="Google::Spanner::V1::PartitionReadRequest#key_set (method)">key_set</a></span>
for further information.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>columns</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The columns of <span class='object_link'><a href="../../../Spanner/V1/PartitionReadRequest.html#table-instance_method" title="Google::Spanner::V1::PartitionReadRequest#table (method)">table</a></span> to be
returned for each row matching this request.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>partition_options</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/PartitionOptions.html" title="Google::Spanner::V1::PartitionOptions (class)">Google::Spanner::V1::PartitionOptions</a></span> | Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Additional options that affect how many partitions are created.
A hash of the same form as <code>Google::Spanner::V1::PartitionOptions</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Google::Gax::CallOptions</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Overrides the default settings for this call, e.g, timeout,
retries, etc.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>result</tt>, <tt>operation</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Access the result along with the RPC operation</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>result</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/PartitionResponse.html" title="Google::Spanner::V1::PartitionResponse (class)">Google::Spanner::V1::PartitionResponse</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>operation</span>
      
      
        <span class='type'>(<tt>GRPC::ActiveCall::Operation</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/PartitionResponse.html" title="Google::Spanner::V1::PartitionResponse (class)">Google::Spanner::V1::PartitionResponse</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>Google::Gax::GaxError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the RPC is aborted.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1431
1432
1433
1434
1435
1436
1437
1438
1439
1440
1441
1442
1443
1444
1445
1446
1447
1448
1449
1450
1451
1452</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/v1/spanner_client.rb', line 1431</span>

<span class='kw'>def</span> <span class='id identifier rubyid_partition_read'>partition_read</span> \
    <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
    <span class='id identifier rubyid_table'>table</span><span class='comma'>,</span>
    <span class='id identifier rubyid_key_set'>key_set</span><span class='comma'>,</span>
    <span class='label'>transaction:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>index:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>columns:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>partition_options:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>options:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>session:</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
    <span class='label'>table:</span> <span class='id identifier rubyid_table'>table</span><span class='comma'>,</span>
    <span class='label'>key_set:</span> <span class='id identifier rubyid_key_set'>key_set</span><span class='comma'>,</span>
    <span class='label'>transaction:</span> <span class='id identifier rubyid_transaction'>transaction</span><span class='comma'>,</span>
    <span class='label'>index:</span> <span class='id identifier rubyid_index'>index</span><span class='comma'>,</span>
    <span class='label'>columns:</span> <span class='id identifier rubyid_columns'>columns</span><span class='comma'>,</span>
    <span class='label'>partition_options:</span> <span class='id identifier rubyid_partition_options'>partition_options</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='op'>::</span><span class='id identifier rubyid_to_proto'>to_proto</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner.html" title="Google::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1.html" title="Google::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1/PartitionReadRequest.html" title="Google::Spanner::V1::PartitionReadRequest (class)">PartitionReadRequest</a></span></span><span class='rparen'>)</span>
  <span class='ivar'>@partition_read</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="read-instance_method">
  
    #<strong>read</strong>(session, table, columns, key_set, transaction: nil, index: nil, limit: nil, resume_token: nil, partition_token: nil, options: nil) {|result, operation| ... } &#x21d2; <tt><span class='object_link'><a href="../../../Spanner/V1/ResultSet.html" title="Google::Spanner::V1::ResultSet (class)">Google::Spanner::V1::ResultSet</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Reads rows from the database using key lookups and scans, as a
simple key/value style alternative to
ExecuteSql.  This method cannot be
used to return a result set larger than 10 MiB; if the read matches more
data than that, the read fails with a <code>FAILED_PRECONDITION</code>
error.</p>

<p>Reads inside read-write transactions might return <code>ABORTED</code>. If
this occurs, the application should restart the transaction from
the beginning. See <span class='object_link'><a href="../../../Spanner/V1/Transaction.html" title="Google::Spanner::V1::Transaction (class)">Transaction</a></span> for more
details.</p>

<p>Larger result sets can be yielded in streaming fashion by calling
StreamingRead instead.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner/v1</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner_client'>spanner_client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Google::Cloud::Spanner::V1::SpannerClient#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_formatted_session'>formatted_session</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_session_path'><span class='object_link'><a href="#session_path-class_method" title="Google::Cloud::Spanner::V1::SpannerClient.session_path (method)">session_path</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[PROJECT]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[INSTANCE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[DATABASE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[SESSION]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># TODO: Initialize `table`:
</span><span class='id identifier rubyid_table'>table</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>

<span class='comment'># TODO: Initialize `columns`:
</span><span class='id identifier rubyid_columns'>columns</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

<span class='comment'># TODO: Initialize `key_set`:
</span><span class='id identifier rubyid_key_set'>key_set</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_spanner_client'>spanner_client</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='id identifier rubyid_formatted_session'>formatted_session</span><span class='comma'>,</span> <span class='id identifier rubyid_table'>table</span><span class='comma'>,</span> <span class='id identifier rubyid_columns'>columns</span><span class='comma'>,</span> <span class='id identifier rubyid_key_set'>key_set</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>session</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. The session in which the read should be performed.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>table</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. The name of the table in the database to be read.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>columns</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The columns of <span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#table-instance_method" title="Google::Spanner::V1::ReadRequest#table (method)">table</a></span> to be returned
for each row matching this request.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>key_set</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/KeySet.html" title="Google::Spanner::V1::KeySet (class)">Google::Spanner::V1::KeySet</a></span> | Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. <code>key_set</code> identifies the rows to be yielded. <code>key_set</code> names the
primary keys of the rows in <span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#table-instance_method" title="Google::Spanner::V1::ReadRequest#table (method)">table</a></span> to
be yielded, unless <span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#index-instance_method" title="Google::Spanner::V1::ReadRequest#index (method)">index</a></span> is present.
If <span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#index-instance_method" title="Google::Spanner::V1::ReadRequest#index (method)">index</a></span> is present, then
<span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#key_set-instance_method" title="Google::Spanner::V1::ReadRequest#key_set (method)">key_set</a></span> instead names index keys
in <span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#index-instance_method" title="Google::Spanner::V1::ReadRequest#index (method)">index</a></span>.</p>

<p>If the <span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#partition_token-instance_method" title="Google::Spanner::V1::ReadRequest#partition_token (method)">partition_token</a></span>
field is empty, rows are yielded in table primary key order (if
<span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#index-instance_method" title="Google::Spanner::V1::ReadRequest#index (method)">index</a></span> is empty) or index key order
(if <span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#index-instance_method" title="Google::Spanner::V1::ReadRequest#index (method)">index</a></span> is non-empty).  If the
<span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#partition_token-instance_method" title="Google::Spanner::V1::ReadRequest#partition_token (method)">partition_token</a></span> field is
not empty, rows will be yielded in an unspecified order.</p>

<p>It is not an error for the <code>key_set</code> to name rows that do not
exist in the database. Read yields nothing for nonexistent rows.
A hash of the same form as <code>Google::Spanner::V1::KeySet</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>transaction</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/TransactionSelector.html" title="Google::Spanner::V1::TransactionSelector (class)">Google::Spanner::V1::TransactionSelector</a></span> | Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The transaction to use. If none is provided, the default is a
temporary read-only transaction with strong concurrency.
A hash of the same form as <code>Google::Spanner::V1::TransactionSelector</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>index</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If non-empty, the name of an index on
<span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#table-instance_method" title="Google::Spanner::V1::ReadRequest#table (method)">table</a></span>. This index is used instead of
the table primary key when interpreting
<span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#key_set-instance_method" title="Google::Spanner::V1::ReadRequest#key_set (method)">key_set</a></span> and sorting result rows.
See <span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#key_set-instance_method" title="Google::Spanner::V1::ReadRequest#key_set (method)">key_set</a></span> for further
information.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>limit</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If greater than zero, only the first <code>limit</code> rows are yielded. If <code>limit</code>
is zero, the default is no limit. A limit cannot be specified if
<code>partition_token</code> is set.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>resume_token</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If this request is resuming a previously interrupted read,
<code>resume_token</code> should be copied from the last
<span class='object_link'><a href="../../../Spanner/V1/PartialResultSet.html" title="Google::Spanner::V1::PartialResultSet (class)">PartialResultSet</a></span> yielded before the
interruption. Doing this enables the new read to resume where the last read
left off. The rest of the request parameters must exactly match the request
that yielded this token.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>partition_token</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If present, results will be restricted to the specified partition
previously created using PartitionRead().    There must be an exact
match for the values of fields common to this message and the
PartitionReadRequest message used to create this partition_token.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Google::Gax::CallOptions</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Overrides the default settings for this call, e.g, timeout,
retries, etc.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>result</tt>, <tt>operation</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Access the result along with the RPC operation</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>result</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/ResultSet.html" title="Google::Spanner::V1::ResultSet (class)">Google::Spanner::V1::ResultSet</a></span></tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>operation</span>
      
      
        <span class='type'>(<tt>GRPC::ActiveCall::Operation</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/ResultSet.html" title="Google::Spanner::V1::ResultSet (class)">Google::Spanner::V1::ResultSet</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>Google::Gax::GaxError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the RPC is aborted.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


963
964
965
966
967
968
969
970
971
972
973
974
975
976
977
978
979
980
981
982
983
984
985
986
987
988</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/v1/spanner_client.rb', line 963</span>

<span class='kw'>def</span> <span class='id identifier rubyid_read'>read</span> \
    <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
    <span class='id identifier rubyid_table'>table</span><span class='comma'>,</span>
    <span class='id identifier rubyid_columns'>columns</span><span class='comma'>,</span>
    <span class='id identifier rubyid_key_set'>key_set</span><span class='comma'>,</span>
    <span class='label'>transaction:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>index:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>limit:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>resume_token:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>partition_token:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>options:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>session:</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
    <span class='label'>table:</span> <span class='id identifier rubyid_table'>table</span><span class='comma'>,</span>
    <span class='label'>columns:</span> <span class='id identifier rubyid_columns'>columns</span><span class='comma'>,</span>
    <span class='label'>key_set:</span> <span class='id identifier rubyid_key_set'>key_set</span><span class='comma'>,</span>
    <span class='label'>transaction:</span> <span class='id identifier rubyid_transaction'>transaction</span><span class='comma'>,</span>
    <span class='label'>index:</span> <span class='id identifier rubyid_index'>index</span><span class='comma'>,</span>
    <span class='label'>limit:</span> <span class='id identifier rubyid_limit'>limit</span><span class='comma'>,</span>
    <span class='label'>resume_token:</span> <span class='id identifier rubyid_resume_token'>resume_token</span><span class='comma'>,</span>
    <span class='label'>partition_token:</span> <span class='id identifier rubyid_partition_token'>partition_token</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='op'>::</span><span class='id identifier rubyid_to_proto'>to_proto</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner.html" title="Google::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1.html" title="Google::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html" title="Google::Spanner::V1::ReadRequest (class)">ReadRequest</a></span></span><span class='rparen'>)</span>
  <span class='ivar'>@read</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rollback-instance_method">
  
    #<strong>rollback</strong>(session, transaction_id, options: nil) {|result, operation| ... } &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Rolls back a transaction, releasing any locks it holds. It is a good
idea to call this for any transaction that includes one or more
Read or
ExecuteSql requests and ultimately
decides not to commit.</p>

<p><code>Rollback</code> returns <code>OK</code> if it successfully aborts the transaction, the
transaction was already aborted, or the transaction is not
found. <code>Rollback</code> never returns <code>ABORTED</code>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner/v1</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner_client'>spanner_client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Google::Cloud::Spanner::V1::SpannerClient#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_formatted_session'>formatted_session</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_session_path'><span class='object_link'><a href="#session_path-class_method" title="Google::Cloud::Spanner::V1::SpannerClient.session_path (method)">session_path</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[PROJECT]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[INSTANCE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[DATABASE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[SESSION]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># TODO: Initialize `transaction_id`:
</span><span class='id identifier rubyid_transaction_id'>transaction_id</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_spanner_client'>spanner_client</span><span class='period'>.</span><span class='id identifier rubyid_rollback'>rollback</span><span class='lparen'>(</span><span class='id identifier rubyid_formatted_session'>formatted_session</span><span class='comma'>,</span> <span class='id identifier rubyid_transaction_id'>transaction_id</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>session</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. The session in which the transaction to roll back is running.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>transaction_id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. The transaction to roll back.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Google::Gax::CallOptions</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Overrides the default settings for this call, e.g, timeout,
retries, etc.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>result</tt>, <tt>operation</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Access the result along with the RPC operation</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>result</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'><p>[]</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>operation</span>
      
      
        <span class='type'>(<tt>GRPC::ActiveCall::Operation</tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>Google::Gax::GaxError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the RPC is aborted.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1241
1242
1243
1244
1245
1246
1247
1248
1249
1250
1251
1252
1253</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/v1/spanner_client.rb', line 1241</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rollback'>rollback</span> \
    <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
    <span class='id identifier rubyid_transaction_id'>transaction_id</span><span class='comma'>,</span>
    <span class='label'>options:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>session:</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
    <span class='label'>transaction_id:</span> <span class='id identifier rubyid_transaction_id'>transaction_id</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='op'>::</span><span class='id identifier rubyid_to_proto'>to_proto</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner.html" title="Google::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1.html" title="Google::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1/RollbackRequest.html" title="Google::Spanner::V1::RollbackRequest (class)">RollbackRequest</a></span></span><span class='rparen'>)</span>
  <span class='ivar'>@rollback</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="streaming_read-instance_method">
  
    #<strong>streaming_read</strong>(session, table, columns, key_set, transaction: nil, index: nil, limit: nil, resume_token: nil, partition_token: nil, options: nil)  &#x21d2; <tt>Enumerable&lt;<span class='object_link'><a href="../../../Spanner/V1/PartialResultSet.html" title="Google::Spanner::V1::PartialResultSet (class)">Google::Spanner::V1::PartialResultSet</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Like Read, except returns the result set
as a stream. Unlike Read, there is no
limit on the size of the returned result set. However, no individual row in
the result set can exceed 100 MiB, and no column value can exceed
10 MiB.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>google/cloud/spanner/v1</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_spanner_client'>spanner_client</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Google::Cloud::Spanner::V1::SpannerClient#initialize (method)">new</a></span></span>
<span class='id identifier rubyid_formatted_session'>formatted_session</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Cloud.html" title="Google::Cloud (module)">Cloud</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Spanner.html" title="Google::Cloud::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../V1.html" title="Google::Cloud::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Google::Cloud::Spanner::V1::SpannerClient (class)">SpannerClient</a></span></span><span class='period'>.</span><span class='id identifier rubyid_session_path'><span class='object_link'><a href="#session_path-class_method" title="Google::Cloud::Spanner::V1::SpannerClient.session_path (method)">session_path</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[PROJECT]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[INSTANCE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[DATABASE]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[SESSION]</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

<span class='comment'># TODO: Initialize `table`:
</span><span class='id identifier rubyid_table'>table</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>

<span class='comment'># TODO: Initialize `columns`:
</span><span class='id identifier rubyid_columns'>columns</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

<span class='comment'># TODO: Initialize `key_set`:
</span><span class='id identifier rubyid_key_set'>key_set</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='id identifier rubyid_spanner_client'>spanner_client</span><span class='period'>.</span><span class='id identifier rubyid_streaming_read'>streaming_read</span><span class='lparen'>(</span><span class='id identifier rubyid_formatted_session'>formatted_session</span><span class='comma'>,</span> <span class='id identifier rubyid_table'>table</span><span class='comma'>,</span> <span class='id identifier rubyid_columns'>columns</span><span class='comma'>,</span> <span class='id identifier rubyid_key_set'>key_set</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_element'>element</span><span class='op'>|</span>
  <span class='comment'># Process element.
</span><span class='kw'>end</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>session</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. The session in which the read should be performed.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>table</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. The name of the table in the database to be read.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>columns</span>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The columns of <span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#table-instance_method" title="Google::Spanner::V1::ReadRequest#table (method)">table</a></span> to be returned
for each row matching this request.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>key_set</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/KeySet.html" title="Google::Spanner::V1::KeySet (class)">Google::Spanner::V1::KeySet</a></span> | Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Required. <code>key_set</code> identifies the rows to be yielded. <code>key_set</code> names the
primary keys of the rows in <span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#table-instance_method" title="Google::Spanner::V1::ReadRequest#table (method)">table</a></span> to
be yielded, unless <span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#index-instance_method" title="Google::Spanner::V1::ReadRequest#index (method)">index</a></span> is present.
If <span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#index-instance_method" title="Google::Spanner::V1::ReadRequest#index (method)">index</a></span> is present, then
<span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#key_set-instance_method" title="Google::Spanner::V1::ReadRequest#key_set (method)">key_set</a></span> instead names index keys
in <span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#index-instance_method" title="Google::Spanner::V1::ReadRequest#index (method)">index</a></span>.</p>

<p>If the <span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#partition_token-instance_method" title="Google::Spanner::V1::ReadRequest#partition_token (method)">partition_token</a></span>
field is empty, rows are yielded in table primary key order (if
<span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#index-instance_method" title="Google::Spanner::V1::ReadRequest#index (method)">index</a></span> is empty) or index key order
(if <span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#index-instance_method" title="Google::Spanner::V1::ReadRequest#index (method)">index</a></span> is non-empty).  If the
<span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#partition_token-instance_method" title="Google::Spanner::V1::ReadRequest#partition_token (method)">partition_token</a></span> field is
not empty, rows will be yielded in an unspecified order.</p>

<p>It is not an error for the <code>key_set</code> to name rows that do not
exist in the database. Read yields nothing for nonexistent rows.
A hash of the same form as <code>Google::Spanner::V1::KeySet</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>transaction</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Spanner/V1/TransactionSelector.html" title="Google::Spanner::V1::TransactionSelector (class)">Google::Spanner::V1::TransactionSelector</a></span> | Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The transaction to use. If none is provided, the default is a
temporary read-only transaction with strong concurrency.
A hash of the same form as <code>Google::Spanner::V1::TransactionSelector</code>
can also be provided.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>index</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If non-empty, the name of an index on
<span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#table-instance_method" title="Google::Spanner::V1::ReadRequest#table (method)">table</a></span>. This index is used instead of
the table primary key when interpreting
<span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#key_set-instance_method" title="Google::Spanner::V1::ReadRequest#key_set (method)">key_set</a></span> and sorting result rows.
See <span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html#key_set-instance_method" title="Google::Spanner::V1::ReadRequest#key_set (method)">key_set</a></span> for further
information.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>limit</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If greater than zero, only the first <code>limit</code> rows are yielded. If <code>limit</code>
is zero, the default is no limit. A limit cannot be specified if
<code>partition_token</code> is set.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>resume_token</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If this request is resuming a previously interrupted read,
<code>resume_token</code> should be copied from the last
<span class='object_link'><a href="../../../Spanner/V1/PartialResultSet.html" title="Google::Spanner::V1::PartialResultSet (class)">PartialResultSet</a></span> yielded before the
interruption. Doing this enables the new read to resume where the last read
left off. The rest of the request parameters must exactly match the request
that yielded this token.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>partition_token</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>If present, results will be restricted to the specified partition
previously created using PartitionRead().    There must be an exact
match for the values of fields common to this message and the
PartitionReadRequest message used to create this partition_token.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Google::Gax::CallOptions</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Overrides the default settings for this call, e.g, timeout,
retries, etc.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Enumerable&lt;<span class='object_link'><a href="../../../Spanner/V1/PartialResultSet.html" title="Google::Spanner::V1::PartialResultSet (class)">Google::Spanner::V1::PartialResultSet</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>An enumerable of Google::Spanner::V1::PartialResultSet instances.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>Google::Gax::GaxError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if the RPC is aborted.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1075
1076
1077
1078
1079
1080
1081
1082
1083
1084
1085
1086
1087
1088
1089
1090
1091
1092
1093
1094
1095
1096
1097
1098
1099</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/google/cloud/spanner/v1/spanner_client.rb', line 1075</span>

<span class='kw'>def</span> <span class='id identifier rubyid_streaming_read'>streaming_read</span> \
    <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
    <span class='id identifier rubyid_table'>table</span><span class='comma'>,</span>
    <span class='id identifier rubyid_columns'>columns</span><span class='comma'>,</span>
    <span class='id identifier rubyid_key_set'>key_set</span><span class='comma'>,</span>
    <span class='label'>transaction:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>index:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>limit:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>resume_token:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>partition_token:</span> <span class='kw'>nil</span><span class='comma'>,</span>
    <span class='label'>options:</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>session:</span> <span class='id identifier rubyid_session'>session</span><span class='comma'>,</span>
    <span class='label'>table:</span> <span class='id identifier rubyid_table'>table</span><span class='comma'>,</span>
    <span class='label'>columns:</span> <span class='id identifier rubyid_columns'>columns</span><span class='comma'>,</span>
    <span class='label'>key_set:</span> <span class='id identifier rubyid_key_set'>key_set</span><span class='comma'>,</span>
    <span class='label'>transaction:</span> <span class='id identifier rubyid_transaction'>transaction</span><span class='comma'>,</span>
    <span class='label'>index:</span> <span class='id identifier rubyid_index'>index</span><span class='comma'>,</span>
    <span class='label'>limit:</span> <span class='id identifier rubyid_limit'>limit</span><span class='comma'>,</span>
    <span class='label'>resume_token:</span> <span class='id identifier rubyid_resume_token'>resume_token</span><span class='comma'>,</span>
    <span class='label'>partition_token:</span> <span class='id identifier rubyid_partition_token'>partition_token</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_req'>req</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'>Gax</span><span class='op'>::</span><span class='id identifier rubyid_to_proto'>to_proto</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='const'><span class='object_link'><a href="../../../../Google.html" title="Google (module)">Google</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner.html" title="Google::Spanner (module)">Spanner</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1.html" title="Google::Spanner::V1 (module)">V1</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../../Spanner/V1/ReadRequest.html" title="Google::Spanner::V1::ReadRequest (class)">ReadRequest</a></span></span><span class='rparen'>)</span>
  <span class='ivar'>@streaming_read</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_req'>req</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

  <div id="footer">
  <ul class="footer-links">
    <li>
      <a href="https://github.com/GoogleCloudPlatform/google-cloud-ruby" title="Google Cloud on Github">
        <img src="/google-cloud-ruby/img/icon-link-github.svg" alt="GitHub icon"> GitHub
      </a>
    </li>
    <li>
      <a href="https://github.com/GoogleCloudPlatform/google-cloud-ruby/issues" title="Google Cloud issues on Github">
        <img src="/google-cloud-ruby/img/icon-link-github.svg" alt="GitHub icon"> Issues
      </a>
    </li>
    <li>
      <a href="http://stackoverflow.com/questions/tagged/google-cloud-ruby" title="Google Cloud on StackOverflow">
      <img src="/google-cloud-ruby/img/icon-link-stackoverflow.svg" alt="StackOverflow icon"> StackOverflow
    </a>
    </li>
    <li>
      <a href="http://rubygems.org/gems/google-cloud" title="Google Cloud on RubyGems">
        <img src="/google-cloud-ruby/img/icon-link-package-manager.svg" alt="RubyGems icon"> RubyGems
      </a>
    </li>
  </ul>

  <p>
    Documentation generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>.
  </p>
</div>

</div>
